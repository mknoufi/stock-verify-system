# GPT Engineer Prompt - Stock Verification System
# https://github.com/gpt-engineer-org/gpt-engineer

## Project Context

This is an existing Stock Verification System with:
- **Backend**: FastAPI (Python 3.10+) on port 8001
- **Frontend**: React Native + Expo (TypeScript) on port 8081
- **Primary Database**: MongoDB (Motor async driver)
- **ERP Source**: SQL Server via pyodbc (READ-ONLY)

## Architecture Rules

### Database Access
- MongoDB is the PRIMARY store for all application state
- SQL Server is READ-ONLY - used only for ERP data lookups
- Never write to SQL Server
- Always use parameterized queries with `?` placeholders

### Authentication
- JWT-based authentication on all `/api/*` routes
- Use `Depends(get_current_user)` for protected endpoints
- Tokens: `JWT_SECRET` and `JWT_REFRESH_SECRET` from env

### API Design
- All routes under `/api` prefix
- Error shape: `{"detail": ..., "error_code": ..., "timestamp": ...}`
- CORS configured via `CORS_ALLOW_ORIGINS` env var

## Key Files

```
backend/
├── server.py           # Main FastAPI application
├── config.py           # Environment configuration
├── db_mapping_config.py # SQL table mappings
├── api_mapping.py      # Mapping discovery endpoints
└── tests/              # pytest tests

frontend/
├── app/                # Expo Router pages
├── components/         # Reusable React components
├── services/           # API client layer (Axios)
├── stores/             # Zustand state stores
└── types/              # TypeScript type definitions
```

## Commands

```bash
# Backend
cd backend && uvicorn backend.server:app --host 0.0.0.0 --port 8001 --reload

# Frontend
cd frontend && npm start

# Tests
make test          # All tests
make lint          # Lint check
make ci            # Full CI pipeline
```

## Constraints

1. Make minimal, focused changes
2. Run tests before and after changes
3. Follow existing patterns - don't introduce new frameworks
4. Keep SQL Server read-only
5. Use JWT for all protected routes
