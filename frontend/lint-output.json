env: load .env
env: export EXPO_PUBLIC_BACKEND_URL
[{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/+not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/_layout.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'loadSettings' and 'loadStoredAuth'. Either include them or remove the dependency array.","line":216,"column":6,"nodeType":"ArrayExpression","endLine":216,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadSettings, loadStoredAuth]","fix":{"range":[8173,8175],"text":"[loadSettings, loadStoredAuth]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/_layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/control-panel-v2.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/control-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/dashboard-web.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/logs.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'hasRole', 'loadLogs', and 'router'. Either include them or remove the dependency array.","line":40,"column":6,"nodeType":"ArrayExpression","endLine":40,"endColumn":28,"suggestions":[{"desc":"Update the dependencies array to be: [service, filterLevel, hasRole, loadLogs, router]","fix":{"range":[1332,1354],"text":"[service, filterLevel, hasRole, loadLogs, router]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/metrics.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'hasRole' and 'router'. Either include them or remove the dependency array.","line":55,"column":6,"nodeType":"ArrayExpression","endLine":55,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [hasRole, router]","fix":{"range":[1709,1711],"text":"[hasRole, router]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/permissions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/reports.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/security.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'hasRole' and 'router'. Either include them or remove the dependency array.","line":61,"column":6,"nodeType":"ArrayExpression","endLine":61,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [hasRole, router]","fix":{"range":[2022,2024],"text":"[hasRole, router]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/settings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/admin/sql-config.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/debug.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/help.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/index.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":12,"column":20,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":12,"endColumn":51,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/register.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/staff/_layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/staff/appearance.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/staff/history.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'loadCountLines' and 'showApprovedOnly'. Either include them or remove the dependency array.","line":96,"column":6,"nodeType":"ArrayExpression","endLine":96,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [loadCountLines, params.approved, showApprovedOnly]","fix":{"range":[3480,3497],"text":"[loadCountLines, params.approved, showApprovedOnly]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/staff/home.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Dimensions' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'logout' is assigned a value but never used.","line":57,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":57,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'sessions' logical expression could make the dependencies of useMemo Hook (at line 131) change on every render. To fix this, wrap the initialization of 'sessions' in its own useMemo() Hook.","line":79,"column":9,"nodeType":"VariableDeclarator","endLine":79,"endColumn":45},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'sessions' logical expression could make the dependencies of useMemo Hook (at line 144) change on every render. To fix this, wrap the initialization of 'sessions' in its own useMemo() Hook.","line":79,"column":9,"nodeType":"VariableDeclarator","endLine":79,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  Alert,\n  StyleSheet,\n  ActivityIndicator,\n  Platform,\n  KeyboardAvoidingView,\n  ScrollView,\n  RefreshControl,\n  Dimensions,\n  Modal,\n  TextInput,\n} from \"react-native\";\nimport { useRouter } from \"expo-router\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport * as Haptics from \"expo-haptics\";\nimport Animated, { FadeInUp } from \"react-native-reanimated\";\n\nimport { useAuthStore } from \"../../src/store/authStore\";\nimport { useScanSessionStore } from \"../../src/store/scanSessionStore\";\nimport { createSession } from \"../../src/services/api/api\";\nimport { useSessionsQuery } from \"../../src/hooks/useSessionsQuery\";\nimport { SESSION_PAGE_SIZE } from \"../../src/constants/config\";\nimport { PremiumInput } from \"../../src/components/premium/PremiumInput\";\nimport { PremiumButton } from \"../../src/components/premium/PremiumButton\";\nimport { SessionType } from \"../../src/types\";\n\nimport { StatusBar } from \"expo-status-bar\";\nimport { auroraTheme } from \"../../src/theme/auroraTheme\";\nimport { useThemeContext } from \"../../src/theme/ThemeContext\";\nimport {\n  GlassCard,\n  FloatingScanButton,\n  ScreenHeader,\n  PatternBackground,\n} from \"../../src/components/ui\";\n\n// Location configuration\ntype LocationType = \"showroom\" | \"godown\";\n\nconst LOCATION_OPTIONS: Record<LocationType, { label: string; floors: string[] }> = {\n  showroom: {\n    label: \"Showroom\",\n    floors: [\"Ground Floor\", \"First Floor\", \"Third Floor\"],\n  },\n  godown: {\n    label: \"Godown\",\n    floors: [\"Top Godown\", \"Back Godown\", \"Damage Area\"],\n  },\n};\n\nexport default function StaffHome() {\n  const router = useRouter();\n  const { user, logout } = useAuthStore();\n  const { theme, pattern, isDark } = useThemeContext();\n\n  // State\n  const [locationType, setLocationType] = useState<LocationType | null>(null);\n  const [selectedFloor, setSelectedFloor] = useState<string | null>(null);\n  const [rackName, setRackName] = useState(\"\");\n  const [sessionType] = useState<SessionType>(\"STANDARD\");\n  const [currentPage] = useState(1);\n  const [isCreatingSession, setIsCreatingSession] = useState(false);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [showFloorPicker, setShowFloorPicker] = useState(false);\n\n  // Queries\n  const {\n    data: sessionsData,\n    isLoading: isLoadingSessions,\n    refetch,\n  } = useSessionsQuery({\n    page: currentPage,\n    pageSize: SESSION_PAGE_SIZE,\n  });\n  const sessions = sessionsData?.items || [];\n\n  // Effects\n  useEffect(() => {\n    if (sessionsData && !isLoadingSessions) {\n      setLastSyncTime(new Date());\n    }\n  }, [sessionsData, isLoadingSessions]);\n\n  // Handlers\n  const handleRefresh = async () => {\n    if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    setIsRefreshing(true);\n    try {\n      await refetch();\n      setLastSyncTime(new Date());\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n\n  const { setActiveSession } = useScanSessionStore();\n\n  // State for search\n  const [finishedSearchQuery, setFinishedSearchQuery] = useState(\"\");\n  const [showNewSectionForm, setShowNewSectionForm] = useState(false);\n  const [showFinishedSearch, setShowFinishedSearch] = useState(false);\n\n  // Helper function for relative time\n  const getRelativeTime = (date: Date | string): string => {\n    const now = new Date();\n    const then = new Date(date);\n    const diffMs = now.getTime() - then.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMins / 60);\n    const diffDays = Math.floor(diffHours / 24);\n\n    if (diffMins < 1) return \"Just now\";\n    if (diffMins < 60) return `${diffMins} min${diffMins > 1 ? 's' : ''} ago`;\n    if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;\n    if (diffDays === 1) return \"Yesterday\";\n    if (diffDays < 7) return `${diffDays} days ago`;\n    return then.toLocaleDateString();\n  };\n\n  // Separate active (unfinished) and closed (finished) sections\n  const activeSectionsList = useMemo(() => {\n    const filtered = sessions.filter((s: any) =>\n      s.status === \"active\" || s.status === \"OPEN\"\n    );\n    console.log(\"ðŸ“‹ Sessions:\", sessions.length, \"Active:\", filtered.length);\n    return filtered;\n  }, [sessions]);\n\n  const finishedSections = useMemo(() => {\n    const filtered = sessions.filter((s: any) =>\n      s.status === \"closed\" || s.status === \"CLOSED\" || s.status === \"completed\"\n    );\n    // Apply search filter\n    if (finishedSearchQuery.trim()) {\n      return filtered.filter((s: any) =>\n        s.warehouse?.toLowerCase().includes(finishedSearchQuery.toLowerCase())\n      );\n    }\n    return filtered;\n  }, [sessions, finishedSearchQuery]);\n\n  const handleStartNewSection = async () => {\n    // Validate inputs\n    if (!locationType) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\n      Alert.alert(\"Select Location\", \"Please select Showroom or Godown\");\n      return;\n    }\n\n    if (!selectedFloor) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\n      Alert.alert(\"Select Floor\", \"Please select a floor/area\");\n      return;\n    }\n\n    if (!rackName.trim()) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\n      Alert.alert(\"Enter Rack\", \"Please enter the rack/shelf identifier\");\n      return;\n    }\n\n    // Validate rack name length and format\n    const trimmedRack = rackName.trim();\n    if (trimmedRack.length < 1 || trimmedRack.length > 20) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\n      Alert.alert(\"Invalid Rack Name\", \"Rack name must be between 1-20 characters\");\n      return;\n    }\n\n    // Check for invalid characters (only allow alphanumeric, dash, underscore)\n    if (!/^[a-zA-Z0-9\\-_]+$/.test(trimmedRack)) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\n      Alert.alert(\"Invalid Rack Name\", \"Rack name can only contain letters, numbers, dashes, and underscores\");\n      return;\n    }\n\n    // Build warehouse name: \"Showroom - Ground Floor - A1\"\n    const locationLabel = LOCATION_OPTIONS[locationType].label;\n    const warehouseName = `${locationLabel} - ${selectedFloor} - ${trimmedRack.toUpperCase()}`;\n\n    try {\n      if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\n      setIsCreatingSession(true);\n      const session = await createSession({\n        warehouse: warehouseName,\n        type: sessionType,\n      });\n\n      // Reset form\n      setLocationType(null);\n      setSelectedFloor(null);\n      setRackName(\"\");\n\n      // Sync with store\n      setActiveSession(session.id, sessionType);\n\n      await refetch();\n      router.push({\n        pathname: \"/staff/scan\",\n        params: { sessionId: session.id }\n      } as any);\n    } catch (error) {\n      console.error(\"Create section error:\", error);\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      Alert.alert(\"Error\", \"Failed to start new section\");\n    } finally {\n      setIsCreatingSession(false);\n    }\n  };\n\n  const handleResumeSection = (sessionId: string, type: SessionType = \"STANDARD\") => {\n    if (Platform.OS !== \"web\") Haptics.selectionAsync();\n    // Sync with store\n    setActiveSession(sessionId, type);\n\n    router.push({\n      pathname: \"/staff/scan\",\n      params: { sessionId }\n    } as any);\n  };\n\n  const handleLocationTypeChange = (type: LocationType) => {\n    if (Platform.OS !== \"web\") Haptics.selectionAsync();\n    setLocationType(type);\n    setSelectedFloor(null); // Reset floor when location type changes\n  };\n\n  // Render Helpers\n\n\n  return (\n    <View style={[styles.container, { backgroundColor: theme.colors.background }]}>\n      <StatusBar style={isDark ? \"light\" : \"dark\"} />\n      <PatternBackground\n        pattern={pattern}\n        color={theme.colors.accent}\n        secondaryColor={theme.colors.accentLight}\n        opacity={0.04}\n      />\n\n      <ScreenHeader\n        title=\"Stock Verify\"\n        subtitle={`Welcome, ${user?.username || \"Staff\"}`}\n        showUsername={true}\n        showLogoutButton={true}\n        rightAction={{\n          icon: \"color-palette-outline\",\n          onPress: () => router.push(\"/staff/appearance\" as any),\n        }}\n      />\n\n      <KeyboardAvoidingView\n        behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n        style={{ flex: 1 }}\n      >\n        <ScrollView\n          contentContainerStyle={styles.content}\n          refreshControl={\n            <RefreshControl\n              refreshing={isRefreshing}\n              onRefresh={handleRefresh}\n              tintColor={theme.colors.accent}\n              colors={[theme.colors.accent]}\n            />\n          }\n          showsVerticalScrollIndicator={false}\n        >\n          {/* SECTION 1: Select Section */}\n          <View style={styles.section}>\n            <View style={styles.sectionHeaderRow}>\n              <View style={styles.sectionHeader}>\n                <Ionicons name=\"layers\" size={22} color={theme.colors.accent} />\n                <Text style={[styles.sectionTitle, { color: theme.colors.text }]}>Select Section</Text>\n              </View>\n              <TouchableOpacity\n                style={[styles.addButtonSmall, { backgroundColor: theme.colors.accent }]}\n                onPress={() => setShowNewSectionForm(true)}\n                activeOpacity={0.7}\n              >\n                <Ionicons name=\"add\" size={20} color=\"#FFF\" />\n              </TouchableOpacity>\n            </View>\n            <Text style={[styles.sectionSubtitle, { color: theme.colors.textSecondary }]}>\n              Tap a section to continue scanning\n            </Text>\n            {isLoadingSessions ? (\n              <ActivityIndicator color={theme.colors.accent} style={{ marginTop: 20 }} />\n            ) : activeSectionsList.length > 0 ? (\n              <View style={styles.listContainer}>\n                {activeSectionsList.map((session: any, index: number) => (\n                  <Animated.View key={session.id || session.session_id} entering={FadeInUp.delay(100 + index * 80)}>\n                    <TouchableOpacity\n                      style={[styles.activeSessionCard, { backgroundColor: `${theme.colors.accent}10`, borderColor: theme.colors.accent }]}\n                      onPress={() => handleResumeSection(session.session_id || session.id, session.type)}\n                      activeOpacity={0.7}\n                    >\n                      <View style={styles.sessionCardContent}>\n                        <View style={[styles.sessionIcon, { backgroundColor: `${theme.colors.accent}20` }]}>\n                          <Ionicons name=\"layers\" size={24} color={theme.colors.accent} />\n                        </View>\n                        <View style={styles.sessionInfo}>\n                          <Text style={[styles.sessionName, { color: theme.colors.text }]} numberOfLines={1}>\n                            {session.warehouse}\n                          </Text>\n                          <Text style={[styles.sessionMeta, { color: theme.colors.textSecondary }]}>\n                            {session.item_count || session.total_items || 0} items â€¢ {new Date(session.created_at || session.started_at).toLocaleDateString()}\n                          </Text>\n                        </View>\n                        <View style={[styles.resumeButton, { backgroundColor: theme.colors.accent }]}>\n                          <Ionicons name=\"arrow-forward\" size={18} color=\"#FFF\" />\n                        </View>\n                      </View>\n                    </TouchableOpacity>\n                  </Animated.View>\n                ))}\n              </View>\n            ) : (\n              <GlassCard variant=\"light\" intensity={10} style={styles.emptyState}>\n                <Ionicons name=\"checkmark-circle-outline\" size={40} color={theme.colors.success || theme.colors.accent} />\n                <Text style={[styles.emptyTitle, { color: theme.colors.text }]}>All Caught Up!</Text>\n                <Text style={[styles.emptyText, { color: theme.colors.textSecondary }]}>No active sections. Start a new one below.</Text>\n              </GlassCard>\n            )}\n          </View>\n\n          {/* SECTION 2: Finished Sections with Search Toggle */}\n          <View style={styles.section}>\n            <View style={styles.sectionHeaderRow}>\n              <View style={styles.sectionHeader}>\n                <Ionicons name=\"checkmark-done-circle\" size={22} color={theme.colors.success || \"#22C55E\"} />\n                <Text style={[styles.sectionTitle, { color: theme.colors.text }]}>Finished Sections</Text>\n              </View>\n              <TouchableOpacity\n                style={[styles.searchToggleButton, { backgroundColor: showFinishedSearch ? theme.colors.accent : (isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.05)') }]}\n                onPress={() => {\n                  setShowFinishedSearch(!showFinishedSearch);\n                  if (showFinishedSearch) setFinishedSearchQuery(\"\");\n                }}\n                activeOpacity={0.7}\n              >\n                <Ionicons name=\"search\" size={18} color={showFinishedSearch ? \"#FFF\" : theme.colors.textSecondary} />\n              </TouchableOpacity>\n            </View>\n\n            {/* Search Bar - Only visible when enabled */}\n            {showFinishedSearch && (\n              <View style={[styles.searchContainer, { backgroundColor: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.03)', borderColor: theme.colors.border }]}>\n                <Ionicons name=\"search\" size={18} color={theme.colors.textSecondary} />\n                <TextInput\n                  style={[styles.searchInput, { color: theme.colors.text }]}\n                  placeholder=\"Search finished sections...\"\n                  placeholderTextColor={theme.colors.textSecondary}\n                  value={finishedSearchQuery}\n                  onChangeText={setFinishedSearchQuery}\n                  autoFocus\n                />\n                {finishedSearchQuery.length > 0 && (\n                  <TouchableOpacity onPress={() => setFinishedSearchQuery(\"\")}>\n                    <Ionicons name=\"close-circle\" size={18} color={theme.colors.textSecondary} />\n                  </TouchableOpacity>\n                )}\n              </View>\n            )}\n\n            {finishedSections.length > 0 ? (\n              <View style={styles.listContainer}>\n                {finishedSections.slice(0, 3).map((session: any, index: number) => (\n                  <Animated.View key={session.id || session.session_id} entering={FadeInUp.delay(200 + index * 50)}>\n                    <View style={[styles.finishedSessionCard, { backgroundColor: isDark ? 'rgba(255,255,255,0.03)' : 'rgba(0,0,0,0.02)', borderColor: theme.colors.border }]}>\n                      <View style={styles.sessionCardContent}>\n                        <View style={[styles.sessionIcon, { backgroundColor: `${theme.colors.success || \"#22C55E\"}15` }]}>\n                          <Ionicons name=\"checkmark-circle\" size={24} color={theme.colors.success || \"#22C55E\"} />\n                        </View>\n                        <View style={styles.sessionInfo}>\n                          <Text style={[styles.sessionName, { color: theme.colors.text }]} numberOfLines={1}>\n                            {session.warehouse}\n                          </Text>\n                          <Text style={[styles.sessionMeta, { color: theme.colors.textSecondary }]}>\n                            {session.item_count || session.total_items || 0} items â€¢ Last used {getRelativeTime(session.closed_at || session.updated_at || session.created_at)}\n                          </Text>\n                        </View>\n                      </View>\n                    </View>\n                  </Animated.View>\n                ))}\n                {finishedSections.length > 3 && (\n                  <Text style={[styles.moreText, { color: theme.colors.textSecondary }]}>\n                    +{finishedSections.length - 3} more sections\n                  </Text>\n                )}\n              </View>\n            ) : (\n              <View style={styles.emptyStateSmall}>\n                <Text style={[styles.emptyTextSmall, { color: theme.colors.textSecondary }]}>\n                  {finishedSearchQuery ? \"No matching sections found\" : \"No finished sections yet\"}\n                </Text>\n              </View>\n            )}\n          </View>\n\n          {/* Bottom Spacer */}\n          <View style={{ height: 100 }} />\n        </ScrollView>\n      </KeyboardAvoidingView>\n\n      {/* Floating Scan Button */}\n      <View style={styles.fabContainer}>\n        <FloatingScanButton\n          onPress={() => {\n            if (activeSectionsList.length > 0) {\n              const latest = activeSectionsList[0];\n              handleResumeSection(latest.session_id || latest.id, latest.type);\n            } else {\n              setShowNewSectionForm(true);\n              Alert.alert(\"No Active Section\", \"Create a new section to start scanning.\");\n            }\n          }}\n          disabled={activeSectionsList.length === 0}\n        />\n      </View>\n\n      {/* New Section Modal */}\n      <Modal\n        visible={showNewSectionForm}\n        transparent\n        animationType=\"slide\"\n        onRequestClose={() => setShowNewSectionForm(false)}\n      >\n        <TouchableOpacity\n          style={styles.modalOverlay}\n          activeOpacity={1}\n          onPress={() => setShowNewSectionForm(false)}\n        >\n          <View style={[styles.newSectionModalContent, { backgroundColor: theme.colors.surface }]}>\n            <View style={styles.modalHeader}>\n              <Text style={[styles.modalTitle, { color: theme.colors.text }]}>Start a New Section</Text>\n              <TouchableOpacity onPress={() => setShowNewSectionForm(false)}>\n                <Ionicons name=\"close\" size={24} color={theme.colors.text} />\n              </TouchableOpacity>\n            </View>\n\n            <View style={styles.modalBody}>\n              <Text style={[styles.cardSubtitle, { color: theme.colors.textSecondary }]}>\n                Select location and rack to begin stock counting\n              </Text>\n\n              {/* Location Type Selector */}\n              <View style={styles.selectorSection}>\n                <Text style={[styles.label, { color: theme.colors.textSecondary }]}>Location Type</Text>\n                <View style={styles.locationTypeRow}>\n                  <TouchableOpacity\n                    style={[\n                      styles.locationTypeButton,\n                      { borderColor: locationType === \"showroom\" ? theme.colors.accent : theme.colors.border },\n                      locationType === \"showroom\" && { backgroundColor: `${theme.colors.accent}20` }\n                    ]}\n                    onPress={() => handleLocationTypeChange(\"showroom\")}\n                  >\n                    <Ionicons\n                      name=\"storefront\"\n                      size={20}\n                      color={locationType === \"showroom\" ? theme.colors.accent : theme.colors.textSecondary}\n                    />\n                    <Text style={[\n                      styles.locationTypeText,\n                      { color: locationType === \"showroom\" ? theme.colors.accent : theme.colors.text }\n                    ]}>Showroom</Text>\n                  </TouchableOpacity>\n\n                  <TouchableOpacity\n                    style={[\n                      styles.locationTypeButton,\n                      { borderColor: locationType === \"godown\" ? theme.colors.accent : theme.colors.border },\n                      locationType === \"godown\" && { backgroundColor: `${theme.colors.accent}20` }\n                    ]}\n                    onPress={() => handleLocationTypeChange(\"godown\")}\n                  >\n                    <Ionicons\n                      name=\"cube\"\n                      size={20}\n                      color={locationType === \"godown\" ? theme.colors.accent : theme.colors.textSecondary}\n                    />\n                    <Text style={[\n                      styles.locationTypeText,\n                      { color: locationType === \"godown\" ? theme.colors.accent : theme.colors.text }\n                    ]}>Godown</Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n\n              {/* Floor Selector */}\n              {locationType && (\n                <View style={styles.selectorSection}>\n                  <Text style={[styles.label, { color: theme.colors.textSecondary }]}>\n                    {locationType === \"showroom\" ? \"Floor\" : \"Area\"}\n                  </Text>\n                  <TouchableOpacity\n                    style={[styles.dropdownButton, { borderColor: theme.colors.border, backgroundColor: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.03)' }]}\n                    onPress={() => setShowFloorPicker(true)}\n                  >\n                    <Text style={[styles.dropdownText, { color: selectedFloor ? theme.colors.text : theme.colors.textSecondary }]}>\n                      {selectedFloor || `Select ${locationType === \"showroom\" ? \"Floor\" : \"Area\"}`}\n                    </Text>\n                    <Ionicons name=\"chevron-down\" size={20} color={theme.colors.textSecondary} />\n                  </TouchableOpacity>\n                </View>\n              )}\n\n              {/* Rack Input */}\n              {selectedFloor && (\n                <View style={styles.selectorSection}>\n                  <PremiumInput\n                    label=\"Rack / Shelf\"\n                    placeholder=\"e.g. A1, B2, R1\"\n                    value={rackName}\n                    onChangeText={setRackName}\n                    autoCapitalize=\"characters\"\n                  />\n                </View>\n              )}\n\n              <PremiumButton\n                title=\"Start Section\"\n                onPress={() => {\n                  handleStartNewSection();\n                  setShowNewSectionForm(false);\n                }}\n                loading={isCreatingSession}\n                variant=\"primary\"\n                icon=\"play-circle-outline\"\n                style={styles.startButton}\n                disabled={!locationType || !selectedFloor || !rackName.trim()}\n              />\n            </View>\n          </View>\n        </TouchableOpacity>\n      </Modal>\n\n      {/* Floor Picker Modal */}\n      <Modal\n        visible={showFloorPicker}\n        transparent\n        animationType=\"slide\"\n        onRequestClose={() => setShowFloorPicker(false)}\n      >\n        <TouchableOpacity\n          style={styles.modalOverlay}\n          activeOpacity={1}\n          onPress={() => setShowFloorPicker(false)}\n        >\n          <View style={[styles.modalContent, { backgroundColor: theme.colors.surface }]}>\n            <View style={styles.modalHeader}>\n              <Text style={[styles.modalTitle, { color: theme.colors.text }]}>\n                Select {locationType === \"showroom\" ? \"Floor\" : \"Area\"}\n              </Text>\n              <TouchableOpacity onPress={() => setShowFloorPicker(false)}>\n                <Ionicons name=\"close\" size={24} color={theme.colors.text} />\n              </TouchableOpacity>\n            </View>\n            {locationType && LOCATION_OPTIONS[locationType].floors.map((floor) => (\n              <TouchableOpacity\n                key={floor}\n                style={[\n                  styles.modalOption,\n                  selectedFloor === floor && { backgroundColor: `${theme.colors.accent}20` }\n                ]}\n                onPress={() => {\n                  if (Platform.OS !== \"web\") Haptics.selectionAsync();\n                  setSelectedFloor(floor);\n                  setShowFloorPicker(false);\n                }}\n              >\n                <Text style={[\n                  styles.modalOptionText,\n                  { color: selectedFloor === floor ? theme.colors.accent : theme.colors.text }\n                ]}>\n                  {floor}\n                </Text>\n                {selectedFloor === floor && (\n                  <Ionicons name=\"checkmark\" size={20} color={theme.colors.accent} />\n                )}\n              </TouchableOpacity>\n            ))}\n          </View>\n        </TouchableOpacity>\n      </Modal>\n\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingHorizontal: auroraTheme.spacing.lg,\n    paddingTop: Platform.OS === \"ios\" ? 60 : 40,\n    paddingBottom: auroraTheme.spacing.md,\n  },\n  welcomeText: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n  },\n  userName: {\n    fontSize: auroraTheme.typography.fontSize.xl,\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n    color: auroraTheme.colors.text.primary,\n  },\n  headerActions: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.sm,\n  },\n  syncBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n    paddingHorizontal: auroraTheme.spacing.sm,\n    paddingVertical: 4,\n    borderRadius: auroraTheme.borderRadius.full,\n    gap: 6,\n  },\n  statusDot: {\n    width: 6,\n    height: 6,\n    borderRadius: 3,\n  },\n  syncText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.secondary,\n  },\n  iconButton: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  content: {\n    padding: auroraTheme.spacing.lg,\n  },\n  statsGrid: {\n    flexDirection: \"row\",\n    gap: auroraTheme.spacing.md,\n    marginBottom: auroraTheme.spacing.xl,\n  },\n  statCard: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    padding: auroraTheme.spacing.md,\n    gap: auroraTheme.spacing.sm,\n  },\n  iconBox: {\n    width: 40,\n    height: 40,\n    borderRadius: 10,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  statValue: {\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n    color: auroraTheme.colors.text.primary,\n  },\n  statLabel: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.secondary,\n  },\n  createCard: {\n    padding: auroraTheme.spacing.lg,\n    marginBottom: auroraTheme.spacing.xl,\n  },\n  cardHeader: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.sm,\n    marginBottom: auroraTheme.spacing.xs,\n  },\n  cardTitle: {\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: auroraTheme.typography.fontWeight.semibold,\n    color: auroraTheme.colors.text.primary,\n  },\n  cardSubtitle: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n    marginBottom: auroraTheme.spacing.lg,\n  },\n  modeSection: {\n    marginBottom: auroraTheme.spacing.lg,\n  },\n  label: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontWeight: auroraTheme.typography.fontWeight.medium,\n    color: auroraTheme.colors.text.secondary,\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  modeSelector: {\n    flexDirection: \"row\",\n    backgroundColor: \"rgba(0, 0, 0, 0.2)\",\n    borderRadius: auroraTheme.borderRadius.lg,\n    padding: 2,\n    marginBottom: auroraTheme.spacing.xs,\n  },\n  modeButton: {\n    flex: 1,\n    paddingVertical: 8,\n    alignItems: \"center\",\n    borderRadius: auroraTheme.borderRadius.md,\n  },\n  modeButtonActive: {\n    backgroundColor: auroraTheme.colors.primary[500],\n  },\n  modeText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    fontWeight: auroraTheme.typography.fontWeight.medium,\n    color: auroraTheme.colors.text.secondary,\n  },\n  modeTextActive: {\n    color: \"#FFF\",\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n  },\n  modeDescription: {\n    fontSize: 11,\n    color: auroraTheme.colors.text.tertiary,\n    fontStyle: \"italic\",\n    textAlign: \"center\",\n    marginTop: 4,\n  },\n  inputRow: {\n    flexDirection: \"row\",\n    gap: auroraTheme.spacing.md,\n    marginBottom: auroraTheme.spacing.lg,\n  },\n  startButton: {\n    marginTop: auroraTheme.spacing.sm,\n  },\n  section: {\n    marginBottom: auroraTheme.spacing.xl,\n  },\n  sectionTitle: {\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: auroraTheme.typography.fontWeight.semibold,\n    color: auroraTheme.colors.text.primary,\n    marginBottom: auroraTheme.spacing.xs,\n  },\n  sectionSubtitle: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n    marginBottom: auroraTheme.spacing.md,\n  },\n  listContainer: {\n    gap: auroraTheme.spacing.md,\n  },\n  emptyState: {\n    alignItems: \"center\",\n    padding: auroraTheme.spacing.xl,\n    gap: auroraTheme.spacing.sm,\n  },\n  emptyTitle: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n    color: auroraTheme.colors.text.primary,\n    marginTop: auroraTheme.spacing.sm,\n  },\n  emptyText: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n    textAlign: \"center\",\n  },\n  fabContainer: {\n    position: \"absolute\",\n    bottom: 32,\n    right: 0,\n    left: 0,\n    alignItems: \"center\",\n  },\n  // New styles for section form\n  selectorSection: {\n    marginBottom: auroraTheme.spacing.md,\n  },\n  locationTypeRow: {\n    flexDirection: \"row\",\n    gap: auroraTheme.spacing.md,\n  },\n  locationTypeButton: {\n    flex: 1,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: auroraTheme.spacing.sm,\n    paddingVertical: auroraTheme.spacing.md,\n    borderRadius: auroraTheme.borderRadius.lg,\n    borderWidth: 2,\n  },\n  locationTypeText: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontWeight: auroraTheme.typography.fontWeight.semibold,\n  },\n  dropdownButton: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: auroraTheme.spacing.md,\n    paddingVertical: auroraTheme.spacing.md,\n    borderRadius: auroraTheme.borderRadius.lg,\n    borderWidth: 1,\n  },\n  dropdownText: {\n    fontSize: auroraTheme.typography.fontSize.md,\n  },\n  // Modal styles\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: \"rgba(0,0,0,0.5)\",\n    justifyContent: \"flex-end\",\n  },\n  modalContent: {\n    borderTopLeftRadius: auroraTheme.borderRadius.xl,\n    borderTopRightRadius: auroraTheme.borderRadius.xl,\n    paddingBottom: 40,\n  },\n  newSectionModalContent: {\n    borderTopLeftRadius: auroraTheme.borderRadius.xl,\n    borderTopRightRadius: auroraTheme.borderRadius.xl,\n    paddingBottom: 40,\n    maxHeight: '80%',\n  },\n  modalBody: {\n    padding: auroraTheme.spacing.lg,\n  },\n  modalHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: auroraTheme.spacing.lg,\n    borderBottomWidth: 1,\n    borderBottomColor: \"rgba(255,255,255,0.1)\",\n  },\n  modalTitle: {\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: auroraTheme.typography.fontWeight.semibold,\n  },\n  modalOption: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: auroraTheme.spacing.lg,\n    paddingVertical: auroraTheme.spacing.md,\n  },\n  modalOptionText: {\n    fontSize: auroraTheme.typography.fontSize.md,\n  },\n  // New styles for reorganized UI\n  sectionHeaderRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    marginBottom: auroraTheme.spacing.xs,\n  },\n  sectionHeader: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.sm,\n  },\n  addButtonSmall: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  searchToggleButton: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  activeSessionCard: {\n    borderRadius: auroraTheme.borderRadius.lg,\n    borderWidth: 2,\n    padding: auroraTheme.spacing.md,\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  finishedSessionCard: {\n    borderRadius: auroraTheme.borderRadius.lg,\n    borderWidth: 1,\n    padding: auroraTheme.spacing.md,\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  sessionCardContent: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.md,\n  },\n  sessionIcon: {\n    width: 48,\n    height: 48,\n    borderRadius: auroraTheme.borderRadius.md,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  sessionInfo: {\n    flex: 1,\n  },\n  sessionName: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    fontWeight: auroraTheme.typography.fontWeight.semibold,\n    marginBottom: 2,\n  },\n  sessionMeta: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n  },\n  resumeButton: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  searchContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.sm,\n    paddingHorizontal: auroraTheme.spacing.md,\n    paddingVertical: auroraTheme.spacing.sm,\n    borderRadius: auroraTheme.borderRadius.lg,\n    borderWidth: 1,\n    marginBottom: auroraTheme.spacing.md,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: auroraTheme.typography.fontSize.md,\n    paddingVertical: 4,\n  },\n  emptyStateSmall: {\n    paddingVertical: auroraTheme.spacing.lg,\n    alignItems: \"center\",\n  },\n  emptyTextSmall: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontStyle: \"italic\",\n  },\n  moreText: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    textAlign: \"center\",\n    marginTop: auroraTheme.spacing.sm,\n    fontStyle: \"italic\",\n  },\n  newSectionHeader: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: auroraTheme.spacing.lg,\n    paddingVertical: auroraTheme.spacing.md,\n    borderRadius: auroraTheme.borderRadius.lg,\n    borderWidth: 2,\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  newSectionHeaderContent: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.sm,\n  },\n  newSectionHeaderText: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    fontWeight: auroraTheme.typography.fontWeight.semibold,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/staff/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/staff/item-detail.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnalyticsService' is defined but never used.","line":42,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RecentRacksService' is defined but never used.","line":44,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getDefaultMrpForItem' is defined but never used.","line":46,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getNormalizedMrpVariants' is defined but never used.","line":47,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'usePhotoState' is defined but never used.","line":50,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'damageType' is assigned a value but never used.","line":86,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":86,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setDamageType' is assigned a value but never used.","line":86,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":86,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setRemark' is assigned a value but never used.","line":94,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'resetItemState' is assigned a value but never used.","line":108,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":108,"endColumn":25},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'sessionId'. Either include it or remove the dependency array.","line":165,"column":6,"nodeType":"ArrayExpression","endLine":165,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [barcode, router, sessionId]","fix":{"range":[5976,5993],"text":"[barcode, router, sessionId]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'item'. Either include it or remove the dependency array.","line":224,"column":6,"nodeType":"ArrayExpression","endLine":224,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [item, mrpEditable]","fix":{"range":[8110,8140],"text":"[item, mrpEditable]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  Alert,\n  Switch,\n  Platform,\n  TextInput,\n  TouchableOpacity,\n  KeyboardAvoidingView,\n} from \"react-native\";\nimport { useLocalSearchParams, useRouter } from \"expo-router\";\nimport { StatusBar } from \"expo-status-bar\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport * as Haptics from \"expo-haptics\";\nimport { LoadingSpinner, ScreenHeader, AuroraBackground } from \"@/components/ui\";\nimport { auroraTheme } from \"@/theme/auroraTheme\";\n\nimport { useScanSessionStore } from \"@/store/scanSessionStore\";\nimport {\n  modernColors,\n  modernSpacing,\n  modernTypography,\n  modernBorderRadius,\n} from \"@/styles/modernDesignSystem\";\nimport { PremiumButton } from \"@/components/premium/PremiumButton\";\nimport { PremiumInput } from \"@/components/premium/PremiumInput\";\nimport { PremiumCard } from \"@/components/premium/PremiumCard\";\nimport { PhotoCaptureModal } from \"@/components/modals/PhotoCaptureModal\";\n\nimport {\n  getItemByBarcode,\n  refreshItemStock,\n  createCountLine,\n  addQuantityToCountLine,\n  checkItemCounted,\n} from \"@/services/api/api\";\nimport { handleErrorWithRecovery } from \"@/services/errorRecovery\";\nimport { CreateCountLinePayload, CountLineBatch } from \"@/types/scan\";\nimport { AnalyticsService } from \"@/services/enhancedFeatures\";\nimport { scanDeduplicationService } from \"@/services/scanDeduplicationService\";\nimport { RecentRacksService } from \"@/services/recentRacksService\";\nimport {\n  getDefaultMrpForItem,\n  getNormalizedMrpVariants,\n  normalizeSerialValue,\n} from \"@/utils/scanUtils\";\nimport { useItemState, usePhotoState } from \"@/hooks/scan\";\n\nconst CONDITION_OPTIONS = [\"No Issue\", \"Aging\", \"Damage\", \"Faded\", \"Scratch\", \"Other\"];\n\nexport default function ItemDetailScreen() {\n  const router = useRouter();\n  const params = useLocalSearchParams<{ barcode: string; sessionId: string }>();\n  const { barcode, sessionId } = params;\n  const { sessionType } = useScanSessionStore();\n\n  // Local State\n  const [loading, setLoading] = useState(false);\n  const [refreshingStock, setRefreshingStock] = useState(false);\n  const [item, setItem] = useState<any>(null);\n  const [quantity, setQuantity] = useState(\"\");\n  const [mrp, setMrp] = useState(\"\");\n  const [mrpEditable, setMrpEditable] = useState(false);\n  const [category, setCategory] = useState(\"\");\n  const [subCategory, setSubCategory] = useState(\"\");\n  const [categoryEditable, setCategoryEditable] = useState(false);\n\n  // Refs\n  const quantityInputRef = useRef<TextInput>(null);\n\n  // Auto-refresh timer ref\n  const refreshIntervalRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const refreshErrorCountRef = useRef<number>(0);\n  const MAX_REFRESH_ERRORS = 3; // Stop auto-refresh after 3 consecutive errors\n  const AUTO_REFRESH_INTERVAL = 60000; // 60 seconds (reduced frequency)\n\n  // Enhanced Features\n  const [serialNumbers, setSerialNumbers] = useState<string[]>([]);\n  const [isSerialEnabled, setIsSerialEnabled] = useState(false);\n\n  const [isDamageEnabled, setIsDamageEnabled] = useState(false);\n  const [damageQty, setDamageQty] = useState(\"\");\n  const [damageType, setDamageType] = useState<\"returned\" | \"returnable\" | \"nonreturnable\">(\n    \"returnable\",\n  );\n  const [damageRemark, setDamageRemark] = useState(\"\");\n  const [condition, setCondition] = useState(\"No Issue\");\n  const [conditionDetails, setConditionDetails] = useState(\"\");\n\n  const [mfgDate, setMfgDate] = useState(\"\");\n  const [remark, setRemark] = useState(\"\");\n\n  // Batch Mode State\n  const [isBatchMode, setIsBatchMode] = useState(false);\n  const [batches, setBatches] = useState<CountLineBatch[]>([]);\n  const [currentBatchQty, setCurrentBatchQty] = useState(\"\");\n  const [currentBatchMrp, setCurrentBatchMrp] = useState(\"\");\n  const [currentBatchMfgDate, setCurrentBatchMfgDate] = useState(\"\");\n  const [currentBatchCondition, setCurrentBatchCondition] = useState(\"No Issue\");\n\n  // Photos\n  const [showPhotoModal, setShowPhotoModal] = useState(false);\n  const [itemPhoto, setItemPhoto] = useState<any>(null);\n\n  const { resetItemState } = useItemState();\n\n  // Load Item Details\n  useEffect(() => {\n    const loadItem = async () => {\n      console.log(\"Loading Item Detail:\", { barcode, sessionId });\n      if (!barcode) {\n        console.error(\"No barcode provided to ItemDetailScreen\");\n        return;\n      }\n      setLoading(true);\n      try {\n        console.log(\"Fetching item from API:\", barcode);\n        const itemData = await getItemByBarcode(barcode as string);\n        if (itemData) {\n          console.log(\"Item data received:\", itemData);\n          setItem(itemData);\n          setMrp(\n            itemData.mrp\n              ? String(itemData.mrp)\n              : \"\",\n          );\n          setCategory(itemData.category || \"\");\n          setSubCategory(itemData.subcategory || \"\");\n\n          // Auto-detect batches\n          if (itemData.batches && itemData.batches.length > 0) {\n            setIsBatchMode(true);\n            const mappedBatches: CountLineBatch[] = itemData.batches.map((b: any) => ({\n              quantity: b.stock_qty || 0,\n              mrp: b.mrp,\n              manufacturing_date: b.manufacturing_date,\n              item_condition: \"No Issue\",\n              condition_details: \"\",\n              barcode: b.barcode,\n              batch_no: b.batch_no,\n            }));\n            setBatches(mappedBatches);\n          }\n        } else {\n          console.error(\"Item not found in API response\");\n          Alert.alert(\"Error\", \"Item not found\");\n          router.back();\n        }\n      } catch (error: any) {\n        console.error(\"Error fetching item:\", error);\n        Alert.alert(\"Error\", error.message || \"Failed to load item\");\n        router.back();\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (barcode) {\n      loadItem();\n    } else {\n      console.log(\"Effect triggered but no barcode yet\");\n    }\n  }, [barcode, router]);\n\n  // Auto-focus quantity input when item loads\n  useEffect(() => {\n    if (!item || loading) return;\n\n    // Small delay to ensure layout is ready and transition is complete\n    const timer = setTimeout(() => {\n      quantityInputRef.current?.focus();\n    }, 500);\n    return () => clearTimeout(timer);\n  }, [item, loading]);\n\n  const handleRefreshStock = useCallback(async (silent: boolean = false) => {\n    // Guard against undefined item_code to prevent crashes\n    if (!item || !item.item_code) {\n      if (!silent) {\n        console.warn(\"handleRefreshStock called without valid item_code\");\n      }\n      return;\n    }\n\n    // Skip if too many consecutive errors (for silent/auto-refresh only)\n    if (silent && refreshErrorCountRef.current >= MAX_REFRESH_ERRORS) {\n      console.log(\"Skipping auto-refresh: too many consecutive errors\");\n      return;\n    }\n\n    setRefreshingStock(true);\n    try {\n      const result = await refreshItemStock(item.item_code);\n      if (result.success && result.item) {\n        setItem(result.item);\n        // Update MRP if it changed and not currently being edited\n        if (!mrpEditable && result.item.mrp) {\n          setMrp(String(result.item.mrp));\n        }\n        refreshErrorCountRef.current = 0; // Reset error count on success\n        if (!silent && Platform.OS !== \"web\") {\n          Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n        }\n        if (!silent) {\n          Alert.alert(\"Success\", result.message || \"Stock refreshed successfully\");\n        }\n      } else if (!silent) {\n        // Handle non-success response explicitly\n        Alert.alert(\"Refresh Issue\", result.message || \"Could not refresh stock data\");\n      }\n    } catch (error: any) {\n      refreshErrorCountRef.current++;\n      const errorMessage = error?.message || \"Failed to refresh stock\";\n      if (!silent) {\n        Alert.alert(\"Error\", errorMessage);\n      } else {\n        console.log(`Silent refresh failed (${refreshErrorCountRef.current}/${MAX_REFRESH_ERRORS}): ${errorMessage}`);\n      }\n    } finally {\n      setRefreshingStock(false);\n    }\n  }, [item?.item_code, mrpEditable]);\n\n  // Helper for UOM Display\n  const getUomDisplay = () => {\n    if (!item) return \"N/A\";\n    if (item.uom_code && item.uom_name && item.uom_code !== item.uom_name) {\n      return `${item.uom_name} (${item.uom_code})`;\n    }\n    return item.uom_code || item.uom_name || item.uom || \"N/A\";\n  };\n\n  // Helper for Price Formatting\n  const formatPrice = (price: any) => {\n    const num = Number(price);\n    return isNaN(num) ? \"0.00\" : num.toFixed(2);\n  };\n\n  // Auto-refresh stock every 30 seconds\n  useEffect(() => {\n    if (!item?.item_code || sessionType === \"BLIND\") {\n      return;\n    }\n\n    // Initial silent refresh\n    handleRefreshStock(true);\n\n    // Set up interval for auto-refresh\n    refreshIntervalRef.current = setInterval(() => {\n      handleRefreshStock(true);\n    }, AUTO_REFRESH_INTERVAL);\n\n    return () => {\n      if (refreshIntervalRef.current) {\n        clearInterval(refreshIntervalRef.current);\n        refreshIntervalRef.current = null;\n      }\n    };\n  }, [item?.item_code, sessionType, handleRefreshStock]);\n\n  // Adjust serial number inputs when quantity changes\n  useEffect(() => {\n    if (isSerialEnabled) {\n      const qty = parseInt(quantity) || 0;\n      setSerialNumbers((prev) => {\n        if (prev.length === qty) return prev;\n        if (prev.length < qty) {\n          return [...prev, ...Array(qty - prev.length).fill(\"\")];\n        }\n        return prev.slice(0, qty);\n      });\n    }\n  }, [quantity, isSerialEnabled]);\n\n  const handleSerialChange = (text: string, index: number) => {\n    const newSerials = [...serialNumbers];\n    newSerials[index] = text;\n    setSerialNumbers(newSerials);\n  };\n\n  const validateForm = () => {\n    if (isBatchMode) {\n      if (batches.length === 0) {\n        Alert.alert(\"Error\", \"Please add at least one batch\");\n        return false;\n      }\n      return true;\n    }\n\n    if (!quantity || isNaN(Number(quantity)) || Number(quantity) <= 0) {\n      Alert.alert(\"Invalid Quantity\", \"Please enter a valid positive quantity\");\n      return false;\n    }\n\n    if (isSerialEnabled) {\n      const validSerials = serialNumbers.filter((s) => s.trim().length > 0);\n      if (validSerials.length !== Number(quantity)) {\n        Alert.alert(\"Missing Serials\", `Please enter all ${quantity} serial numbers.`);\n        return false;\n      }\n    }\n\n    if (isDamageEnabled) {\n      const dQty = Number(damageQty);\n      if (isNaN(dQty) || dQty < 0 || dQty > Number(quantity)) {\n        Alert.alert(\"Invalid Damage Qty\", \"Damage quantity cannot exceed total quantity.\");\n        return false;\n      }\n    }\n\n    if (sessionType === \"STRICT\" && item) {\n      const currentStock = Number(item.current_stock || 0);\n      const enteredQty = Number(quantity);\n      if (enteredQty !== currentStock) {\n        // In strict mode, we might want to prevent submission or just require confirmation\n        // For now, let's just warn but allow if they confirm (which handleSubmit will effectively do via normal flow,\n        // but let's add specific alert here if we wanted to BLOCK.\n        // Requirement said \"warning/alert appears\", doesn't say \"block\".\n        // Let's rely on a specific confirmation alert in handleSubmit for Strict mode variance.\n      }\n    }\n\n    return true;\n  };\n\n  const handleAddBatch = () => {\n    if (!currentBatchQty) {\n      Alert.alert(\"Error\", \"Please enter quantity\");\n      return;\n    }\n    const newBatch: CountLineBatch = {\n      quantity: parseFloat(currentBatchQty),\n      mrp: currentBatchMrp ? parseFloat(currentBatchMrp) : undefined,\n      manufacturing_date: currentBatchMfgDate || undefined,\n      item_condition: currentBatchCondition,\n      condition_details: conditionDetails || undefined,\n    };\n    setBatches([...batches, newBatch]);\n    // Reset current batch inputs\n    setCurrentBatchQty(\"\");\n    setCurrentBatchMrp(\"\");\n    setCurrentBatchMfgDate(\"\");\n    setCurrentBatchCondition(\"No Issue\");\n    setConditionDetails(\"\");\n  };\n\n  const handleRemoveBatch = (index: number) => {\n    const newBatches = [...batches];\n    newBatches.splice(index, 1);\n    setBatches(newBatches);\n  };\n\n  const handleSubmit = async () => {\n    if (!validateForm()) return;\n    if (!item || !sessionId) return;\n\n    let finalQty = 0;\n    if (isBatchMode) {\n      finalQty = batches.reduce((sum, b) => sum + b.quantity, 0);\n    } else {\n      finalQty = parseFloat(quantity);\n    }\n\n    // Strict Mode Variance Check\n    if (sessionType === \"STRICT\") {\n      const currentStock = Number(item.current_stock || 0);\n      const enteredQty = finalQty;\n      if (enteredQty !== currentStock) {\n        const confirmed = await new Promise((resolve) => {\n          Alert.alert(\n            \"Strict Mode Warning\",\n            `Counted quantity (${enteredQty}) does not match stock quantity (${currentStock}). Are you sure?`,\n            [\n              { text: \"Cancel\", onPress: () => resolve(false), style: \"cancel\" },\n              { text: \"Confirm Variance\", onPress: () => resolve(true), style: \"destructive\" },\n            ]\n          );\n        });\n        if (!confirmed) return;\n      }\n    }\n\n    // Check for existing count\n    try {\n      const checkResult = await checkItemCounted(sessionId as string, item.item_code);\n      if (checkResult.already_counted && checkResult.count_lines && checkResult.count_lines.length > 0) {\n        const existingLine = checkResult.count_lines[0];\n\n        const userChoice = await new Promise<\"ADD\" | \"CANCEL\" | \"NEW\">((resolve) => {\n          Alert.alert(\n            \"Item Already Counted\",\n            `This item has already been counted (Qty: ${existingLine.counted_qty}). Do you want to add to the existing count?`,\n            [\n              { text: \"Cancel\", onPress: () => resolve(\"CANCEL\"), style: \"cancel\" },\n              { text: \"Add to Existing\", onPress: () => resolve(\"ADD\") },\n              { text: \"Create New Entry\", onPress: () => resolve(\"NEW\") }\n            ]\n          );\n        });\n\n        if (userChoice === \"CANCEL\") return;\n\n        if (userChoice === \"ADD\") {\n          setLoading(true);\n          try {\n            await addQuantityToCountLine(existingLine.line_id, finalQty, isBatchMode ? batches : undefined);\n            Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n            Alert.alert(\"Success\", \"Quantity added successfully\", [\n              { text: \"OK\", onPress: () => router.back() },\n            ]);\n            return;\n          } catch (error: any) {\n            Alert.alert(\"Error\", error.message || \"Failed to add quantity\");\n            setLoading(false);\n            return;\n          }\n        }\n        // If NEW, proceed to createCountLine below\n      }\n    } catch (error) {\n      console.warn(\"Error checking item counted:\", error);\n      // Proceed to create new line if check fails\n    }\n\n    setLoading(true);\n    try {\n      const payload: CreateCountLinePayload = {\n        session_id: sessionId as string,\n        item_code: item.item_code,\n        counted_qty: finalQty,\n        batches: isBatchMode ? batches : undefined,\n        damaged_qty: isDamageEnabled ? Number(damageQty) : 0,\n        item_condition: condition,\n        condition_details: condition === \"Other\" ? conditionDetails : undefined,\n        remark: remark || undefined,\n        photo_base64: itemPhoto?.base64,\n        mrp_counted: mrpEditable && mrp ? Number(mrp) : undefined,\n        category_correction: categoryEditable ? category : undefined,\n        subcategory_correction: categoryEditable ? subCategory : undefined,\n        manufacturing_date: mfgDate || undefined,\n        serial_numbers: isSerialEnabled\n          ? serialNumbers.map((sn, idx) => ({\n            label: `Serial #${idx + 1}`,\n            value: normalizeSerialValue(sn),\n            captured_at: new Date().toISOString(),\n          }))\n          : undefined,\n      };\n\n      await handleErrorWithRecovery(() => createCountLine(payload), {\n        context: \"Save Count\",\n        recovery: { maxRetries: 3 },\n        showAlert: true,\n      });\n\n      Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      Alert.alert(\"Success\", \"Item counted successfully\", [\n        { text: \"OK\", onPress: () => router.back() },\n      ]);\n\n      // Cleanup\n      scanDeduplicationService.recordScan(item.item_code);\n    } catch (error: any) {\n      Alert.alert(\"Error\", error.message || \"Failed to submit count\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <AuroraBackground>\n      <StatusBar style=\"light\" />\n      <ScreenHeader\n        title=\"Item Details\"\n        subtitle={item.item_code || barcode}\n        showBackButton\n      />\n\n      <KeyboardAvoidingView\n        behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n        style={{ flex: 1 }}\n      >\n        <ScrollView contentContainerStyle={styles.content}>\n          {/* Base Info Section */}\n          <PremiumCard variant=\"glass\" style={styles.infoCard}>\n            <View style={styles.itemHeader}>\n              <Text style={styles.itemName}>{item.item_name}</Text>\n              {item.barcode && (\n                <Text style={styles.itemBarcode}>{item.barcode}</Text>\n              )}\n              {(item.category || item.subcategory) && (\n                <Text style={styles.categoryText}>\n                  {item.category}{item.subcategory && ` / ${item.subcategory}`}\n                </Text>\n              )}\n            </View>\n\n            {/* Stock Qty Row with inline Refresh Button */}\n            {sessionType !== \"BLIND\" && (\n              <View style={styles.stockRow}>\n                <View style={styles.stockItem}>\n                  <Text style={styles.stockLabel}>Stock Qty</Text>\n                  <View style={styles.stockValueRow}>\n                    <Text style={styles.stockValue}>\n                      {item.current_stock || item.stock_qty || 0}\n                    </Text>\n                    <Text style={styles.stockUom}>\n                      {getUomDisplay()}\n                    </Text>\n                    <TouchableOpacity\n                      style={[styles.miniRefreshButton, refreshingStock && styles.refreshButtonDisabled]}\n                      onPress={() => handleRefreshStock(false)}\n                      disabled={refreshingStock}\n                    >\n                      {refreshingStock ? (\n                        <LoadingSpinner size={16} color={modernColors.secondary[500]} />\n                      ) : (\n                        <Ionicons name=\"refresh\" size={16} color={modernColors.secondary[500]} />\n                      )}\n                    </TouchableOpacity>\n                  </View>\n                </View>\n              </View>\n            )}\n\n            {/* Sale Price & MRP Row */}\n            <View style={styles.priceRow}>\n              <View style={styles.priceItem}>\n                <Text style={styles.priceLabel} numberOfLines={1} adjustsFontSizeToFit>Sale Price</Text>\n                <Text style={styles.priceValue} numberOfLines={1} adjustsFontSizeToFit>\n                  â‚¹{formatPrice(item.sales_price || item.sale_price || item.standard_rate)}\n                </Text>\n              </View>\n              <View style={styles.priceItem}>\n                <Text style={styles.priceLabel} numberOfLines={1} adjustsFontSizeToFit>MRP</Text>\n                <Text style={styles.priceValue} numberOfLines={1} adjustsFontSizeToFit>\n                  â‚¹{formatPrice(item.mrp)}\n                </Text>\n              </View>\n            </View>\n\n            {sessionType === \"BLIND\" && (\n              <View style={styles.blindModeIndicator}>\n                <Ionicons name=\"eye-off\" size={16} color={modernColors.warning.main} />\n                <Text style={styles.blindModeText}>BLIND MODE</Text>\n              </View>\n            )}\n          </PremiumCard>\n\n          {/* Batch Mode Toggle */}\n          <View style={styles.section}>\n            <View style={styles.toggleRow}>\n              <Text style={styles.sectionTitle}>Batch / Mixed Item Mode</Text>\n              <Switch value={isBatchMode} onValueChange={setIsBatchMode} />\n            </View>\n          </View>\n\n          {/* Batch Entry Section */}\n          {isBatchMode ? (\n            <View style={styles.section}>\n              <Text style={styles.sectionHeader}>Batch Entry</Text>\n\n              {/* List of Added Batches */}\n              {batches.length > 0 && (\n                <View style={styles.batchList}>\n                  {batches.map((batch, index) => (\n                    <View key={index} style={styles.batchItem}>\n                      <View style={styles.batchInfo}>\n                        <Text style={styles.batchQty}>Qty: {batch.quantity}</Text>\n                        <Text style={styles.batchDetail}>\n                          {batch.batch_no ? `Batch: ${batch.batch_no} | ` : ''}MRP: {batch.mrp || '-'} | Mfg: {batch.manufacturing_date || '-'} | {batch.item_condition}\n                        </Text>\n                      </View>\n                      <TouchableOpacity onPress={() => handleRemoveBatch(index)} style={styles.deleteBatchBtn}>\n                        <Ionicons name=\"trash-outline\" size={20} color=\"#FF4444\" />\n                      </TouchableOpacity>\n                    </View>\n                  ))}\n                  <View style={styles.batchTotal}>\n                    <Text style={styles.batchTotalText}>\n                      Total Quantity: {batches.reduce((sum, b) => sum + b.quantity, 0)}\n                    </Text>\n                  </View>\n                </View>\n              )}\n\n              {/* Add New Batch Form */}\n              <View style={styles.addBatchForm}>\n                <PremiumInput\n                  label=\"Batch Quantity\"\n                  value={currentBatchQty}\n                  onChangeText={setCurrentBatchQty}\n                  keyboardType=\"numeric\"\n                  placeholder=\"Qty\"\n                />\n                <View style={styles.row}>\n                  <View style={{ flex: 1, marginRight: 8 }}>\n                    <PremiumInput\n                      label=\"Batch MRP\"\n                      value={currentBatchMrp}\n                      onChangeText={setCurrentBatchMrp}\n                      keyboardType=\"numeric\"\n                      placeholder=\"MRP\"\n                    />\n                  </View>\n                  <View style={{ flex: 1 }}>\n                    <PremiumInput\n                      label=\"Mfg Date (YYYY-MM-DD)\"\n                      value={currentBatchMfgDate}\n                      onChangeText={setCurrentBatchMfgDate}\n                      placeholder=\"YYYY-MM-DD\"\n                    />\n                  </View>\n                </View>\n\n                <Text style={styles.label}>Batch Condition</Text>\n                <ScrollView horizontal showsHorizontalScrollIndicator={false} style={{ marginBottom: 12 }}>\n                  {CONDITION_OPTIONS.map((option) => (\n                    <TouchableOpacity\n                      key={option}\n                      style={[\n                        styles.conditionChip,\n                        currentBatchCondition === option && styles.conditionChipSelected,\n                      ]}\n                      onPress={() => setCurrentBatchCondition(option)}\n                    >\n                      <Text\n                        style={[\n                          styles.conditionText,\n                          currentBatchCondition === option && styles.conditionTextSelected,\n                        ]}\n                      >\n                        {option}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </ScrollView>\n\n                <TouchableOpacity style={styles.addBatchBtn} onPress={handleAddBatch}>\n                  <Text style={styles.addBatchBtnText}>Add Batch</Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          ) : (\n            /* Standard Count Section */\n            <View style={styles.section}>\n              <Text style={styles.sectionHeader}>Count Entry</Text>\n              <PremiumInput\n                label=\"Physical Quantity\"\n                value={quantity}\n                onChangeText={setQuantity}\n                keyboardType=\"numeric\"\n                inputStyle={styles.mainInput}\n                inputRef={quantityInputRef as React.RefObject<TextInput>}\n                required\n                placeholder=\"Enter quantity\"\n              />\n            </View>\n          )}\n\n          {/* Item Condition Section */}\n          <View style={styles.section}>\n            <Text style={styles.sectionHeader}>Item Condition</Text>\n            <ScrollView\n              horizontal\n              showsHorizontalScrollIndicator={false}\n              contentContainerStyle={styles.conditionContainer}\n            >\n              {CONDITION_OPTIONS.map((option) => (\n                <TouchableOpacity\n                  key={option}\n                  style={[\n                    styles.conditionChip,\n                    condition === option && styles.conditionChipSelected,\n                  ]}\n                  onPress={() => setCondition(option)}\n                >\n                  <Text\n                    style={[\n                      styles.conditionText,\n                      condition === option && styles.conditionTextSelected,\n                    ]}\n                  >\n                    {option}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </ScrollView>\n\n            {condition === \"Other\" && (\n              <View style={styles.detailsInputContainer}>\n                <PremiumInput\n                  label=\"Condition Details\"\n                  value={conditionDetails}\n                  onChangeText={setConditionDetails}\n                  placeholder=\"Enter specific condition details\"\n                  required\n                />\n              </View>\n            )}\n          </View>\n\n          {/* Edit Details Section */}\n          <View style={styles.section}>\n            <View style={styles.toggleRow}>\n              <Text style={styles.sectionTitle}>Edit Details</Text>\n              <Switch value={categoryEditable} onValueChange={setCategoryEditable} />\n            </View>\n\n            {categoryEditable && (\n              <>\n                <PremiumInput label=\"Category\" value={category} onChangeText={setCategory} />\n                <PremiumInput\n                  label=\"Sub Category\"\n                  value={subCategory}\n                  onChangeText={setSubCategory}\n                />\n              </>\n            )}\n\n            <View style={styles.toggleRow}>\n              <Text style={styles.label} numberOfLines={1} adjustsFontSizeToFit>MRP: {mrp}</Text>\n              <Switch value={mrpEditable} onValueChange={setMrpEditable} />\n            </View>\n            {mrpEditable && (\n              <PremiumInput\n                label=\"New MRP\"\n                value={mrp}\n                onChangeText={setMrp}\n                keyboardType=\"numeric\"\n              />\n            )}\n          </View>\n\n          {/* Serial Numbers */}\n          <View style={styles.section}>\n            <View style={styles.rowBetween}>\n              <Text style={styles.sectionHeader}>Serial Numbers (Unique)</Text>\n              <Switch value={isSerialEnabled} onValueChange={setIsSerialEnabled} />\n            </View>\n            {isSerialEnabled &&\n              serialNumbers.map((sn, index) => (\n                <PremiumInput\n                  key={index}\n                  label={`Serial #${index + 1}`}\n                  value={sn}\n                  onChangeText={(text) => handleSerialChange(text, index)}\n                  placeholder=\"Scan or enter S/N\"\n                />\n              ))}\n          </View>\n\n          {/* Manufacturing Date */}\n          <View style={styles.section}>\n            <PremiumInput\n              label=\"Manufacturing Date (YYYY-MM-DD)\"\n              value={mfgDate}\n              onChangeText={setMfgDate}\n              placeholder=\"Optional\"\n            />\n          </View>\n\n          {/* Damage & Condition */}\n          <View style={styles.section}>\n            <View style={styles.rowBetween}>\n              <Text style={styles.sectionHeader}>Damage Reporting</Text>\n              <Switch value={isDamageEnabled} onValueChange={setIsDamageEnabled} />\n            </View>\n            {isDamageEnabled && (\n              <View style={styles.damageBox}>\n                <PremiumInput\n                  label=\"Damaged Quantity\"\n                  value={damageQty}\n                  onChangeText={setDamageQty}\n                  keyboardType=\"numeric\"\n                />\n                <PremiumInput\n                  label=\"Remark / Type\"\n                  value={damageRemark}\n                  onChangeText={setDamageRemark}\n                  placeholder=\"Describe damage\"\n                />\n              </View>\n            )}\n          </View>\n\n          <View style={styles.section}>\n            <PremiumButton\n              title={itemPhoto ? \"Photo Added\" : \"Add Item Photo\"}\n              onPress={() => setShowPhotoModal(true)}\n              variant=\"outline\"\n              icon=\"camera\"\n            />\n          </View>\n\n          <PremiumButton\n            title=\"Submit Count\"\n            onPress={handleSubmit}\n            variant=\"primary\"\n            loading={loading}\n            size=\"large\"\n            style={styles.submitButton}\n          />\n        </ScrollView>\n      </KeyboardAvoidingView>\n\n      <PhotoCaptureModal\n        visible={showPhotoModal}\n        onClose={() => setShowPhotoModal(false)}\n        onCapture={(uri) => {\n          setItemPhoto({ uri });\n          setShowPhotoModal(false);\n        }}\n      />\n    </AuroraBackground>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  loadingText: {\n    marginTop: auroraTheme.spacing.md,\n    fontSize: auroraTheme.typography.fontSize.lg,\n    color: auroraTheme.colors.text.secondary,\n  },\n  content: {\n    padding: modernSpacing.lg,\n    paddingBottom: 100,\n  },\n  infoCard: {\n    marginBottom: modernSpacing.xl,\n    padding: modernSpacing.md,\n  },\n  itemHeader: {\n    marginBottom: modernSpacing.md,\n  },\n  itemName: {\n    ...modernTypography.h4,\n    color: modernColors.text.primary,\n    marginBottom: modernSpacing.xs,\n  },\n  itemBarcode: {\n    ...modernTypography.body.medium,\n    color: modernColors.text.secondary,\n    fontFamily: Platform.OS === \"ios\" ? \"Menlo\" : \"monospace\",\n    marginBottom: modernSpacing.xs,\n  },\n  categoryText: {\n    ...modernTypography.body.small,\n    color: modernColors.text.secondary,\n    marginBottom: modernSpacing.sm,\n  },\n  stockRow: {\n    marginBottom: modernSpacing.md,\n  },\n  stockItem: {\n    backgroundColor: \"rgba(255,255,255,0.05)\",\n    borderRadius: modernBorderRadius.md,\n    padding: modernSpacing.md,\n  },\n  stockLabel: {\n    ...modernTypography.label.medium,\n    color: modernColors.text.secondary,\n    marginBottom: modernSpacing.xs,\n  },\n  stockValueRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  stockValue: {\n    ...modernTypography.h2,\n    color: modernColors.secondary[500],\n    marginRight: modernSpacing.sm,\n  },\n  stockUom: {\n    ...modernTypography.label.small,\n    color: modernColors.secondary[700],\n    backgroundColor: modernColors.secondary[50],\n    paddingHorizontal: modernSpacing.sm,\n    paddingVertical: 4,\n    borderRadius: modernBorderRadius.full,\n    marginLeft: modernSpacing.sm,\n    overflow: \"hidden\",\n    fontWeight: \"600\",\n    alignSelf: \"center\",\n    borderWidth: 1,\n    borderColor: modernColors.secondary[200],\n  },\n  miniRefreshButton: {\n    padding: modernSpacing.xs,\n    marginLeft: \"auto\",\n  },\n  refreshButtonDisabled: {\n    opacity: 0.5,\n  },\n  priceRow: {\n    flexDirection: \"row\",\n    gap: modernSpacing.md,\n    marginBottom: modernSpacing.md,\n  },\n  priceItem: {\n    flex: 1,\n    backgroundColor: \"rgba(255,255,255,0.05)\",\n    borderRadius: modernBorderRadius.md,\n    padding: modernSpacing.md,\n    alignItems: \"center\",\n  },\n  priceLabel: {\n    ...modernTypography.label.medium,\n    color: modernColors.text.secondary,\n    marginBottom: modernSpacing.xs,\n  },\n  priceValue: {\n    ...modernTypography.h5,\n    color: modernColors.text.primary,\n  },\n  blindModeIndicator: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"rgba(245, 158, 11, 0.1)\",\n    borderRadius: modernBorderRadius.sm,\n    padding: modernSpacing.sm,\n    marginBottom: modernSpacing.md,\n    gap: modernSpacing.xs,\n  },\n  blindModeText: {\n    ...modernTypography.label.medium,\n    color: modernColors.warning.main,\n    fontWeight: \"600\",\n  },\n  itemCode: {\n    ...modernTypography.body.small,\n    color: modernColors.text.secondary,\n  },\n  detailRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    marginBottom: modernSpacing.md,\n  },\n  detailItem: {\n    alignItems: \"center\",\n  },\n  detailLabel: {\n    ...modernTypography.label.medium,\n    color: modernColors.text.secondary,\n  },\n  detailValue: {\n    ...modernTypography.h4,\n    color: modernColors.secondary[500],\n  },\n  section: {\n    marginBottom: modernSpacing.xl,\n  },\n  sectionHeader: {\n    ...modernTypography.h5,\n    color: modernColors.text.primary,\n    marginBottom: modernSpacing.md,\n  },\n  toggleRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginVertical: modernSpacing.md,\n  },\n  label: {\n    ...modernTypography.body.medium,\n    color: modernColors.text.primary,\n  },\n  damageBox: {\n    marginTop: modernSpacing.md,\n    padding: modernSpacing.md,\n    backgroundColor: \"rgba(239, 68, 68, 0.1)\",\n    borderRadius: modernBorderRadius.md,\n  },\n  rowBetween: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: modernSpacing.sm,\n  },\n  mainInput: {\n    fontSize: 24,\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n  },\n  submitButton: {\n    marginTop: modernSpacing.xl,\n  },\n  sectionTitle: {\n    ...modernTypography.h5,\n    color: modernColors.text.primary,\n  },\n  conditionContainer: {\n    flexDirection: \"row\",\n    gap: modernSpacing.sm,\n    paddingBottom: modernSpacing.sm,\n  },\n  conditionChip: {\n    paddingHorizontal: modernSpacing.md,\n    paddingVertical: modernSpacing.sm,\n    borderRadius: modernBorderRadius.full,\n    backgroundColor: \"rgba(255,255,255,0.1)\",\n    borderWidth: 1,\n    borderColor: \"transparent\",\n  },\n  conditionChipSelected: {\n    backgroundColor: \"rgba(16, 185, 129, 0.2)\",\n    borderColor: modernColors.primary[500],\n  },\n  conditionText: {\n    ...modernTypography.body.medium,\n    color: modernColors.text.secondary,\n  },\n  conditionTextSelected: {\n    color: \"#FFFFFF\",\n    fontWeight: \"600\",\n  },\n  detailsInputContainer: {\n    marginTop: modernSpacing.md,\n  },\n  batchList: {\n    marginBottom: modernSpacing.md,\n    backgroundColor: \"rgba(255,255,255,0.05)\",\n    borderRadius: modernBorderRadius.md,\n    padding: modernSpacing.sm,\n  },\n  batchItem: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    backgroundColor: \"rgba(255,255,255,0.05)\",\n    borderRadius: modernBorderRadius.md,\n    padding: modernSpacing.sm,\n  },\n  batchInfo: {\n    flex: 1,\n  },\n  batchQty: {\n    ...modernTypography.body.large,\n    color: modernColors.text.primary,\n    fontWeight: \"bold\",\n  },\n  batchDetail: {\n    ...modernTypography.body.small,\n    color: modernColors.text.secondary,\n  },\n  deleteBatchBtn: {\n    padding: modernSpacing.sm,\n  },\n  batchTotal: {\n    marginTop: modernSpacing.sm,\n    paddingTop: modernSpacing.sm,\n    alignItems: \"flex-end\",\n  },\n  batchTotalText: {\n    ...modernTypography.h5,\n    color: modernColors.secondary[400],\n  },\n  addBatchForm: {\n    backgroundColor: \"rgba(255,255,255,0.03)\",\n    padding: modernSpacing.md,\n    borderRadius: modernBorderRadius.md,\n  },\n  row: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n  },\n  addBatchBtn: {\n    backgroundColor: \"rgba(255,255,255,0.1)\",\n    padding: modernSpacing.md,\n    borderRadius: modernBorderRadius.md,\n    alignItems: \"center\",\n    marginTop: modernSpacing.md,\n  },\n  addBatchBtnText: {\n    ...modernTypography.button.medium,\n    color: \"#FFFFFF\",\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/staff/scan.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used.","line":14,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'sanitizeBarcode' is defined but never used.","line":46,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":25},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":184,"column":33,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":184,"endColumn":70}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Scan Screen - Aurora Design v2.0\n *\n * Features:\n * - Floating scan button with pulse animation\n * - Aurora background\n * - Quick actions menu\n * - Recent items carousel\n * - Smart search with suggestions\n * - Offline queue indicator\n * - Haptic feedback\n */\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  View,\n  Text,\n  Alert,\n  StyleSheet,\n  ScrollView,\n  Platform,\n  TouchableOpacity,\n  TextInput,\n  Dimensions,\n} from \"react-native\";\nimport { StatusBar } from \"expo-status-bar\";\nimport * as Haptics from \"expo-haptics\";\nimport { useRouter, useLocalSearchParams } from \"expo-router\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useCameraPermissions, CameraView } from \"expo-camera\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport Animated, {\n  FadeInDown,\n  FadeInUp,\n  useSharedValue,\n  useAnimatedStyle,\n  withSpring,\n  withTiming,\n} from \"react-native-reanimated\";\nimport { useDebounce } from \"use-debounce\";\nimport { useScanSessionStore } from \"@/store/scanSessionStore\";\nimport { AuroraBackground, GlassCard, FloatingScanButton, ScanFeedback, LoadingSpinner, ScreenHeader } from \"@/components/ui\";\nimport type { ScanFeedbackType } from \"@/components/ui\";\nimport { auroraTheme } from \"@/theme/auroraTheme\";\nimport { getItemByBarcode, searchItems, updateSessionStatus } from \"@/services/api/api\";\nimport { sanitizeBarcode } from \"@/utils/validation\";\nimport { scanDeduplicationService } from \"@/services/scanDeduplicationService\";\nimport { RecentItemsService } from \"@/services/enhancedFeatures\";\n\nconst { width: SCREEN_WIDTH } = Dimensions.get(\"window\");\n\nexport default function ScanScreen() {\n  const params = useLocalSearchParams();\n  const rawSessionId = params?.sessionId;\n  const sessionId = Array.isArray(rawSessionId) ? rawSessionId[0] : rawSessionId;\n  const router = useRouter();\n  const { sessionType } = useScanSessionStore();\n  const [permission, requestPermission] = useCameraPermissions();\n\n  // States\n  const [isScanning, setIsScanning] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [debouncedSearchQuery] = useDebounce(searchQuery, 300);\n  const [searchResults, setSearchResults] = useState<any[]>([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [showResults, setShowResults] = useState(false);\n\n  const [loading, setLoading] = useState(false);\n  const [recentItems, setRecentItems] = useState<any[]>([]);\n  const [showQuickActions, setShowQuickActions] = useState(false);\n\n  // Scan feedback state\n  const [showScanFeedback, setShowScanFeedback] = useState(false);\n  const [scanFeedbackType, setScanFeedbackType] = useState<ScanFeedbackType>(\"success\");\n  const [scanFeedbackMessage, setScanFeedbackMessage] = useState(\"\");\n\n  // Animation\n  const quickActionsScale = useSharedValue(0);\n\n  useEffect(() => {\n    loadRecentItems();\n  }, []);\n\n  // Effect for live search\n  useEffect(() => {\n    const performSearch = async () => {\n      // Don't search if query is too short or empty (min 3 chars)\n      if (!debouncedSearchQuery || debouncedSearchQuery.length < 3) {\n        setSearchResults([]);\n        setShowResults(false);\n        return;\n      }\n\n      setIsSearching(true);\n      setShowResults(true);\n      try {\n        // Determine search fields based on prefix\n        let searchFields = [\"item_name\"];\n        if (\n          debouncedSearchQuery.startsWith(\"51\") ||\n          debouncedSearchQuery.startsWith(\"52\") ||\n          debouncedSearchQuery.startsWith(\"53\")\n        ) {\n          searchFields = [\"item_name\", \"barcode\"];\n        }\n\n        const results = await searchItems(debouncedSearchQuery, searchFields);\n        setSearchResults(results || []);\n      } catch (error) {\n        console.error(\"Search failed:\", error);\n        setSearchResults([]);\n      } finally {\n        setIsSearching(false);\n      }\n    };\n\n    performSearch();\n  }, [debouncedSearchQuery]);\n\n  const loadRecentItems = async () => {\n    try {\n      const recent = await RecentItemsService.getRecent();\n      setRecentItems(recent.slice(0, 5)); // Get first 5 items\n    } catch (error) {\n      console.error(\"Failed to load recent items:\", error);\n    }\n  };\n\n  const quickActionsStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: quickActionsScale.value }],\n    opacity: quickActionsScale.value,\n  }));\n\n  const toggleQuickActions = () => {\n    if (Platform.OS !== \"web\") {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n\n    if (showQuickActions) {\n      quickActionsScale.value = withTiming(0, { duration: 200 });\n      setTimeout(() => setShowQuickActions(false), 200);\n    } else {\n      setShowQuickActions(true);\n      quickActionsScale.value = withSpring(1);\n    }\n  };\n\n  const handleScanPress = () => {\n    if (Platform.OS !== \"web\") {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\n    }\n\n    if (!permission?.granted) {\n      requestPermission();\n      return;\n    }\n\n    setIsScanning(true);\n  };\n\n  const handleBarcodeScan = async ({ data }: { data: string }) => {\n    if (Platform.OS !== \"web\") {\n      Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n    }\n\n    // Deduplication check\n    const { isDuplicate } = await scanDeduplicationService.checkDuplicate(data);\n    if (isDuplicate) {\n      if (Platform.OS !== \"web\") {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\n      }\n      // Show visual feedback for duplicate\n      setScanFeedbackType(\"duplicate\");\n      setScanFeedbackMessage(\"This item was recently scanned\");\n      setShowScanFeedback(true);\n    }\n\n    setIsScanning(false);\n    await handleLookup(data);\n  };\n\n  const handleLookup = async (barcode: string) => {\n    // Import validation helper\n    const { validateBarcode } = require(\"../../src/utils/validation\");\n\n    // Validate barcode with detailed error message\n    const validation = validateBarcode(barcode);\n    if (!validation.valid) {\n      if (Platform.OS !== \"web\") {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning);\n      }\n      // Show user-friendly error in scan feedback\n      setScanFeedbackType(\"error\");\n      setScanFeedbackMessage(validation.error || \"Invalid barcode\");\n      setShowScanFeedback(true);\n      return;\n    }\n\n    const sanitized = validation.value!;\n    setLoading(true);\n    setSearchQuery(\"\"); // Clear search query on lookup\n    setShowResults(false); // Hide results\n\n    try {\n      const item = await getItemByBarcode(sanitized);\n\n      if (item) {\n        if (Platform.OS !== \"web\") {\n          Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n        }\n\n        // Show success feedback\n        setScanFeedbackType(\"success\");\n        setScanFeedbackMessage(`Found: ${item.item_name || item.item_code}`);\n        setShowScanFeedback(true);\n\n        // Track recent\n        console.log(\"Adding to recent items service...\");\n        try {\n          await RecentItemsService.addRecent(item.item_code, item);\n          console.log(\"Added to recent items.\");\n        } catch (e) {\n          console.error(\"Failed to add recent item:\", e);\n        }\n        await loadRecentItems();\n\n\n        // Navigate to detail\n        console.log(\"Navigating to item detail with:\", { barcode: item.item_code, sessionId });\n        router.push({\n          pathname: \"/staff/item-detail\",\n          params: { barcode: item.item_code, sessionId: sessionId as string },\n        } as any);\n      } else {\n        if (Platform.OS !== \"web\") {\n          Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n        }\n        // Show error feedback\n        setScanFeedbackType(\"error\");\n        setScanFeedbackMessage(`Item not found: ${barcode}`);\n        setShowScanFeedback(true);\n      }\n    } catch (error: any) {\n      if (Platform.OS !== \"web\") {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n      Alert.alert(\"Error\", error.message || \"Failed to lookup item\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleManualSearch = () => {\n    if (searchQuery.trim()) {\n      handleLookup(searchQuery);\n    }\n  };\n\n  const handleSearchResultPress = (item: any) => {\n    setShowResults(false);\n    // Prefer barcode, then item_code\n    handleLookup(item.barcode || item.item_code);\n  };\n\n  const handleRecentItemPress = (item: any) => {\n    const code = item.barcode || item.item_code;\n    if (code) {\n      handleLookup(code);\n    }\n  };\n\n  const [isFinishing, setIsFinishing] = useState(false);\n\n  const handleFinishRack = () => {\n    if (Platform.OS !== \"web\") {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n    Alert.alert(\n      \"Finish Rack\",\n      \"Are you sure you want to mark this rack as complete? You won't be able to add more items to this section.\",\n      [\n        { text: \"Cancel\", style: \"cancel\" },\n        {\n          text: \"Finish Rack\",\n          style: \"default\",\n          onPress: async () => {\n            if (!sessionId) {\n              Alert.alert(\"Error\", \"No active session to close.\");\n              return;\n            }\n            setIsFinishing(true);\n            try {\n              await updateSessionStatus(sessionId, \"closed\");\n              if (Platform.OS !== \"web\") {\n                Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n              }\n              Alert.alert(\"Success\", \"Rack marked as complete!\", [\n                {\n                  text: \"OK\",\n                  onPress: () => router.replace(\"/staff/home\")\n                }\n              ]);\n            } catch (error: any) {\n              console.error(\"Failed to finish rack:\", error);\n              Alert.alert(\"Error\", error.message || \"Failed to close session.\");\n            } finally {\n              setIsFinishing(false);\n            }\n          }\n        },\n      ]\n    );\n  };\n\n  if (isScanning) {\n    return (\n      <View style={styles.cameraFullScreen}>\n        <StatusBar style=\"light\" />\n        <CameraView\n          style={styles.camera}\n          onBarcodeScanned={handleBarcodeScan}\n          barcodeScannerSettings={{\n            barcodeTypes: [\"qr\", \"ean13\", \"ean8\", \"code128\", \"code39\"],\n          }}\n        >\n          {/* AR-style overlay */}\n          <View style={styles.cameraOverlay}>\n            <View style={styles.scanFrame}>\n              <View style={[styles.corner, styles.cornerTopLeft]} />\n              <View style={[styles.corner, styles.cornerTopRight]} />\n              <View style={[styles.corner, styles.cornerBottomLeft]} />\n              <View style={[styles.corner, styles.cornerBottomRight]} />\n            </View>\n\n            <Text style={styles.scanInstructions}>\n              Position barcode within the frame\n            </Text>\n\n            {/* Cancel button */}\n            <TouchableOpacity\n              style={styles.cancelButton}\n              onPress={() => setIsScanning(false)}\n              activeOpacity={0.8}\n            >\n              <LinearGradient\n                colors={[\"rgba(0,0,0,0.6)\", \"rgba(0,0,0,0.8)\"]}\n                style={styles.cancelButtonGradient}\n              >\n                <Ionicons name=\"close\" size={24} color=\"#FFF\" />\n                <Text style={styles.cancelButtonText}>Cancel</Text>\n              </LinearGradient>\n            </TouchableOpacity>\n          </View>\n        </CameraView>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <StatusBar style=\"light\" />\n\n      <AuroraBackground variant=\"primary\" intensity=\"low\" animated={true}>\n        {/* Header */}\n        <ScreenHeader\n          title=\"Scan Items\"\n          subtitle={sessionId ? `Session: ${sessionId}` : \"No session\"}\n          showBackButton\n          showLogoutButton\n          customRightContent={\n            sessionType !== \"STANDARD\" ? (\n              <View style={[\n                styles.modeBadge,\n                sessionType === \"BLIND\" ? styles.modeBadgeBlind : styles.modeBadgeStrict\n              ]}>\n                <Text style={styles.modeBadgeText}>{sessionType}</Text>\n              </View>\n            ) : undefined\n          }\n        />\n\n        <ScrollView\n          style={styles.scrollView}\n          contentContainerStyle={styles.scrollContent}\n          showsVerticalScrollIndicator={false}\n          keyboardShouldPersistTaps=\"handled\"\n        >\n          {/* Search Card */}\n          <Animated.View entering={FadeInDown.delay(100).springify()}>\n            <GlassCard\n              variant=\"medium\"\n              intensity={20}\n              elevation=\"md\"\n              style={styles.searchCard}\n            >\n              <Text style={styles.cardTitle}>Quick Search</Text>\n              <View style={styles.searchInputContainer}>\n                <Ionicons\n                  name=\"search\"\n                  size={20}\n                  color={auroraTheme.colors.text.secondary}\n                  style={styles.searchIcon}\n                />\n                <TextInput\n                  style={styles.searchInput}\n                  placeholder=\"Enter barcode or item name...\"\n                  placeholderTextColor={auroraTheme.colors.text.tertiary}\n                  value={searchQuery}\n                  onChangeText={setSearchQuery}\n                  onSubmitEditing={handleManualSearch}\n                  returnKeyType=\"search\"\n                />\n                {searchQuery.length > 0 && (\n                  <TouchableOpacity\n                    onPress={() => {\n                      setSearchQuery(\"\");\n                      setSearchResults([]);\n                      setShowResults(false);\n                    }}\n                    style={styles.clearButton}\n                  >\n                    <Ionicons name=\"close-circle\" size={20} color={auroraTheme.colors.text.tertiary} />\n                  </TouchableOpacity>\n                )}\n              </View>\n\n              {/* Live Search Results */}\n              {showResults && (\n                <View style={styles.searchResultsContainer}>\n                  {isSearching ? (\n                    <LoadingSpinner size={20} color={auroraTheme.colors.accent[500]} style={{ padding: 10 }} />\n                  ) : searchResults.length > 0 ? (\n                    <View style={styles.resultsList}>\n                      {searchResults.slice(0, 5).map((item) => (\n                        <TouchableOpacity\n                          key={item.id || item.item_code}\n                          style={styles.resultItem}\n                          onPress={() => handleSearchResultPress(item)}\n                        >\n                          <View style={styles.resultIcon}>\n                            <Ionicons name=\"cube-outline\" size={18} color={auroraTheme.colors.text.secondary} />\n                          </View>\n                          <View style={styles.resultInfo}>\n                            <Text style={styles.resultName} numberOfLines={1}>{item.item_name || item.name}</Text>\n                            <View style={{ flexDirection: 'row', alignItems: 'center', gap: 8 }}>\n                              {item.barcode && (\n                                <Text style={[styles.resultCode, { color: auroraTheme.colors.text.tertiary, fontSize: 10 }]}>\n                                  {item.barcode}\n                                </Text>\n                              )}\n                            </View>\n                          </View>\n                          <Ionicons name=\"chevron-forward\" size={16} color={auroraTheme.colors.text.tertiary} />\n                        </TouchableOpacity>\n                      ))}\n                    </View>\n                  ) : (\n                    debouncedSearchQuery.length >= 3 && (\n                      <Text style={styles.noResultsText}>No items found</Text>\n                    )\n                  )}\n                </View>\n              )}\n            </GlassCard>\n          </Animated.View>\n\n          {/* Recent Items */}\n          {recentItems.length > 0 && (\n            <Animated.View entering={FadeInUp.delay(200).springify()}>\n              <Text style={styles.sectionTitle}>Recent Items</Text>\n              <ScrollView\n                horizontal\n                showsHorizontalScrollIndicator={false}\n                contentContainerStyle={styles.recentItemsContainer}\n              >\n                {recentItems.map((item, index) => (\n                  <TouchableOpacity\n                    key={index}\n                    onPress={() => handleRecentItemPress(item)}\n                    activeOpacity={0.7}\n                  >\n                    <GlassCard\n                      variant=\"light\"\n                      intensity={15}\n                      elevation=\"sm\"\n                      padding={auroraTheme.spacing.md}\n                      style={styles.recentItemCard}\n                    >\n                      <View style={styles.recentItemIcon}>\n                        <Ionicons name=\"cube-outline\" size={24} color={auroraTheme.colors.primary[400]} />\n                      </View>\n                      {item.barcode && (\n                        <Text style={[styles.recentItemCode, { fontSize: 10, color: auroraTheme.colors.text.tertiary }]} numberOfLines={1}>\n                          {item.barcode}\n                        </Text>\n                      )}\n                      <Text style={styles.recentItemName} numberOfLines={2}>\n                        {item.item_name || \"Unknown Item\"}\n                      </Text>\n                    </GlassCard>\n                  </TouchableOpacity>\n                ))}\n              </ScrollView>\n            </Animated.View>\n          )}\n\n          {/* Stats Card */}\n          <Animated.View entering={FadeInUp.delay(300).springify()}>\n            <GlassCard\n              variant=\"medium\"\n              intensity={20}\n              elevation=\"md\"\n              style={styles.statsCard}\n            >\n              <Text style={styles.cardTitle}>Today&apos;s Progress</Text>\n              <View style={styles.statsRow}>\n                <View style={styles.statItem}>\n                  <Text style={styles.statValue}>0</Text>\n                  <Text style={styles.statLabel}>Scanned</Text>\n                </View>\n                <View style={styles.statDivider} />\n                <View style={styles.statItem}>\n                  <Text style={styles.statValue}>0</Text>\n                  <Text style={styles.statLabel}>Verified</Text>\n                </View>\n                <View style={styles.statDivider} />\n                <View style={styles.statItem}>\n                  <Text style={styles.statValue}>0</Text>\n                  <Text style={styles.statLabel}>Pending</Text>\n                </View>\n              </View>\n            </GlassCard>\n          </Animated.View>\n\n          {/* Finish Rack Button */}\n          <Animated.View entering={FadeInUp.delay(400).springify()}>\n            <TouchableOpacity\n              style={[styles.finishRackButton, isFinishing && styles.finishRackButtonDisabled]}\n              onPress={handleFinishRack}\n              disabled={isFinishing}\n              activeOpacity={0.8}\n            >\n              <LinearGradient\n                colors={[\"#22C55E\", \"#16A34A\"]}\n                start={{ x: 0, y: 0 }}\n                end={{ x: 1, y: 0 }}\n                style={styles.finishRackGradient}\n              >\n                {isFinishing ? (\n                  <LoadingSpinner size={20} color=\"#FFF\" />\n                ) : (\n                  <>\n                    <Ionicons name=\"checkmark-circle\" size={24} color=\"#FFF\" />\n                    <Text style={styles.finishRackText}>Finish Rack</Text>\n                  </>\n                )}\n              </LinearGradient>\n            </TouchableOpacity>\n          </Animated.View>\n\n          {/* Spacing for floating button */}\n          <View style={{ height: 120 }} />\n        </ScrollView>\n\n        {/* Floating Scan Button */}\n        <View style={styles.floatingButtonContainer}>\n          <FloatingScanButton\n            onPress={handleScanPress}\n            disabled={loading}\n          />\n        </View>\n\n        {/* Quick Actions Menu */}\n        {showQuickActions && (\n          <Animated.View style={[styles.quickActionsContainer, quickActionsStyle]}>\n            <TouchableOpacity style={styles.quickActionButton} activeOpacity={0.7}>\n              <LinearGradient\n                colors={auroraTheme.colors.aurora.secondary}\n                style={styles.quickActionGradient}\n              >\n                <Ionicons name=\"list\" size={24} color={auroraTheme.colors.text.primary} />\n              </LinearGradient>\n              <Text style={styles.quickActionLabel}>History</Text>\n            </TouchableOpacity>\n\n            <TouchableOpacity style={styles.quickActionButton} activeOpacity={0.7}>\n              <LinearGradient\n                colors={auroraTheme.colors.aurora.success}\n                style={styles.quickActionGradient}\n              >\n                <Ionicons name=\"checkmark-done\" size={24} color={auroraTheme.colors.text.primary} />\n              </LinearGradient>\n              <Text style={styles.quickActionLabel}>Verify</Text>\n            </TouchableOpacity>\n          </Animated.View>\n        )}\n\n        {/* Quick Actions Toggle */}\n        <TouchableOpacity\n          style={styles.quickActionsToggle}\n          onPress={toggleQuickActions}\n          activeOpacity={0.8}\n        >\n          <LinearGradient\n            colors={auroraTheme.colors.aurora.warm}\n            style={styles.quickActionsToggleGradient}\n          >\n            <Ionicons\n              name={showQuickActions ? \"close\" : \"apps\"}\n              size={24}\n              color={auroraTheme.colors.text.primary}\n            />\n          </LinearGradient>\n        </TouchableOpacity>\n      </AuroraBackground>\n\n      {/* Scan Feedback Overlay */}\n      <ScanFeedback\n        visible={showScanFeedback}\n        type={scanFeedbackType}\n        title={scanFeedbackMessage}\n        onDismiss={() => setShowScanFeedback(false)}\n        duration={2000}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  modeBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 6,\n  },\n  modeBadgeBlind: {\n    backgroundColor: auroraTheme.colors.warning[500],\n  },\n  modeBadgeStrict: {\n    backgroundColor: auroraTheme.colors.error[500],\n  },\n  modeBadgeText: {\n    fontSize: 10,\n    fontWeight: 'bold',\n    color: '#FFF',\n  },\n  scrollView: {\n    flex: 1,\n  },\n  scrollContent: {\n    padding: auroraTheme.spacing.lg,\n  },\n  searchCard: {\n    marginBottom: auroraTheme.spacing.lg,\n  },\n  cardTitle: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    fontWeight: auroraTheme.typography.fontWeight.semibold,\n    color: auroraTheme.colors.text.primary,\n    marginBottom: auroraTheme.spacing.md,\n  },\n  searchInputContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: auroraTheme.colors.background.secondary,\n    borderRadius: auroraTheme.borderRadius.input,\n    paddingHorizontal: auroraTheme.spacing.md,\n    height: 48,\n    borderWidth: 1,\n    borderColor: auroraTheme.colors.border.light,\n  },\n  searchIcon: {\n    marginRight: auroraTheme.spacing.sm,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: auroraTheme.typography.fontSize.base,\n    color: auroraTheme.colors.text.primary,\n  },\n  clearButton: {\n    padding: auroraTheme.spacing.xs,\n  },\n  // Search Results Styles\n  searchResultsContainer: {\n    marginTop: 10,\n    borderTopWidth: 1,\n    borderTopColor: \"rgba(255,255,255,0.1)\",\n    paddingTop: 5,\n  },\n  resultsList: {\n    maxHeight: 200,\n  },\n  resultItem: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingVertical: 10,\n    paddingHorizontal: 5,\n    borderBottomWidth: 1,\n    borderBottomColor: \"rgba(255,255,255,0.05)\",\n  },\n  resultIcon: {\n    width: 32,\n    height: 32,\n    borderRadius: 8,\n    backgroundColor: \"rgba(255,255,255,0.1)\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginRight: 10,\n  },\n  resultInfo: {\n    flex: 1,\n  },\n  resultName: {\n    color: auroraTheme.colors.text.primary,\n    fontSize: 14,\n    fontWeight: \"500\",\n  },\n  resultCode: {\n    color: auroraTheme.colors.text.secondary,\n    fontSize: 12,\n  },\n  noResultsText: {\n    color: auroraTheme.colors.text.tertiary,\n    fontSize: 13,\n    textAlign: \"center\",\n    padding: 10,\n  },\n  sectionTitle: {\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: auroraTheme.typography.fontWeight.semibold,\n    color: auroraTheme.colors.text.primary,\n    marginBottom: auroraTheme.spacing.md,\n  },\n  recentItemsContainer: {\n    paddingBottom: auroraTheme.spacing.md,\n    gap: auroraTheme.spacing.md,\n  },\n  recentItemCard: {\n    width: 120,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  recentItemIcon: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: auroraTheme.colors.background.secondary,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  recentItemCode: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontWeight: auroraTheme.typography.fontWeight.semibold,\n    color: auroraTheme.colors.text.primary,\n    marginBottom: 4,\n  },\n  recentItemName: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.secondary,\n    textAlign: \"center\",\n  },\n  statsCard: {\n    marginTop: auroraTheme.spacing.lg,\n  },\n  statsRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n    alignItems: \"center\",\n  },\n  statItem: {\n    alignItems: \"center\",\n    flex: 1,\n  },\n  statValue: {\n    fontSize: auroraTheme.typography.fontSize[\"3xl\"],\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n    color: auroraTheme.colors.primary[400],\n    marginBottom: 4,\n  },\n  statLabel: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n  },\n  statDivider: {\n    width: 1,\n    height: 40,\n    backgroundColor: auroraTheme.colors.border.light,\n  },\n  floatingButtonContainer: {\n    position: \"absolute\",\n    bottom: 32,\n    alignSelf: \"center\",\n  },\n  quickActionsContainer: {\n    position: \"absolute\",\n    bottom: 120,\n    alignSelf: \"center\",\n    flexDirection: \"row\",\n    gap: auroraTheme.spacing.md,\n  },\n  quickActionButton: {\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.xs,\n  },\n  quickActionGradient: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    ...auroraTheme.shadows.md,\n  },\n  quickActionLabel: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.secondary,\n    fontWeight: auroraTheme.typography.fontWeight.medium,\n  },\n  quickActionsToggle: {\n    position: \"absolute\",\n    bottom: 32,\n    right: 24,\n  },\n  quickActionsToggleGradient: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    ...auroraTheme.shadows.md,\n  },\n  // Camera styles\n  cameraFullScreen: {\n    flex: 1,\n    backgroundColor: \"#000\",\n  },\n  camera: {\n    flex: 1,\n  },\n  cameraOverlay: {\n    flex: 1,\n    backgroundColor: \"rgba(0, 0, 0, 0.3)\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  scanFrame: {\n    width: SCREEN_WIDTH * 0.7,\n    height: SCREEN_WIDTH * 0.7,\n    position: \"relative\",\n  },\n  corner: {\n    position: \"absolute\",\n    width: 40,\n    height: 40,\n    borderColor: auroraTheme.colors.primary[400],\n    borderWidth: 3,\n  },\n  cornerTopLeft: {\n    top: 0,\n    left: 0,\n    borderRightWidth: 0,\n    borderBottomWidth: 0,\n    borderTopLeftRadius: 8,\n  },\n  cornerTopRight: {\n    top: 0,\n    right: 0,\n    borderLeftWidth: 0,\n    borderBottomWidth: 0,\n    borderTopRightRadius: 8,\n  },\n  cornerBottomLeft: {\n    bottom: 0,\n    left: 0,\n    borderRightWidth: 0,\n    borderTopWidth: 0,\n    borderBottomLeftRadius: 8,\n  },\n  cornerBottomRight: {\n    bottom: 0,\n    right: 0,\n    borderLeftWidth: 0,\n    borderTopWidth: 0,\n    borderBottomRightRadius: 8,\n  },\n  scanInstructions: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    color: auroraTheme.colors.text.primary,\n    marginTop: auroraTheme.spacing.xl,\n    textAlign: \"center\",\n    paddingHorizontal: auroraTheme.spacing.lg,\n  },\n  cancelButton: {\n    position: \"absolute\",\n    bottom: 60,\n    borderRadius: auroraTheme.borderRadius.full,\n    overflow: \"hidden\",\n  },\n  cancelButtonGradient: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.sm,\n    paddingHorizontal: auroraTheme.spacing.lg,\n    paddingVertical: auroraTheme.spacing.md,\n  },\n  cancelButtonText: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    fontWeight: auroraTheme.typography.fontWeight.semibold,\n    color: auroraTheme.colors.text.primary,\n  },\n  // Finish Rack Button Styles\n  finishRackButton: {\n    marginTop: auroraTheme.spacing.md,\n    marginHorizontal: auroraTheme.spacing.lg,\n    borderRadius: auroraTheme.borderRadius.lg,\n    overflow: \"hidden\",\n  },\n  finishRackButtonDisabled: {\n    opacity: 0.7,\n  },\n  finishRackGradient: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: auroraTheme.spacing.sm,\n    paddingVertical: auroraTheme.spacing.md,\n    paddingHorizontal: auroraTheme.spacing.lg,\n  },\n  finishRackText: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n    color: \"#FFF\",\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/_layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/activity-logs.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":41,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Activity Logs Screen - View application activity and audit logs\n * Refactored to use Aurora Design System\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  RefreshControl,\n  Platform,\n} from \"react-native\";\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useRouter } from \"expo-router\";\nimport { StatusBar } from \"expo-status-bar\";\nimport Animated, { FadeInDown } from \"react-native-reanimated\";\nimport * as Haptics from \"expo-haptics\";\nimport { FlashList } from \"@shopify/flash-list\";\n\nimport { getActivityLogs, getActivityStats } from \"../../src/services/api/api\";\nimport { useToast } from \"../../src/components/feedback/ToastProvider\";\nimport { AuroraBackground, GlassCard, StatsCard, AnimatedPressable, ScreenHeader } from \"../../src/components/ui\";\nimport { auroraTheme } from \"../../src/theme/auroraTheme\";\n\ninterface ActivityLog {\n  id: string;\n  timestamp: string;\n  user: string;\n  role: string;\n  action: string;\n  entity_type?: string;\n  entity_id?: string;\n  details: any;\n  status: string;\n  error_message?: string;\n}\n\nexport default function ActivityLogsScreen() {\n  const router = useRouter();\n  const { show } = useToast();\n\n  const [logs, setLogs] = useState<ActivityLog[]>([]);\n  const [stats, setStats] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n\n  const loadLogs = React.useCallback(\n    async (pageNum: number = 1) => {\n      try {\n        setLoading(pageNum === 1);\n        const response = await getActivityLogs(pageNum, 20);\n        if (pageNum === 1) {\n          setLogs(response.activities || []);\n        } else {\n          setLogs((prevLogs) => [...prevLogs, ...(response.activities || [])]);\n        }\n        setHasMore(response.pagination?.has_next || false);\n      } catch (error: any) {\n        show(`Failed to load logs: ${error.message}`, \"error\");\n        if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      } finally {\n        setLoading(false);\n        setRefreshing(false);\n      }\n    },\n    [show],\n  );\n\n  const loadStats = React.useCallback(async () => {\n    try {\n      const statsData = await getActivityStats();\n      setStats(statsData);\n    } catch (error: any) {\n      console.error(\"Failed to load stats:\", error);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadLogs();\n    loadStats();\n  }, [loadLogs, loadStats]);\n\n  const handleRefresh = () => {\n    if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    setRefreshing(true);\n    setPage(1);\n    loadLogs(1);\n    loadStats();\n  };\n\n  const loadMore = () => {\n    if (hasMore && !loading) {\n      if (Platform.OS !== \"web\") Haptics.selectionAsync();\n      const nextPage = page + 1;\n      setPage(nextPage);\n      loadLogs(nextPage);\n    }\n  };\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    return date.toLocaleString();\n  };\n\n  const getActionIcon = (action: string) => {\n    const iconMap: Record<string, string> = {\n      login: \"log-in-outline\",\n      logout: \"log-out-outline\",\n      scan_item: \"barcode-outline\",\n      create_session: \"add-circle-outline\",\n      approve_count: \"checkmark-circle-outline\",\n      reject_count: \"close-circle-outline\",\n      refresh_stock: \"refresh-outline\",\n      sync: \"sync-outline\",\n    };\n    return iconMap[action] || \"ellipse-outline\";\n  };\n\n  const renderLogItem = ({ item: log }: { item: ActivityLog }) => (\n    <AnimatedPressable style={{ marginBottom: auroraTheme.spacing.md }}>\n      <GlassCard variant=\"light\" padding={auroraTheme.spacing.md} borderRadius={auroraTheme.borderRadius.lg}>\n        <View style={styles.logHeader}>\n          <View style={styles.logHeaderLeft}>\n            <View style={[styles.iconContainer, { backgroundColor: log.status === 'error' ? 'rgba(239, 68, 68, 0.1)' : 'rgba(59, 130, 246, 0.1)' }]}>\n              <Ionicons\n                name={getActionIcon(log.action) as any}\n                size={20}\n                color={log.status === 'error' ? auroraTheme.colors.error[500] : auroraTheme.colors.primary[500]}\n              />\n            </View>\n            <View style={styles.logInfo}>\n              <Text style={styles.logAction}>\n                {log.action.replace(/_/g, \" \").toUpperCase()}\n              </Text>\n              <Text style={styles.logUser}>\n                {log.user} â€¢ {log.role}\n              </Text>\n            </View>\n          </View>\n          <Text style={[styles.statusText, {\n            color: log.status === 'success' ? auroraTheme.colors.success[500] :\n              log.status === 'error' ? auroraTheme.colors.error[500] :\n                auroraTheme.colors.warning[500]\n          }]}>\n            {log.status}\n          </Text>\n        </View>\n\n        <Text style={styles.timestamp}>\n          {formatTimestamp(log.timestamp)}\n        </Text>\n\n        {log.entity_type && (\n          <GlassCard variant=\"dark\" padding={auroraTheme.spacing.xs} borderRadius={auroraTheme.borderRadius.sm} style={{ alignSelf: 'flex-start', marginVertical: auroraTheme.spacing.xs }}>\n            <Text style={styles.entityText}>\n              {log.entity_type}: {log.entity_id || \"N/A\"}\n            </Text>\n          </GlassCard>\n        )}\n\n        {log.error_message && (\n          <GlassCard\n            variant=\"medium\"\n            padding={auroraTheme.spacing.sm}\n            borderRadius={auroraTheme.borderRadius.md}\n            style={{\n              marginTop: auroraTheme.spacing.sm,\n              flexDirection: 'row',\n              alignItems: 'center',\n              gap: 8,\n              borderColor: auroraTheme.colors.error[500],\n              backgroundColor: 'rgba(239, 68, 68, 0.1)'\n            }}\n          >\n            <Ionicons name=\"alert-circle\" size={16} color={auroraTheme.colors.error[500]} />\n            <Text style={[styles.errorText, { color: auroraTheme.colors.error[500] }]}>{log.error_message}</Text>\n          </GlassCard>\n        )}\n\n        {Object.keys(log.details || {}).length > 0 && !log.error_message && (\n          <GlassCard variant=\"dark\" padding={auroraTheme.spacing.sm} borderRadius={auroraTheme.borderRadius.md} style={{ marginTop: auroraTheme.spacing.sm }}>\n            <Text style={styles.detailsText} numberOfLines={3}>\n              {JSON.stringify(log.details, null, 2)}\n            </Text>\n          </GlassCard>\n        )}\n      </GlassCard>\n    </AnimatedPressable>\n  );\n\n  return (\n    <AuroraBackground>\n      <StatusBar style=\"light\" />\n      <View style={styles.container}>\n        {/* Header */}\n        <ScreenHeader\n          title=\"Activity Logs\"\n          subtitle=\"System audit & user actions\"\n          showBackButton={true}\n          showLogoutButton={false}\n        />\n\n        {stats && (\n          <Animated.View entering={FadeInDown.delay(200).springify()} style={styles.statsContainer}>\n            <StatsCard\n              title=\"Total Activities\"\n              value={stats.total?.toString() || \"0\"}\n              icon=\"layers-outline\"\n              variant=\"primary\"\n              style={{ flex: 1 }}\n            />\n            <StatsCard\n              title=\"Success Rate\"\n              value={`${stats.by_status?.success || 0}`}\n              icon=\"checkmark-circle-outline\"\n              variant=\"success\"\n              style={{ flex: 1 }}\n            />\n            <StatsCard\n              title=\"Errors\"\n              value={`${stats.by_status?.error || 0}`}\n              icon=\"alert-circle-outline\"\n              variant=\"error\"\n              style={{ flex: 1 }}\n            />\n          </Animated.View>\n        )}\n\n        <View style={styles.listContainer}>\n          {loading && logs.length === 0 ? (\n            <View style={styles.loadingContainer}>\n              <LoadingSpinner size={48} color={auroraTheme.colors.primary[500]} />\n              <Text style={styles.loadingText}>Loading activity logs...</Text>\n            </View>\n          ) : (\n            <FlashList\n              data={logs}\n              renderItem={renderLogItem}\n              // @ts-ignore\n              estimatedItemSize={180}\n              keyExtractor={(item) => item.id}\n              refreshControl={\n                <RefreshControl refreshing={refreshing} onRefresh={handleRefresh} tintColor={auroraTheme.colors.primary[500]} />\n              }\n              onEndReached={loadMore}\n              onEndReachedThreshold={0.5}\n              ListEmptyComponent={\n                <View style={styles.emptyContainer}>\n                  <Ionicons name=\"document-text-outline\" size={64} color={auroraTheme.colors.text.tertiary} />\n                  <Text style={styles.emptyText}>No activity logs found</Text>\n                </View>\n              }\n              ListFooterComponent={\n                loading && logs.length > 0 ? (\n                  <View style={{ padding: 20 }}>\n                    <LoadingSpinner size={20} color={auroraTheme.colors.primary[500]} />\n                  </View>\n                ) : null\n              }\n              contentContainerStyle={{ paddingBottom: auroraTheme.spacing.xl }}\n            />\n          )}\n        </View>\n      </View>\n    </AuroraBackground>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingTop: 60,\n    paddingHorizontal: auroraTheme.spacing.md,\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: auroraTheme.spacing.md,\n  },\n  headerLeft: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: auroraTheme.spacing.md,\n  },\n  backButton: {\n    padding: auroraTheme.spacing.xs,\n    backgroundColor: auroraTheme.colors.background.glass,\n    borderRadius: auroraTheme.borderRadius.full,\n    borderWidth: 1,\n    borderColor: auroraTheme.colors.border.light,\n  },\n  pageTitle: {\n    fontFamily: auroraTheme.typography.fontFamily.heading,\n    fontSize: auroraTheme.typography.fontSize[\"2xl\"],\n    color: auroraTheme.colors.text.primary,\n    fontWeight: \"700\",\n  },\n  pageSubtitle: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n  },\n  statsContainer: {\n    flexDirection: \"row\",\n    gap: auroraTheme.spacing.sm,\n    marginBottom: auroraTheme.spacing.md,\n  },\n  listContainer: {\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: auroraTheme.spacing.md,\n    color: auroraTheme.colors.text.secondary,\n    fontSize: auroraTheme.typography.fontSize.md,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingTop: 100,\n  },\n  emptyText: {\n    marginTop: auroraTheme.spacing.md,\n    color: auroraTheme.colors.text.tertiary,\n    fontSize: auroraTheme.typography.fontSize.lg,\n  },\n  logHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  logHeaderLeft: {\n    flexDirection: 'row',\n    gap: auroraTheme.spacing.md,\n    flex: 1,\n  },\n  iconContainer: {\n    width: 36,\n    height: 36,\n    borderRadius: auroraTheme.borderRadius.full,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  logInfo: {\n    flex: 1,\n  },\n  logAction: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    fontWeight: '700',\n    color: auroraTheme.colors.text.primary,\n    marginBottom: 2,\n  },\n  logUser: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.tertiary,\n  },\n  statusText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    fontWeight: 'bold',\n    textTransform: 'uppercase',\n  },\n  timestamp: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.tertiary,\n    marginBottom: auroraTheme.spacing.xs,\n    marginLeft: 52, // Align with text, skipping icon\n  },\n  entityText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.secondary,\n    fontFamily: Platform.OS === 'ios' ? 'Menlo' : 'monospace',\n  },\n  errorText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    flex: 1,\n  },\n  detailsText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.secondary,\n    fontFamily: Platform.OS === 'ios' ? 'Menlo' : 'monospace',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/appearance.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":17,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Appearance Settings Screen\n *\n * Allows users to customize theme, patterns, and layout arrangements\n */\n\nimport React from 'react';\nimport {\n  View,\n  StyleSheet,\n} from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useThemeContext } from '../../src/theme/ThemeContext';\nimport { AppearanceSettings, PatternBackground, ScreenHeader } from '../../src/components/ui';\n\nexport default function AppearanceScreen() {\n  const router = useRouter();\n  const { theme, pattern } = useThemeContext();\n\n  return (\n    <View style={[styles.container, { backgroundColor: theme.colors.background }]}>\n      {/* Pattern Background */}\n      <PatternBackground\n        pattern={pattern}\n        color={theme.colors.accent}\n        secondaryColor={theme.colors.textSecondary}\n        opacity={0.03}\n      />\n\n      {/* Header */}\n      <ScreenHeader\n        title=\"Appearance\"\n        subtitle=\"Customize theme & patterns\"\n        showBackButton\n      />\n\n      {/* Content */}\n      <AppearanceSettings\n        showTitle={true}\n        scrollable={true}\n        compact={false}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/db-mapping.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useCallback has a missing dependency: 'selectedTable'. Either include it or remove the dependency array.","line":188,"column":6,"nodeType":"ArrayExpression","endLine":188,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [selectedTable, show]","fix":{"range":[7132,7138],"text":"[selectedTable, show]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Database Mapping Configuration Screen\n * Allows supervisors to select tables and columns for ERP mapping\n * Refactored to use Aurora Design System\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TextInput,\n  Alert,\n  Modal,\n  Platform,\n} from \"react-native\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\nimport { useRouter } from \"expo-router\";\nimport { StatusBar } from \"expo-status-bar\";\nimport Animated, { FadeInDown } from \"react-native-reanimated\";\nimport * as Haptics from \"expo-haptics\";\n\nimport {\n  getAvailableTables,\n  getTableColumns,\n  getCurrentMapping,\n  testMapping,\n  saveMapping,\n} from \"../../src/services/api/api\";\nimport { useToast } from \"../../src/components/feedback/ToastProvider\";\nimport { AuroraBackground, GlassCard, AnimatedPressable, ScreenHeader } from \"../../src/components/ui\";\nimport { auroraTheme } from \"../../src/theme/auroraTheme\";\n\ninterface Table {\n  name: string;\n  schema: string;\n}\n\ninterface Column {\n  name: string;\n  data_type: string;\n  nullable: boolean;\n  max_length?: number;\n  precision?: number;\n  scale?: number;\n}\n\ninterface ColumnMapping {\n  app_field: string;\n  erp_column: string;\n  table_name: string;\n  is_required: boolean;\n}\n\nconst appFields = [\n  { key: \"item_code\", label: \"Item Code\", required: true },\n  { key: \"item_name\", label: \"Item Name\", required: true },\n  { key: \"barcode\", label: \"Barcode\", required: false },\n  { key: \"stock_qty\", label: \"Stock Quantity\", required: true },\n  { key: \"mrp\", label: \"MRP\", required: false },\n  { key: \"uom_code\", label: \"UOM Code\", required: false },\n  { key: \"category\", label: \"Category\", required: false },\n  { key: \"warehouse\", label: \"Warehouse\", required: false },\n];\n\nexport default function DatabaseMappingScreen() {\n  const router = useRouter();\n  const { show } = useToast();\n\n  // Connection settings\n  const [host, setHost] = useState(\"\");\n  const [port, setPort] = useState(\"1433\");\n  const [database, setDatabase] = useState(\"\");\n  const [user, setUser] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [schema, setSchema] = useState(\"dbo\");\n\n  // Data states\n  const [tables, setTables] = useState<Table[]>([]);\n  const [selectedTable, setSelectedTable] = useState<string>(\"\");\n  const [columns, setColumns] = useState<Column[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [mapping, setMapping] = useState<Record<string, ColumnMapping>>({});\n\n  // UI states\n  const [showColumnModal, setShowColumnModal] = useState(false);\n  const [selectedAppField, setSelectedAppField] = useState<string>(\"\");\n\n  // Consolidated data loading\n  const loadInitialData = React.useCallback(async () => {\n    try {\n      setLoading(true);\n      // 1. Try to get full configuration from backend (Single Source of Truth)\n      try {\n        const response = await getCurrentMapping();\n\n        if (response) {\n          // Set Connection Params from Backend\n          if (response.connection) {\n            const conn = response.connection;\n            if (conn.host) setHost(conn.host);\n            if (conn.port) setPort(conn.port.toString());\n            if (conn.database) setDatabase(conn.database);\n            if (conn.user) setUser(conn.user);\n            if (conn.password) setPassword(conn.password);\n            if (conn.schema_name) setSchema(conn.schema_name);\n            else if (conn.schema) setSchema(conn.schema);\n          } else {\n            // Fallback to AsyncStorage if no backend connection config\n            const savedHost = await AsyncStorage.getItem(\"db_mapping_host\");\n            const savedPort = await AsyncStorage.getItem(\"db_mapping_port\");\n            const savedDatabase = await AsyncStorage.getItem(\"db_mapping_database\");\n            const savedUser = await AsyncStorage.getItem(\"db_mapping_user\");\n            const savedPassword = await AsyncStorage.getItem(\"db_mapping_password\");\n            const savedSchema = await AsyncStorage.getItem(\"db_mapping_schema\");\n\n            if (savedHost) setHost(savedHost);\n            if (savedPort) setPort(savedPort);\n            if (savedDatabase) setDatabase(savedDatabase);\n            if (savedUser) setUser(savedUser);\n            if (savedPassword) setPassword(savedPassword);\n            if (savedSchema) setSchema(savedSchema);\n          }\n\n          // Set Mapping Config\n          if (response.mapping) {\n            if (response.mapping.columns) {\n              const mappedColumns: Record<string, ColumnMapping> = {};\n              Object.entries(response.mapping.columns).forEach(\n                ([key, value]: [string, any]) => {\n                  mappedColumns[key] = {\n                    app_field: key,\n                    erp_column: value.erp_column || value,\n                    table_name: value.table_name || selectedTable, // Might be empty initially\n                    is_required:\n                      appFields.find((f) => f.key === key)?.required || false,\n                  };\n                },\n              );\n              setMapping(mappedColumns);\n            }\n            if (response.mapping.tables) {\n              const firstTable = Object.values(\n                response.mapping.tables,\n              )[0] as string;\n              if (firstTable) {\n                setSelectedTable(firstTable);\n                // Update table_name in mapping if it was missing\n                setMapping(prev => {\n                  const newMap = { ...prev };\n                  Object.keys(newMap).forEach(key => {\n                    const columnMapping = newMap[key];\n                    if (columnMapping && !columnMapping.table_name) {\n                      newMap[key] = { ...columnMapping, table_name: firstTable };\n                    }\n                  });\n                  return newMap;\n                });\n              }\n            }\n          }\n        }\n      } catch (backendError) {\n        console.log(\"Failed to load from backend, trying local storage\", backendError);\n        // Fallback to AsyncStorage on error\n        const savedHost = await AsyncStorage.getItem(\"db_mapping_host\");\n        if (savedHost) setHost(savedHost);\n        const savedPort = await AsyncStorage.getItem(\"db_mapping_port\");\n        if (savedPort) setPort(savedPort);\n        const savedDatabase = await AsyncStorage.getItem(\"db_mapping_database\");\n        if (savedDatabase) setDatabase(savedDatabase);\n        const savedUser = await AsyncStorage.getItem(\"db_mapping_user\");\n        if (savedUser) setUser(savedUser);\n        const savedPassword = await AsyncStorage.getItem(\"db_mapping_password\");\n        if (savedPassword) setPassword(savedPassword);\n        const savedSchema = await AsyncStorage.getItem(\"db_mapping_schema\");\n        if (savedSchema) setSchema(savedSchema);\n      }\n    } catch (error) {\n      console.error(\"Error loading initial data\", error);\n      show(\"Failed to load configuration\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  }, [show]);\n\n  useEffect(() => {\n    loadInitialData();\n  }, [loadInitialData]);\n\n  const handleLoadTables = async () => {\n    // Validate required fields\n    if (!host || !host.trim()) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      show(\"Please enter a valid host address\", \"error\");\n      return;\n    }\n\n    if (!database || !database.trim()) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      show(\"Please enter a database name\", \"error\");\n      return;\n    }\n\n    // Validate host format (IP or hostname)\n    const hostTrimmed = host.trim();\n    const isValidHost = /^(?:\\d{1,3}\\.){3}\\d{1,3}$/.test(hostTrimmed) ||\n      /^[a-zA-Z0-9][a-zA-Z0-9\\-._]*[a-zA-Z0-9]$/.test(hostTrimmed) ||\n      hostTrimmed === 'localhost';\n    if (!isValidHost) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      show(\"Invalid host format. Use IP address or hostname\", \"error\");\n      return;\n    }\n\n    // Validate port if provided\n    if (port) {\n      const portNum = parseInt(port, 10);\n      if (isNaN(portNum) || portNum < 1 || portNum > 65535) {\n        if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n        show(\"Port must be a number between 1 and 65535\", \"error\");\n        return;\n      }\n    }\n\n    // Validate database name (no special characters that could cause issues)\n    if (!/^[a-zA-Z0-9_\\-]+$/.test(database.trim())) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      show(\"Database name contains invalid characters\", \"error\");\n      return;\n    }\n\n    if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    setLoading(true);\n    try {\n      const response = await getAvailableTables(\n        host,\n        parseInt(port) || 1433,\n        database,\n        user || undefined,\n        password || undefined,\n        schema,\n      );\n      setTables(response.tables.map((name: string) => ({ name, schema })));\n      show(`Found ${response.count} tables`, \"success\");\n    } catch (error: any) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      show(\n        `Failed to load tables: ${error.response?.data?.detail || error.message}`,\n        \"error\",\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLoadColumns = async (tableName: string) => {\n    if (!host || !database) {\n      show(\"Please enter host and database\", \"error\");\n      return;\n    }\n\n    if (Platform.OS !== \"web\") Haptics.selectionAsync();\n    setLoading(true);\n    setSelectedTable(tableName);\n    try {\n      const response = await getTableColumns(\n        host,\n        parseInt(port) || 1433,\n        database,\n        tableName,\n        user || undefined,\n        password || undefined,\n        schema,\n      );\n      setColumns(response.columns);\n      show(`Found ${response.count} columns`, \"success\");\n    } catch (error: any) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      show(\n        `Failed to load columns: ${error.response?.data?.detail || error.message}`,\n        \"error\",\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSelectColumn = (appField: string) => {\n    if (Platform.OS !== \"web\") Haptics.selectionAsync();\n    setSelectedAppField(appField);\n    setShowColumnModal(true);\n  };\n\n  const handleMapColumn = (columnName: string) => {\n    if (!selectedTable) {\n      show(\"Please select a table first\", \"error\");\n      return;\n    }\n\n    if (Platform.OS !== \"web\") Haptics.selectionAsync();\n\n    const appField = selectedAppField;\n    const isRequired =\n      appFields.find((f) => f.key === appField)?.required || false;\n\n    setMapping({\n      ...mapping,\n      [appField]: {\n        app_field: appField,\n        erp_column: columnName,\n        table_name: selectedTable,\n        is_required: isRequired,\n      },\n    });\n\n    setShowColumnModal(false);\n    setSelectedAppField(\"\");\n    show(`Mapped ${appField} to ${columnName}`, \"success\");\n  };\n\n  const handleTestMapping = async () => {\n    if (!host || !database) {\n      show(\"Please enter host and database\", \"error\");\n      return;\n    }\n\n    if (Object.keys(mapping).length === 0) {\n      show(\"Please configure at least one mapping\", \"error\");\n      return;\n    }\n\n    if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    setLoading(true);\n    try {\n      const config = {\n        tables: { items: selectedTable },\n        columns: mapping,\n        query_options: {\n          schema_name: schema,\n        },\n      };\n\n      const response = await testMapping(\n        config,\n        host,\n        parseInt(port) || 1433,\n        database,\n        user || undefined,\n        password || undefined,\n      );\n\n      if (response.success) {\n        if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n        Alert.alert(\n          \"Mapping Test Successful\",\n          `Query executed successfully.\\n\\nSample data: ${JSON.stringify(response.sample_data, null, 2)}`,\n          [{ text: \"OK\" }],\n        );\n      }\n    } catch (error: any) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      Alert.alert(\n        \"Mapping Test Failed\",\n        error.response?.data?.detail || error.message,\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSaveMapping = async () => {\n    if (Object.keys(mapping).length === 0) {\n      show(\"Please configure at least one mapping\", \"error\");\n      return;\n    }\n\n    // Check required fields\n    const requiredFields = appFields.filter((f) => f.required);\n    const missingFields = requiredFields.filter((f) => !mapping[f.key]);\n    if (missingFields.length > 0) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      show(\n        `Missing required fields: ${missingFields.map((f) => f.label).join(\", \")}`,\n        \"error\",\n      );\n      return;\n    }\n\n    if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n    setLoading(true);\n    try {\n      // Construct full payload with connection and mapping\n      const payload = {\n        connection: {\n          host,\n          port: parseInt(port) || 1433,\n          database,\n          user: user || null,\n          password: password || null,\n          schema_name: schema\n        },\n        mapping: {\n          tables: { items: selectedTable },\n          columns: mapping,\n          query_options: {\n            schema_name: schema,\n          },\n        }\n      };\n\n      const response = await saveMapping(payload);\n      if (response.success) {\n        // Save connection parameters locally too for offline fallback\n        await AsyncStorage.setItem(\"db_mapping_host\", host);\n        await AsyncStorage.setItem(\"db_mapping_port\", port);\n        await AsyncStorage.setItem(\"db_mapping_database\", database);\n        if (user) await AsyncStorage.setItem(\"db_mapping_user\", user);\n        if (password)\n          await AsyncStorage.setItem(\"db_mapping_password\", password);\n        await AsyncStorage.setItem(\"db_mapping_schema\", schema);\n\n        show(\"Mapping saved successfully\", \"success\");\n        router.back();\n      }\n    } catch (error: any) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      show(\n        `Failed to save mapping: ${error.response?.data?.detail || error.message}`,\n        \"error\",\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <AuroraBackground>\n      <StatusBar style=\"light\" />\n      <View style={styles.container}>\n        {/* Header */}\n        <ScreenHeader\n          title=\"Database Mapping\"\n          subtitle=\"Configure ERP integration\"\n          showBackButton={true}\n          showLogoutButton={false}\n        />\n\n        <ScrollView style={styles.scrollView} contentContainerStyle={{ paddingBottom: 100 }}>\n          {/* Connection Settings */}\n          <Animated.View entering={FadeInDown.delay(200).springify()}>\n            <GlassCard variant=\"light\" padding={auroraTheme.spacing.md} borderRadius={auroraTheme.borderRadius.lg} style={styles.section}>\n              <View style={styles.sectionHeader}>\n                <Ionicons name=\"server-outline\" size={20} color={auroraTheme.colors.primary[500]} />\n                <Text style={styles.sectionTitle}>Connection Settings</Text>\n              </View>\n\n              <View style={styles.inputGrid}>\n                <View style={styles.inputContainer}>\n                  <Text style={styles.label}>Host</Text>\n                  <TextInput\n                    style={styles.input}\n                    value={host}\n                    onChangeText={setHost}\n                    placeholder=\"SQL Server host\"\n                    placeholderTextColor={auroraTheme.colors.text.tertiary}\n                  />\n                </View>\n                <View style={styles.inputContainer}>\n                  <Text style={styles.label}>Port</Text>\n                  <TextInput\n                    style={styles.input}\n                    value={port}\n                    onChangeText={setPort}\n                    placeholder=\"1433\"\n                    keyboardType=\"numeric\"\n                    placeholderTextColor={auroraTheme.colors.text.tertiary}\n                  />\n                </View>\n              </View>\n\n              <View style={styles.inputGrid}>\n                <View style={styles.inputContainer}>\n                  <Text style={styles.label}>Database</Text>\n                  <TextInput\n                    style={styles.input}\n                    value={database}\n                    onChangeText={setDatabase}\n                    placeholder=\"Database name\"\n                    placeholderTextColor={auroraTheme.colors.text.tertiary}\n                  />\n                </View>\n                <View style={styles.inputContainer}>\n                  <Text style={styles.label}>Schema</Text>\n                  <TextInput\n                    style={styles.input}\n                    value={schema}\n                    onChangeText={setSchema}\n                    placeholder=\"dbo\"\n                    placeholderTextColor={auroraTheme.colors.text.tertiary}\n                  />\n                </View>\n              </View>\n\n              <View style={styles.inputGrid}>\n                <View style={styles.inputContainer}>\n                  <Text style={styles.label}>User (Optional)</Text>\n                  <TextInput\n                    style={styles.input}\n                    value={user}\n                    onChangeText={setUser}\n                    placeholder=\"Username\"\n                    placeholderTextColor={auroraTheme.colors.text.tertiary}\n                  />\n                </View>\n                <View style={styles.inputContainer}>\n                  <Text style={styles.label}>Password (Optional)</Text>\n                  <TextInput\n                    style={styles.input}\n                    value={password}\n                    onChangeText={setPassword}\n                    placeholder=\"Password\"\n                    secureTextEntry\n                    placeholderTextColor={auroraTheme.colors.text.tertiary}\n                  />\n                </View>\n              </View>\n\n              <AnimatedPressable\n                style={[styles.button, { backgroundColor: auroraTheme.colors.primary[500] }]}\n                onPress={handleLoadTables}\n                disabled={loading}\n              >\n                {loading ? (\n                  <LoadingSpinner size={20} color=\"#fff\" />\n                ) : (\n                  <>\n                    <Ionicons name=\"link-outline\" size={20} color=\"#fff\" />\n                    <Text style={styles.buttonText}>Connect & Load Tables</Text>\n                  </>\n                )}\n              </AnimatedPressable>\n            </GlassCard>\n          </Animated.View>\n\n          {/* Tables */}\n          {tables.length > 0 && (\n            <Animated.View entering={FadeInDown.delay(300).springify()}>\n              <GlassCard variant=\"light\" padding={auroraTheme.spacing.md} borderRadius={auroraTheme.borderRadius.lg} style={styles.section}>\n                <View style={styles.sectionHeader}>\n                  <Ionicons name=\"list-outline\" size={20} color={auroraTheme.colors.primary[500]} />\n                  <Text style={styles.sectionTitle}>Select Table ({tables.length})</Text>\n                </View>\n\n                <ScrollView style={{ maxHeight: 200 }} nestedScrollEnabled>\n                  {tables.map((table) => (\n                    <AnimatedPressable\n                      key={table.name}\n                      style={[\n                        styles.tableItem,\n                        selectedTable === table.name && {\n                          backgroundColor: auroraTheme.colors.primary[500] + \"20\",\n                          borderColor: auroraTheme.colors.primary[500],\n                        },\n                      ]}\n                      onPress={() => handleLoadColumns(table.name)}\n                    >\n                      <Ionicons\n                        name={selectedTable === table.name ? \"radio-button-on\" : \"radio-button-off\"}\n                        size={20}\n                        color={selectedTable === table.name ? auroraTheme.colors.primary[500] : auroraTheme.colors.text.tertiary}\n                      />\n                      <Text style={[styles.tableName, selectedTable === table.name && { color: auroraTheme.colors.primary[500], fontWeight: 'bold' }]}>\n                        {table.schema}.{table.name}\n                      </Text>\n                    </AnimatedPressable>\n                  ))}\n                </ScrollView>\n              </GlassCard>\n            </Animated.View>\n          )}\n\n          {/* Column Mapping */}\n          {selectedTable && columns.length > 0 && (\n            <Animated.View entering={FadeInDown.delay(400).springify()}>\n              <GlassCard variant=\"light\" padding={auroraTheme.spacing.md} borderRadius={auroraTheme.borderRadius.lg} style={styles.section}>\n                <View style={styles.sectionHeader}>\n                  <Ionicons name=\"git-merge-outline\" size={20} color={auroraTheme.colors.primary[500]} />\n                  <Text style={styles.sectionTitle}>Map Columns ({columns.length} source cols)</Text>\n                </View>\n\n                {appFields.map((field) => {\n                  const mappedColumn = mapping[field.key];\n                  return (\n                    <View key={field.key} style={styles.mappingRow}>\n                      <View style={styles.mappingHeader}>\n                        <Text style={styles.fieldLabel}>\n                          {field.label}\n                          {field.required && <Text style={{ color: auroraTheme.colors.error[500] }}> *</Text>}\n                        </Text>\n                      </View>\n\n                      <AnimatedPressable\n                        style={[\n                          styles.columnSelector,\n                          mappedColumn && { backgroundColor: auroraTheme.colors.success[500] + \"10\", borderColor: auroraTheme.colors.success[500] }\n                        ]}\n                        onPress={() => handleSelectColumn(field.key)}\n                      >\n                        <Text style={[\n                          styles.columnSelectorText,\n                          mappedColumn ? { color: auroraTheme.colors.success[500], fontWeight: '600' } : { color: auroraTheme.colors.text.tertiary }\n                        ]}>\n                          {mappedColumn ? mappedColumn.erp_column : \"Select source column...\"}\n                        </Text>\n                        <Ionicons\n                          name={mappedColumn ? \"checkmark-circle\" : \"chevron-down\"}\n                          size={20}\n                          color={mappedColumn ? auroraTheme.colors.success[500] : auroraTheme.colors.text.tertiary}\n                        />\n                      </AnimatedPressable>\n                    </View>\n                  );\n                })}\n              </GlassCard>\n\n              <View style={styles.actions}>\n                <AnimatedPressable\n                  style={[styles.actionButton, { backgroundColor: auroraTheme.colors.warning[500], flex: 1 }]}\n                  onPress={handleTestMapping}\n                  disabled={loading}\n                >\n                  <Ionicons name=\"construct-outline\" size={20} color=\"#fff\" />\n                  <Text style={styles.buttonText}>Test Mapping</Text>\n                </AnimatedPressable>\n\n                <AnimatedPressable\n                  style={[styles.actionButton, { backgroundColor: auroraTheme.colors.primary[500], flex: 1 }]}\n                  onPress={handleSaveMapping}\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <LoadingSpinner size={20} color=\"#fff\" />\n                  ) : (\n                    <>\n                      <Ionicons name=\"save-outline\" size={20} color=\"#fff\" />\n                      <Text style={styles.buttonText}>Save Configuration</Text>\n                    </>\n                  )}\n                </AnimatedPressable>\n              </View>\n            </Animated.View>\n          )}\n        </ScrollView>\n\n        {/* Column Selection Modal */}\n        <Modal\n          visible={showColumnModal}\n          transparent\n          animationType=\"fade\"\n          onRequestClose={() => setShowColumnModal(false)}\n        >\n          <AuroraBackground variant=\"primary\" intensity=\"high\" style={styles.modalOverlay}>\n            <GlassCard variant=\"modal\" padding={auroraTheme.spacing.lg} borderRadius={auroraTheme.borderRadius.xl} style={styles.modalContent}>\n              <View style={styles.modalHeader}>\n                <View>\n                  <Text style={styles.modalTitle}>Select Column</Text>\n                  <Text style={styles.modalSubtitle}>For {appFields.find((f) => f.key === selectedAppField)?.label}</Text>\n                </View>\n                <AnimatedPressable onPress={() => setShowColumnModal(false)}>\n                  <Ionicons name=\"close\" size={24} color={auroraTheme.colors.text.primary} />\n                </AnimatedPressable>\n              </View>\n\n              <ScrollView style={styles.modalScroll}>\n                {columns.map((column) => (\n                  <AnimatedPressable\n                    key={column.name}\n                    style={styles.columnItem}\n                    onPress={() => handleMapColumn(column.name)}\n                  >\n                    <View style={styles.columnInfo}>\n                      <Text style={styles.columnName}>{column.name}</Text>\n                      <View style={styles.columnMetaRec}>\n                        <Text style={styles.columnType}>{column.data_type.toUpperCase()}</Text>\n                        {column.max_length && <Text style={styles.columnMeta}>Length: {column.max_length}</Text>}\n                        {column.nullable && <Text style={styles.columnMeta}>Nullable</Text>}\n                      </View>\n                    </View>\n                    <Ionicons name=\"add-circle-outline\" size={24} color={auroraTheme.colors.primary[500]} />\n                  </AnimatedPressable>\n                ))}\n              </ScrollView>\n            </GlassCard>\n          </AuroraBackground>\n        </Modal>\n\n      </View>\n    </AuroraBackground>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingTop: 60,\n    paddingHorizontal: auroraTheme.spacing.md,\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: auroraTheme.spacing.md,\n  },\n  headerLeft: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: auroraTheme.spacing.md,\n  },\n  backButton: {\n    padding: auroraTheme.spacing.xs,\n    backgroundColor: auroraTheme.colors.background.glass,\n    borderRadius: auroraTheme.borderRadius.full,\n    borderWidth: 1,\n    borderColor: auroraTheme.colors.border.light,\n  },\n  pageTitle: {\n    fontFamily: auroraTheme.typography.fontFamily.heading,\n    fontSize: auroraTheme.typography.fontSize[\"2xl\"],\n    color: auroraTheme.colors.text.primary,\n    fontWeight: \"700\",\n  },\n  pageSubtitle: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  section: {\n    marginBottom: auroraTheme.spacing.lg,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    marginBottom: auroraTheme.spacing.md,\n    paddingBottom: auroraTheme.spacing.xs,\n    borderBottomWidth: 1,\n    borderBottomColor: auroraTheme.colors.border.light,\n  },\n  sectionTitle: {\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: 'bold',\n    color: auroraTheme.colors.text.primary,\n  },\n  inputGrid: {\n    flexDirection: 'row',\n    gap: auroraTheme.spacing.md,\n    marginBottom: auroraTheme.spacing.md,\n  },\n  inputContainer: {\n    flex: 1,\n  },\n  label: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.secondary,\n    marginBottom: 6,\n    fontWeight: '600',\n  },\n  input: {\n    backgroundColor: \"rgba(255,255,255,0.05)\",\n    color: auroraTheme.colors.text.primary,\n    padding: 12,\n    borderRadius: auroraTheme.borderRadius.md,\n    fontSize: auroraTheme.typography.fontSize.md,\n    borderWidth: 1,\n    borderColor: auroraTheme.colors.border.light,\n  },\n  button: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: 14,\n    borderRadius: auroraTheme.borderRadius.full,\n    gap: 8,\n    marginTop: auroraTheme.spacing.xs,\n  },\n  buttonText: {\n    color: \"#fff\",\n    fontSize: auroraTheme.typography.fontSize.md,\n    fontWeight: \"600\",\n  },\n  tableItem: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    padding: 12,\n    borderRadius: auroraTheme.borderRadius.md,\n    marginBottom: 8,\n    gap: 12,\n    borderWidth: 1,\n    borderColor: 'transparent',\n  },\n  tableName: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    color: auroraTheme.colors.text.primary,\n  },\n  mappingRow: {\n    marginBottom: auroraTheme.spacing.md,\n  },\n  mappingHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 6,\n  },\n  fieldLabel: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.primary,\n    fontWeight: '600',\n  },\n  columnSelector: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: 12,\n    borderRadius: auroraTheme.borderRadius.md,\n    borderWidth: 1,\n    borderColor: auroraTheme.colors.border.light,\n    backgroundColor: \"rgba(255,255,255,0.03)\",\n  },\n  columnSelectorText: {\n    fontSize: auroraTheme.typography.fontSize.md,\n  },\n  actions: {\n    flexDirection: 'row',\n    gap: auroraTheme.spacing.md,\n    paddingVertical: auroraTheme.spacing.md,\n  },\n  actionButton: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: 14,\n    borderRadius: auroraTheme.borderRadius.full,\n    gap: 8,\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 20,\n    backgroundColor: 'rgba(0,0,0,0.8)',\n  },\n  modalContent: {\n    width: \"100%\",\n    maxWidth: 500,\n    maxHeight: \"80%\",\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: auroraTheme.spacing.md,\n    paddingBottom: auroraTheme.spacing.md,\n    borderBottomWidth: 1,\n    borderBottomColor: auroraTheme.colors.border.light,\n  },\n  modalTitle: {\n    fontSize: auroraTheme.typography.fontSize.xl,\n    fontWeight: 'bold',\n    color: auroraTheme.colors.text.primary,\n  },\n  modalSubtitle: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n  },\n  modalScroll: {\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  columnItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: 'rgba(255,255,255,0.05)',\n  },\n  columnInfo: {\n    gap: 4,\n  },\n  columnName: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    color: auroraTheme.colors.text.primary,\n    fontWeight: '500',\n    fontFamily: Platform.OS === 'ios' ? 'Menlo' : 'monospace',\n  },\n  columnMetaRec: {\n    flexDirection: 'row',\n    gap: 8,\n    alignItems: 'center',\n  },\n  columnType: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.primary[500],\n    fontWeight: 'bold',\n  },\n  columnMeta: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.tertiary,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/error-logs.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":58,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Error Logs Screen - View application errors and exceptions for monitoring\n * Refactored to use Aurora Design System\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  RefreshControl,\n  ScrollView,\n  Modal,\n  TextInput,\n  Platform,\n} from \"react-native\";\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useRouter } from \"expo-router\";\nimport { StatusBar } from \"expo-status-bar\";\nimport Animated, { FadeInDown } from \"react-native-reanimated\";\nimport * as Haptics from \"expo-haptics\";\nimport { FlashList } from \"@shopify/flash-list\";\n\nimport {\n  getErrorLogs,\n  getErrorStats,\n  getErrorDetail,\n  resolveError,\n} from \"../../src/services/api/api\";\nimport { useToast } from \"../../src/components/feedback/ToastProvider\";\nimport { AuroraBackground, GlassCard, StatsCard, AnimatedPressable, ScreenHeader } from \"../../src/components/ui\";\nimport { auroraTheme } from \"../../src/theme/auroraTheme\";\n\ninterface ErrorLog {\n  id: string;\n  timestamp: string;\n  error_type: string;\n  error_message: string;\n  error_code?: string;\n  severity: string;\n  endpoint?: string;\n  method?: string;\n  user?: string;\n  role?: string;\n  ip_address?: string;\n  resolved: boolean;\n  resolved_at?: string;\n  resolved_by?: string;\n  resolution_note?: string;\n  stack_trace?: string;\n  stack_trace_preview?: string;\n  request_data?: any;\n  context?: any;\n}\n\nexport default function ErrorLogsScreen() {\n  const router = useRouter();\n  const { show } = useToast();\n\n  const [errors, setErrors] = useState<ErrorLog[]>([]);\n  const [stats, setStats] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [selectedError, setSelectedError] = useState<ErrorLog | null>(null);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [showResolveModal, setShowResolveModal] = useState(false);\n  const [resolutionNote, setResolutionNote] = useState(\"\");\n  const [resolving, setResolving] = useState(false);\n  const [filters, setFilters] = useState({\n    severity: \"\",\n    resolved: undefined as boolean | undefined,\n  });\n\n  const loadErrors = React.useCallback(\n    async (pageNum: number = 1) => {\n      try {\n        setLoading(pageNum === 1);\n        const response = await getErrorLogs(\n          pageNum,\n          20,\n          filters.severity || undefined,\n          undefined,\n          undefined,\n          filters.resolved,\n        );\n        if (pageNum === 1) {\n          setErrors(response.errors || []);\n        } else {\n          setErrors((prevErrors) => [\n            ...prevErrors,\n            ...(response.errors || []),\n          ]);\n        }\n        setHasMore(response.pagination?.has_next || false);\n      } catch {\n        show(\"Failed to load error logs\", \"error\");\n        if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      } finally {\n        setLoading(false);\n        setRefreshing(false);\n      }\n    },\n    [filters, show],\n  );\n\n  const loadStats = React.useCallback(async () => {\n    try {\n      const statsData = await getErrorStats();\n      setStats(statsData);\n    } catch (error: any) {\n      console.error(\"Failed to load stats:\", error);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadErrors();\n    loadStats();\n  }, [loadErrors, loadStats]);\n\n  const handleRefresh = async () => {\n    if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    setRefreshing(true);\n    setPage(1);\n    await Promise.all([loadErrors(1), loadStats()]);\n    setRefreshing(false);\n  };\n\n  const loadMore = () => {\n    if (hasMore && !loading) {\n      if (Platform.OS !== \"web\") Haptics.selectionAsync();\n      const nextPage = page + 1;\n      setPage(nextPage);\n      loadErrors(nextPage);\n    }\n  };\n\n  const handleErrorClick = async (error: ErrorLog) => {\n    if (Platform.OS !== \"web\") Haptics.selectionAsync();\n    try {\n      const detail = await getErrorDetail(error.id);\n      setSelectedError(detail);\n      setShowDetailModal(true);\n    } catch (error: any) {\n      show(`Failed to load error details: ${error.message}`, \"error\");\n    }\n  };\n\n  const handleResolve = async () => {\n    if (!selectedError) return;\n\n    try {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      setResolving(true);\n      await resolveError(selectedError.id, resolutionNote);\n      show(\"Error marked as resolved\", \"success\");\n      setShowResolveModal(false);\n      setShowDetailModal(false);\n      setResolutionNote(\"\");\n      handleRefresh();\n    } catch (error: any) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      show(`Failed to resolve error: ${error.message}`, \"error\");\n    } finally {\n      setResolving(false);\n    }\n  };\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    return date.toLocaleString();\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case \"critical\":\n        return auroraTheme.colors.error[500];\n      case \"error\":\n        return auroraTheme.colors.error[500];\n      case \"warning\":\n        return auroraTheme.colors.warning[500];\n      case \"info\":\n        return auroraTheme.colors.primary[500];\n      default:\n        return auroraTheme.colors.text.secondary;\n    }\n  };\n\n  const getSeverityIcon = (severity: string) => {\n    switch (severity) {\n      case \"critical\":\n        return \"alert-circle\";\n      case \"error\":\n        return \"close-circle\";\n      case \"warning\":\n        return \"warning\";\n      case \"info\":\n        return \"information-circle\";\n      default:\n        return \"ellipse\";\n    }\n  };\n\n  const renderErrorItem = ({ item: error }: { item: ErrorLog }) => (\n    <AnimatedPressable onPress={() => handleErrorClick(error)} style={{ marginBottom: auroraTheme.spacing.md }}>\n      <GlassCard variant=\"light\" padding={auroraTheme.spacing.md} borderRadius={auroraTheme.borderRadius.lg} style={{ borderColor: error.severity === 'critical' ? auroraTheme.colors.error[500] : undefined }}>\n        <View style={styles.errorHeader}>\n          <View style={styles.errorHeaderLeft}>\n            <View style={[styles.iconContainer, { backgroundColor: getSeverityColor(error.severity) + '20' }]}>\n              <Ionicons\n                name={getSeverityIcon(error.severity) as any}\n                size={20}\n                color={getSeverityColor(error.severity)}\n              />\n            </View>\n            <View style={styles.errorInfo}>\n              <Text style={styles.errorType}>{error.error_type}</Text>\n              <Text style={styles.errorMessage} numberOfLines={1}>\n                {error.error_message}\n              </Text>\n            </View>\n          </View>\n          <GlassCard variant=\"dark\" intensity={10} padding={auroraTheme.spacing.xs} borderRadius={auroraTheme.borderRadius.full}>\n            <Text style={[styles.severityText, { color: getSeverityColor(error.severity) }]}>\n              {error.severity.toUpperCase()}\n            </Text>\n          </GlassCard>\n        </View>\n\n        <View style={styles.errorMeta}>\n          <View style={styles.metaRow}>\n            <Ionicons name=\"time-outline\" size={14} color={auroraTheme.colors.text.tertiary} />\n            <Text style={styles.metaText}>{formatTimestamp(error.timestamp)}</Text>\n          </View>\n          {error.endpoint && (\n            <View style={styles.metaRow}>\n              <Ionicons name=\"globe-outline\" size={14} color={auroraTheme.colors.text.tertiary} />\n              <Text style={styles.metaText}>{error.method} {error.endpoint}</Text>\n            </View>\n          )}\n          {error.user && (\n            <View style={styles.metaRow}>\n              <Ionicons name=\"person-outline\" size={14} color={auroraTheme.colors.text.tertiary} />\n              <Text style={styles.metaText}>{error.user}</Text>\n            </View>\n          )}\n        </View>\n\n        {error.resolved && (\n          <GlassCard variant=\"medium\" padding={auroraTheme.spacing.sm} borderRadius={auroraTheme.borderRadius.md} style={styles.resolvedBadge}>\n            <Ionicons name=\"checkmark-circle\" size={16} color={auroraTheme.colors.success[500]} />\n            <Text style={styles.resolvedText}>\n              Resolved by {error.resolved_by}\n            </Text>\n          </GlassCard>\n        )}\n      </GlassCard>\n    </AnimatedPressable>\n  );\n\n  return (\n    <AuroraBackground>\n      <StatusBar style=\"light\" />\n      <View style={styles.container}>\n        {/* Header */}\n        <ScreenHeader\n          title=\"Error Monitoring\"\n          subtitle=\"System exceptions & failures\"\n          showBackButton={true}\n          showLogoutButton={false}\n        />\n\n        {stats && (\n          <Animated.View entering={FadeInDown.delay(200).springify()} style={styles.statsContainer}>\n            <StatsCard\n              title=\"Total Errors\"\n              value={stats.total?.toString() || \"0\"}\n              icon=\"bug-outline\"\n              variant=\"primary\"\n              style={{ flex: 1 }}\n            />\n            <StatsCard\n              title=\"Critical\"\n              value={`${stats.by_severity?.critical || 0}`}\n              icon=\"alert-circle-outline\"\n              variant=\"error\"\n              style={{ flex: 1 }}\n            />\n            <StatsCard\n              title=\"Unresolved\"\n              value={`${stats.unresolved || 0}`}\n              icon=\"time-outline\"\n              variant=\"warning\"\n              style={{ flex: 1 }}\n            />\n          </Animated.View>\n        )}\n\n        {/* Filters */}\n        <Animated.View entering={FadeInDown.delay(300).springify()} style={styles.filtersContainer}>\n          <ScrollView horizontal showsHorizontalScrollIndicator={false} contentContainerStyle={styles.filtersScroll}>\n            <AnimatedPressable\n              onPress={() => setFilters({ ...filters, severity: \"\" })}\n              style={{ marginRight: auroraTheme.spacing.sm }}\n            >\n              <GlassCard variant={filters.severity === \"\" ? \"medium\" : \"light\"} padding={8} borderRadius={auroraTheme.borderRadius.full} style={filters.severity === \"\" && { borderColor: auroraTheme.colors.primary[500], borderWidth: 1 }}>\n                <Text style={[styles.filterText, filters.severity === \"\" && { color: auroraTheme.colors.primary[500] }]}>All Severities</Text>\n              </GlassCard>\n            </AnimatedPressable>\n            {[\"critical\", \"error\", \"warning\"].map((sev) => (\n              <AnimatedPressable\n                key={sev}\n                onPress={() => setFilters({ ...filters, severity: sev })}\n                style={{ marginRight: auroraTheme.spacing.sm }}\n              >\n                <GlassCard variant={filters.severity === sev ? \"medium\" : \"light\"} padding={8} borderRadius={auroraTheme.borderRadius.full} style={filters.severity === sev && { borderColor: getSeverityColor(sev), borderWidth: 1 }}>\n                  <Text style={[styles.filterText, filters.severity === sev && { color: getSeverityColor(sev) }]}>{sev.charAt(0).toUpperCase() + sev.slice(1)}</Text>\n                </GlassCard>\n              </AnimatedPressable>\n            ))}\n          </ScrollView>\n          <ScrollView horizontal showsHorizontalScrollIndicator={false} contentContainerStyle={[styles.filtersScroll, { marginTop: auroraTheme.spacing.sm }]}>\n            <AnimatedPressable\n              onPress={() => setFilters({ ...filters, resolved: undefined })}\n              style={{ marginRight: auroraTheme.spacing.sm }}\n            >\n              <GlassCard variant={filters.resolved === undefined ? \"medium\" : \"light\"} padding={8} borderRadius={auroraTheme.borderRadius.full} style={filters.resolved === undefined && { borderColor: auroraTheme.colors.primary[500], borderWidth: 1 }}>\n                <Text style={[styles.filterText, filters.resolved === undefined && { color: auroraTheme.colors.primary[500] }]}>All Status</Text>\n              </GlassCard>\n            </AnimatedPressable>\n            <AnimatedPressable\n              onPress={() => setFilters({ ...filters, resolved: false })}\n              style={{ marginRight: auroraTheme.spacing.sm }}\n            >\n              <GlassCard variant={filters.resolved === false ? \"medium\" : \"light\"} padding={8} borderRadius={auroraTheme.borderRadius.full} style={filters.resolved === false && { borderColor: auroraTheme.colors.warning[500], borderWidth: 1 }}>\n                <Text style={[styles.filterText, filters.resolved === false && { color: auroraTheme.colors.warning[500] }]}>Unresolved</Text>\n              </GlassCard>\n            </AnimatedPressable>\n            <AnimatedPressable\n              onPress={() => setFilters({ ...filters, resolved: true })}\n              style={{ marginRight: auroraTheme.spacing.sm }}\n            >\n              <GlassCard variant={filters.resolved === true ? \"medium\" : \"light\"} padding={8} borderRadius={auroraTheme.borderRadius.full} style={filters.resolved === true && { borderColor: auroraTheme.colors.success[500], borderWidth: 1 }}>\n                <Text style={[styles.filterText, filters.resolved === true && { color: auroraTheme.colors.success[500] }]}>Resolved</Text>\n              </GlassCard>\n            </AnimatedPressable>\n          </ScrollView>\n        </Animated.View>\n\n        <View style={styles.listContainer}>\n          {loading && errors.length === 0 ? (\n            <View style={styles.loadingContainer}>\n              <LoadingSpinner size={48} color={auroraTheme.colors.primary[500]} />\n              <Text style={styles.loadingText}>Loading error logs...</Text>\n            </View>\n          ) : (\n            <FlashList\n              data={errors}\n              renderItem={renderErrorItem}\n              // @ts-ignore\n              estimatedItemSize={200}\n              keyExtractor={(item) => item.id}\n              refreshControl={\n                <RefreshControl refreshing={refreshing} onRefresh={handleRefresh} tintColor={auroraTheme.colors.primary[500]} />\n              }\n              onEndReached={loadMore}\n              onEndReachedThreshold={0.5}\n              ListEmptyComponent={\n                <View style={styles.emptyContainer}>\n                  <Ionicons name=\"checkmark-circle-outline\" size={64} color={auroraTheme.colors.success[500]} />\n                  <Text style={styles.emptyText}>No errors found</Text>\n                </View>\n              }\n              ListFooterComponent={\n                loading && errors.length > 0 ? (\n                  <View style={{ padding: 20 }}>\n                    <LoadingSpinner size={20} color={auroraTheme.colors.primary[500]} />\n                  </View>\n                ) : null\n              }\n              contentContainerStyle={{ paddingBottom: auroraTheme.spacing.xl }}\n            />\n          )}\n        </View>\n\n        {/* Error Detail Modal */}\n        <Modal\n          visible={showDetailModal}\n          animationType=\"fade\"\n          transparent={true}\n          onRequestClose={() => setShowDetailModal(false)}\n        >\n          <AuroraBackground variant=\"primary\" intensity=\"high\" style={styles.modalOverlay}>\n            <GlassCard variant=\"modal\" padding={auroraTheme.spacing.lg} borderRadius={auroraTheme.borderRadius.xl} style={styles.modalContent}>\n              <View style={styles.modalHeader}>\n                <Text style={styles.modalTitle}>Error Details</Text>\n                <AnimatedPressable onPress={() => setShowDetailModal(false)}>\n                  <Ionicons name=\"close\" size={24} color={auroraTheme.colors.text.primary} />\n                </AnimatedPressable>\n              </View>\n\n              {selectedError && (\n                <Animated.ScrollView style={styles.modalBody}>\n                  <View style={[styles.detailBadge, { backgroundColor: getSeverityColor(selectedError.severity) + '20' }]}>\n                    <Text style={[styles.detailBadgeText, { color: getSeverityColor(selectedError.severity) }]}>{selectedError.severity.toUpperCase()}</Text>\n                  </View>\n\n                  <Text style={styles.detailMessage}>{selectedError.error_message}</Text>\n                  <Text style={styles.detailType}>{selectedError.error_type}</Text>\n\n                  <View style={styles.separator} />\n\n                  <View style={styles.detailRow}>\n                    <Text style={styles.detailLabel}>Timestamp</Text>\n                    <Text style={styles.detailValue}>{formatTimestamp(selectedError.timestamp)}</Text>\n                  </View>\n\n                  {selectedError.error_code && (\n                    <View style={styles.detailRow}>\n                      <Text style={styles.detailLabel}>Error Code</Text>\n                      <Text style={styles.detailValue}>{selectedError.error_code}</Text>\n                    </View>\n                  )}\n\n                  {selectedError.endpoint && (\n                    <View style={styles.detailRow}>\n                      <Text style={styles.detailLabel}>Endpoint</Text>\n                      <Text style={styles.detailValue}>{selectedError.method} {selectedError.endpoint}</Text>\n                    </View>\n                  )}\n\n                  {selectedError.stack_trace && (\n                    <View style={styles.stackTraceContainer}>\n                      <Text style={styles.stackTraceLabel}>Stack Trace</Text>\n                      <GlassCard variant=\"dark\" padding={auroraTheme.spacing.sm} borderRadius={auroraTheme.borderRadius.md}>\n                        <Text style={styles.stackTraceText}>{selectedError.stack_trace}</Text>\n                      </GlassCard>\n                    </View>\n                  )}\n\n                  {selectedError.resolved && selectedError.resolution_note && (\n                    <View style={styles.resolutionContainer}>\n                      <Text style={styles.resolutionLabel}>Resolution</Text>\n                      <GlassCard variant=\"medium\" padding={auroraTheme.spacing.md} borderRadius={auroraTheme.borderRadius.md} style={{ borderColor: auroraTheme.colors.success[500] }}>\n                        <Text style={styles.resolutionText}>{selectedError.resolution_note}</Text>\n                        <View style={styles.resolverInfo}>\n                          <Ionicons name=\"checkmark-circle\" size={14} color={auroraTheme.colors.success[500]} />\n                          <Text style={styles.resolverText}>Resolved by {selectedError.resolved_by}</Text>\n                        </View>\n                      </GlassCard>\n                    </View>\n                  )}\n                </Animated.ScrollView>\n              )}\n\n              <View style={styles.modalFooter}>\n                {selectedError && !selectedError.resolved && (\n                  <AnimatedPressable\n                    style={[styles.resolveButton, { backgroundColor: auroraTheme.colors.success[500] }]}\n                    onPress={() => {\n                      setShowDetailModal(false);\n                      setShowResolveModal(true);\n                    }}\n                  >\n                    <Ionicons name=\"checkmark-circle\" size={20} color=\"white\" />\n                    <Text style={styles.resolveButtonText}>Mark as Resolved</Text>\n                  </AnimatedPressable>\n                )}\n              </View>\n            </GlassCard>\n          </AuroraBackground>\n        </Modal>\n\n        {/* Resolve Modal */}\n        <Modal\n          visible={showResolveModal}\n          animationType=\"fade\"\n          transparent={true}\n          onRequestClose={() => setShowResolveModal(false)}\n        >\n          <AuroraBackground variant=\"primary\" intensity=\"high\" style={styles.modalOverlay}>\n            <GlassCard variant=\"modal\" padding={auroraTheme.spacing.lg} borderRadius={auroraTheme.borderRadius.xl} style={styles.modalContent}>\n              <View style={styles.modalHeader}>\n                <Text style={styles.modalTitle}>Resolve Error</Text>\n                <AnimatedPressable onPress={() => setShowResolveModal(false)}>\n                  <Ionicons name=\"close\" size={24} color={auroraTheme.colors.text.primary} />\n                </AnimatedPressable>\n              </View>\n\n              <View style={styles.resolveBody}>\n                <Text style={styles.inputLabel}>Resolution Note (Optional)</Text>\n                <TextInput\n                  style={styles.modalInput}\n                  placeholder=\"Describe how this was resolved...\"\n                  placeholderTextColor={auroraTheme.colors.text.tertiary}\n                  value={resolutionNote}\n                  onChangeText={setResolutionNote}\n                  multiline\n                  numberOfLines={4}\n                />\n              </View>\n\n              <AnimatedPressable\n                style={[styles.resolveButton, { backgroundColor: auroraTheme.colors.success[500], marginTop: auroraTheme.spacing.lg }]}\n                onPress={handleResolve}\n                disabled={resolving}\n              >\n                {resolving ? (\n                  <LoadingSpinner size={20} color=\"#fff\" />\n                ) : (\n                  <>\n                    <Ionicons name=\"checkmark-circle\" size={20} color=\"#fff\" />\n                    <Text style={styles.resolveButtonText}>Confirm Resolution</Text>\n                  </>\n                )}\n              </AnimatedPressable>\n            </GlassCard>\n          </AuroraBackground>\n        </Modal>\n      </View>\n    </AuroraBackground>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingTop: 60,\n    paddingHorizontal: auroraTheme.spacing.md,\n  },\n  header: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: auroraTheme.spacing.md,\n  },\n  headerLeft: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: auroraTheme.spacing.md,\n  },\n  backButton: {\n    padding: auroraTheme.spacing.xs,\n    backgroundColor: auroraTheme.colors.background.glass,\n    borderRadius: auroraTheme.borderRadius.full,\n    borderWidth: 1,\n    borderColor: auroraTheme.colors.border.light,\n  },\n  pageTitle: {\n    fontFamily: auroraTheme.typography.fontFamily.heading,\n    fontSize: auroraTheme.typography.fontSize[\"2xl\"],\n    color: auroraTheme.colors.text.primary,\n    fontWeight: \"700\",\n  },\n  pageSubtitle: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n  },\n  statsContainer: {\n    flexDirection: \"row\",\n    gap: auroraTheme.spacing.sm,\n    marginBottom: auroraTheme.spacing.md,\n  },\n  filtersContainer: {\n    marginBottom: auroraTheme.spacing.md,\n  },\n  filtersScroll: {\n    paddingBottom: 4,\n  },\n  filterText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    fontWeight: '600',\n    color: auroraTheme.colors.text.secondary,\n  },\n  listContainer: {\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: auroraTheme.spacing.md,\n    color: auroraTheme.colors.text.secondary,\n    fontSize: auroraTheme.typography.fontSize.md,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingTop: 100,\n  },\n  emptyText: {\n    marginTop: auroraTheme.spacing.md,\n    color: auroraTheme.colors.text.tertiary,\n    fontSize: auroraTheme.typography.fontSize.lg,\n  },\n  errorHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  errorHeaderLeft: {\n    flexDirection: 'row',\n    flex: 1,\n    gap: auroraTheme.spacing.md,\n  },\n  iconContainer: {\n    width: 40,\n    height: 40,\n    borderRadius: auroraTheme.borderRadius.full,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  errorInfo: {\n    flex: 1,\n  },\n  errorType: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontWeight: '700',\n    color: auroraTheme.colors.text.primary,\n  },\n  errorMessage: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n  },\n  severityText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    fontWeight: 'bold',\n  },\n  errorMeta: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: auroraTheme.spacing.md,\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  metaRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  metaText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.tertiary,\n  },\n  resolvedBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    alignSelf: 'flex-start',\n    marginTop: auroraTheme.spacing.xs,\n    backgroundColor: 'rgba(16, 185, 129, 0.1)',\n    borderColor: auroraTheme.colors.success[500],\n  },\n  resolvedText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.success[500],\n    fontWeight: '600',\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 20,\n    backgroundColor: 'rgba(0,0,0,0.8)',\n  },\n  modalContent: {\n    width: \"100%\",\n    maxWidth: 600,\n    maxHeight: \"80%\",\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: auroraTheme.spacing.lg,\n  },\n  modalTitle: {\n    fontSize: auroraTheme.typography.fontSize.xl,\n    fontWeight: 'bold',\n    color: auroraTheme.colors.text.primary,\n  },\n  modalBody: {\n    marginBottom: auroraTheme.spacing.lg,\n  },\n  detailBadge: {\n    alignSelf: 'flex-start',\n    paddingHorizontal: 12,\n    paddingVertical: 4,\n    borderRadius: auroraTheme.borderRadius.full,\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  detailBadgeText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    fontWeight: 'bold',\n  },\n  detailMessage: {\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: 'bold',\n    color: auroraTheme.colors.text.primary,\n    marginBottom: 4,\n  },\n  detailType: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    color: auroraTheme.colors.text.tertiary,\n    marginBottom: auroraTheme.spacing.lg,\n    fontFamily: Platform.OS === 'ios' ? 'Menlo' : 'monospace',\n  },\n  separator: {\n    height: 1,\n    backgroundColor: auroraTheme.colors.border.light,\n    marginBottom: auroraTheme.spacing.lg,\n  },\n  detailRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: auroraTheme.spacing.md,\n  },\n  detailLabel: {\n    color: auroraTheme.colors.text.tertiary,\n    fontSize: auroraTheme.typography.fontSize.sm,\n  },\n  detailValue: {\n    color: auroraTheme.colors.text.primary,\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontWeight: '600',\n  },\n  stackTraceContainer: {\n    marginTop: auroraTheme.spacing.md,\n  },\n  stackTraceLabel: {\n    color: auroraTheme.colors.text.tertiary,\n    fontSize: auroraTheme.typography.fontSize.sm,\n    marginBottom: 8,\n  },\n  stackTraceText: {\n    color: auroraTheme.colors.text.secondary,\n    fontSize: auroraTheme.typography.fontSize.xs,\n    fontFamily: Platform.OS === 'ios' ? 'Menlo' : 'monospace',\n  },\n  resolutionContainer: {\n    marginTop: auroraTheme.spacing.lg,\n  },\n  resolutionLabel: {\n    color: auroraTheme.colors.text.tertiary,\n    fontSize: auroraTheme.typography.fontSize.sm,\n    marginBottom: 8,\n  },\n  resolutionText: {\n    color: auroraTheme.colors.text.primary,\n    fontSize: auroraTheme.typography.fontSize.sm,\n    marginBottom: 8,\n  },\n  resolverInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  resolverText: {\n    color: auroraTheme.colors.success[500],\n    fontSize: auroraTheme.typography.fontSize.xs,\n  },\n  modalFooter: {\n    marginTop: auroraTheme.spacing.lg,\n  },\n  resolveButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    paddingVertical: 14,\n    borderRadius: auroraTheme.borderRadius.full,\n  },\n  resolveButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n    fontSize: auroraTheme.typography.fontSize.md,\n  },\n  resolveBody: {\n\n  },\n  inputLabel: {\n    color: auroraTheme.colors.text.secondary,\n    marginBottom: 8,\n  },\n  modalInput: {\n    backgroundColor: \"rgba(255,255,255,0.05)\",\n    color: auroraTheme.colors.text.primary,\n    padding: 12,\n    borderRadius: auroraTheme.borderRadius.md,\n    fontSize: auroraTheme.typography.fontSize.md,\n    minHeight: 100,\n    textAlignVertical: \"top\",\n    borderWidth: 1,\n    borderColor: auroraTheme.colors.border.light,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/export-results.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'hasPermission', 'loadResults', and 'router'. Either include them or remove the dependency array.","line":67,"column":6,"nodeType":"ArrayExpression","endLine":67,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [filterStatus, hasPermission, loadResults, router]","fix":{"range":[1961,1975],"text":"[filterStatus, hasPermission, loadResults, router]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/export-schedules.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'hasPermission' and 'router'. Either include them or remove the dependency array.","line":76,"column":6,"nodeType":"ArrayExpression","endLine":76,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [hasPermission, router]","fix":{"range":[2118,2120],"text":"[hasPermission, router]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/export.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LogoutButton' is defined but never used.","line":25,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":30,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Export Reports Screen\n * Refactored to use Aurora Design System\n */\n\nimport React from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  Alert,\n  Platform,\n} from \"react-native\";\nimport { useRouter } from \"expo-router\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { StatusBar } from \"expo-status-bar\";\nimport Animated, { FadeInDown } from \"react-native-reanimated\";\nimport * as Haptics from \"expo-haptics\";\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\n\nimport { getSessions } from \"../../src/services/api/api\";\nimport { ExportService } from \"../../src/services/exportService\";\nimport { useAutoLogout } from \"../../src/hooks/useAutoLogout\";\nimport { LogoutButton } from \"../../src/components/LogoutButton\";\nimport { AuroraBackground, GlassCard, AnimatedPressable, ScreenHeader } from \"../../src/components/ui\";\nimport { auroraTheme } from \"../../src/theme/auroraTheme\";\n\nexport default function ExportReports() {\n  const router = useRouter();\n  const [loading, setLoading] = React.useState(false);\n  const [exportType, setExportType] = React.useState<string | null>(null);\n  const { resetTimer } = useAutoLogout(true);\n\n  const handleInteraction = () => {\n    resetTimer();\n  };\n\n  const handleExportStart = (type: string) => {\n    if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    setLoading(true);\n    setExportType(type);\n  };\n\n  const handleExportEnd = () => {\n    setLoading(false);\n    setExportType(null);\n  };\n\n  const exportAllSessions = async () => {\n    try {\n      handleExportStart(\"sessions\");\n\n      console.log(\"ðŸ“Š [Export] Fetching all sessions for export...\");\n      const result = await getSessions(1, 10000); // Get all sessions\n      const sessions = result.items || [];\n\n      if (sessions.length === 0) {\n        Alert.alert(\"No Data\", \"No sessions available to export\");\n        return;\n      }\n\n      console.log(\"âœ… [Export] Exporting\", sessions.length, \"sessions\");\n      await ExportService.exportSessions(sessions);\n\n      Alert.alert(\n        \"Export Successful\",\n        `Exported ${sessions.length} sessions to Excel file`,\n        [{ text: \"OK\" }],\n      );\n    } catch (error: any) {\n      console.error(\"âŒ [Export] Session export failed:\", error);\n      Alert.alert(\n        \"Export Failed\",\n        error.message || \"Failed to export sessions. Please try again.\",\n      );\n    } finally {\n      handleExportEnd();\n    }\n  };\n\n  const exportSessionDetails = async () => {\n    try {\n      handleExportStart(\"details\");\n\n      Alert.alert(\n        \"Export Session Details\",\n        \"This will export detailed count lines for all sessions. Continue?\",\n        [\n          {\n            text: \"Cancel\",\n            style: \"cancel\",\n            onPress: handleExportEnd,\n          },\n          {\n            text: \"Export\",\n            onPress: async () => {\n              try {\n                const result = await getSessions(1, 10000);\n                const sessions = result.items || [];\n\n                if (sessions.length === 0) {\n                  Alert.alert(\"No Data\", \"No sessions available to export\");\n                  return;\n                }\n\n                await ExportService.exportSessionsWithDetails(sessions);\n                Alert.alert(\n                  \"Export Successful\",\n                  `Exported detailed data for ${sessions.length} sessions`,\n                  [{ text: \"OK\" }],\n                );\n              } catch (error: any) {\n                console.error(\"âŒ [Export] Details export failed:\", error);\n                Alert.alert(\"Export Failed\", error.message || \"Failed to export details\");\n              } finally {\n                handleExportEnd();\n              }\n            },\n          },\n        ],\n      );\n    } catch (error: any) {\n      console.error(\"âŒ [Export] Error:\", error);\n      handleExportEnd();\n    }\n  };\n\n  const exportVarianceReport = async () => {\n    try {\n      handleExportStart(\"variance\");\n\n      const result = await getSessions(1, 10000);\n      const sessions = result.items || [];\n\n      if (sessions.length === 0) {\n        Alert.alert(\"No Data\", \"No sessions available to export\");\n        return;\n      }\n\n      const varianceSessions = sessions.filter(\n        (s: any) => Math.abs(s.total_variance || 0) > 0,\n      );\n\n      if (varianceSessions.length === 0) {\n        Alert.alert(\"No Variance\", \"No sessions with variance found\");\n        return;\n      }\n\n      await ExportService.exportVarianceReport(varianceSessions);\n      Alert.alert(\n        \"Export Successful\",\n        `Exported variance report for ${varianceSessions.length} sessions`,\n        [{ text: \"OK\" }],\n      );\n    } catch (error: any) {\n      console.error(\"âŒ [Export] Variance report failed:\", error);\n      Alert.alert(\"Export Failed\", error.message || \"Failed to export variance report\");\n    } finally {\n      handleExportEnd();\n    }\n  };\n\n  const exportSummaryReport = async () => {\n    try {\n      handleExportStart(\"summary\");\n\n      const result = await getSessions(1, 10000);\n      const sessions = result.items || [];\n\n      if (sessions.length === 0) {\n        Alert.alert(\"No Data\", \"No sessions available to export\");\n        return;\n      }\n\n      await ExportService.exportSummaryReport(sessions);\n      Alert.alert(\n        \"Export Successful\",\n        `Exported summary report with ${sessions.length} sessions`,\n        [{ text: \"OK\" }],\n      );\n    } catch (error: any) {\n      console.error(\"âŒ [Export] Summary report failed:\", error);\n      Alert.alert(\"Export Failed\", error.message || \"Failed to export summary report\");\n    } finally {\n      handleExportEnd();\n    }\n  };\n\n  const RenderExportCard = ({\n    title,\n    description,\n    icon,\n    color,\n    onPress,\n    type,\n    delay\n  }: {\n    title: string;\n    description: string;\n    icon: keyof typeof Ionicons.glyphMap;\n    color: string;\n    onPress: () => void;\n    type: string;\n    delay: number;\n  }) => {\n    const isLoading = loading && exportType === type;\n    const isDisabled = loading && exportType !== type;\n\n    return (\n      <Animated.View entering={FadeInDown.delay(delay).springify()}>\n        <AnimatedPressable\n          onPress={onPress}\n          disabled={loading}\n          onPressIn={handleInteraction}\n          style={{ marginBottom: auroraTheme.spacing.md }}\n        >\n          <GlassCard\n            variant=\"medium\"\n            intensity={20}\n            padding={auroraTheme.spacing.md}\n            borderRadius={auroraTheme.borderRadius.lg}\n            style={isDisabled ? { opacity: 0.5 } : undefined}\n          >\n            <View style={styles.cardContent}>\n              <View style={[styles.iconContainer, { backgroundColor: `${color}20` }]}>\n                {isLoading ? (\n                  <LoadingSpinner size={20} color={color} />\n                ) : (\n                  <Ionicons name={icon} size={28} color={color} />\n                )}\n              </View>\n              <View style={styles.textContainer}>\n                <Text style={styles.cardTitle}>{title}</Text>\n                <Text style={styles.cardDescription}>{description}</Text>\n              </View>\n              <Ionicons\n                name=\"download-outline\"\n                size={20}\n                color={auroraTheme.colors.text.tertiary}\n                style={styles.actionIcon}\n              />\n            </View>\n          </GlassCard>\n        </AnimatedPressable>\n      </Animated.View>\n    );\n  };\n\n  return (\n    <AuroraBackground variant=\"secondary\" intensity=\"medium\" animated>\n      <StatusBar style=\"light\" />\n      <ScrollView\n        style={styles.container}\n        contentContainerStyle={styles.contentContainer}\n        showsVerticalScrollIndicator={false}\n      >\n        {/* Header */}\n        <ScreenHeader\n          title=\"Data Exports\"\n          subtitle=\"Generate & Download Reports\"\n          showBackButton={true}\n          showLogoutButton={true}\n        />\n\n        {/* Report Cards */}\n        <View style={styles.grid}>\n          <Text style={styles.sectionTitle}>Available Reports</Text>\n\n          <RenderExportCard\n            title=\"All Sessions\"\n            description=\"Complete list of all stock count sessions with basic details\"\n            icon=\"documents-outline\"\n            color={auroraTheme.colors.success[500]}\n            onPress={exportAllSessions}\n            type=\"sessions\"\n            delay={200}\n          />\n\n          <RenderExportCard\n            title=\"Session Details\"\n            description=\"Detailed count lines for all sessions including item-level data\"\n            icon=\"list-outline\"\n            color={auroraTheme.colors.primary[500]}\n            onPress={exportSessionDetails}\n            type=\"details\"\n            delay={300}\n          />\n\n          <RenderExportCard\n            title=\"Variance Report\"\n            description=\"Only sessions with stock variance for analysis\"\n            icon=\"analytics-outline\"\n            color={auroraTheme.colors.error[500]}\n            onPress={exportVarianceReport}\n            type=\"variance\"\n            delay={400}\n          />\n\n          <RenderExportCard\n            title=\"Summary Report\"\n            description=\"Aggregated statistics and summary across all sessions\"\n            icon=\"stats-chart-outline\"\n            color={auroraTheme.colors.warning[500]}\n            onPress={exportSummaryReport}\n            type=\"summary\"\n            delay={500}\n          />\n        </View>\n\n        {/* Info Section */}\n        <Animated.View entering={FadeInDown.delay(600).springify()}>\n          <View style={styles.infoContainer}>\n            <Ionicons name=\"information-circle-outline\" size={24} color={auroraTheme.colors.text.tertiary} />\n            <View style={styles.infoContent}>\n              <Text style={styles.infoTitle}>Export Information</Text>\n              <Text style={styles.infoText}>â€¢ Reports are generated in Excel format (.xlsx)</Text>\n              <Text style={styles.infoText}>â€¢ Files are saved to your device&apos;s Downloads folder</Text>\n              <Text style={styles.infoText}>â€¢ Large exports may take a few moments to generate</Text>\n            </View>\n          </View>\n        </Animated.View>\n\n        <View style={{ height: 40 }} />\n      </ScrollView>\n    </AuroraBackground>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    padding: auroraTheme.spacing.lg,\n  },\n  grid: {\n    marginBottom: auroraTheme.spacing.xl,\n  },\n  sectionTitle: {\n    fontFamily: auroraTheme.typography.fontFamily.heading,\n    fontSize: auroraTheme.typography.fontSize.md,\n    color: auroraTheme.colors.text.secondary,\n    marginBottom: auroraTheme.spacing.md,\n    marginLeft: auroraTheme.spacing.xs,\n    textTransform: 'uppercase',\n    letterSpacing: 1,\n  },\n  cardContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: auroraTheme.spacing.md,\n  },\n  iconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: auroraTheme.borderRadius.md,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  textContainer: {\n    flex: 1,\n    gap: 4,\n  },\n  cardTitle: {\n    fontFamily: auroraTheme.typography.fontFamily.heading,\n    fontSize: auroraTheme.typography.fontSize.md,\n    color: auroraTheme.colors.text.primary,\n    fontWeight: \"600\",\n  },\n  cardDescription: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n    lineHeight: 18,\n  },\n  actionIcon: {\n    opacity: 0.5,\n  },\n  infoContainer: {\n    flexDirection: 'row',\n    backgroundColor: 'rgba(255, 255, 255, 0.05)',\n    borderRadius: auroraTheme.borderRadius.lg,\n    padding: auroraTheme.spacing.lg,\n    gap: auroraTheme.spacing.md,\n  },\n  infoContent: {\n    flex: 1,\n    gap: auroraTheme.spacing.xs,\n  },\n  infoTitle: {\n    fontWeight: '600',\n    color: auroraTheme.colors.text.primary,\n    marginBottom: 4,\n  },\n  infoText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.secondary,\n    lineHeight: 18,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/items.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":38,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Filtered Items Screen\n * View and filter all items with category, subcategory, floor, rack, UOM filters\n * Refactored to use Aurora Design System\n */\nimport React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  RefreshControl,\n  Alert,\n  Platform,\n} from \"react-native\";\nimport { FlashList } from \"@shopify/flash-list\";\nimport { useRouter } from \"expo-router\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { StatusBar } from \"expo-status-bar\";\nimport Animated, { FadeInDown } from \"react-native-reanimated\";\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\nimport * as Haptics from \"expo-haptics\";\nimport * as FileSystem from \"expo-file-system\";\nimport * as Sharing from \"expo-sharing\";\n\nimport { ItemVerificationAPI } from \"../../src/services/api/itemVerificationApi\";\nimport { ItemFilters, FilterValues } from \"../../src/components/ItemFilters\";\nimport { exportItemsToCSV, downloadCSV } from \"../../src/utils/csvExport\";\nimport { AuroraBackground, GlassCard, StatsCard, AnimatedPressable, ScreenHeader } from \"../../src/components/ui\";\nimport { auroraTheme } from \"../../src/theme/auroraTheme\";\n\nconst getLocalFileUri = (filename: string) => {\n  const baseDir =\n    FileSystem.Paths?.document?.uri ?? FileSystem.Paths?.cache?.uri ?? \"\";\n  return `${baseDir}${filename}`;\n};\n\nexport default function ItemsScreen() {\n  const router = useRouter();\n  const [items, setItems] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [filters, setFilters] = useState<FilterValues>({});\n  const [pagination, setPagination] = useState({\n    total: 0,\n    limit: 100,\n    skip: 0,\n  });\n  const [statistics, setStatistics] = useState({\n    total_items: 0,\n    verified_items: 0,\n    unverified_items: 0,\n    total_qty: 0,\n  });\n\n  const loadItems = React.useCallback(\n    async (reset = false) => {\n      try {\n        if (reset) {\n          setLoading(true);\n          setPagination((prev) => ({ ...prev, skip: 0 }));\n        }\n\n        const skip = reset ? 0 : pagination.skip;\n        const response = await ItemVerificationAPI.getFilteredItems({\n          ...filters,\n          limit: pagination.limit,\n          skip,\n        });\n\n        if (reset) {\n          setItems(response.items);\n        } else {\n          setItems((prev) => [...prev, ...response.items]);\n        }\n\n        setPagination(response.pagination);\n        setStatistics(response.statistics);\n      } catch (error: any) {\n        Alert.alert(\"Error\", error.message || \"Failed to load items\");\n      } finally {\n        setLoading(false);\n        setRefreshing(false);\n      }\n    },\n    [filters, pagination.limit, pagination.skip],\n  );\n\n  useEffect(() => {\n    loadItems(true);\n  }, [loadItems]);\n\n  const handleRefresh = () => {\n    if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    setRefreshing(true);\n    loadItems(true);\n  };\n\n  const handleLoadMore = () => {\n    if (!loading && pagination.skip + pagination.limit < pagination.total) {\n      setPagination((prev) => ({\n        ...prev,\n        skip: prev.skip + prev.limit,\n      }));\n      loadItems(false);\n    }\n  };\n\n  const handleExportCSV = async () => {\n    try {\n      if (items.length === 0) {\n        Alert.alert(\"No Data\", \"There are no items to export\");\n        return;\n      }\n\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n\n      let allItems = items;\n      if (pagination.total > items.length) {\n        const response = await ItemVerificationAPI.getFilteredItems({\n          ...filters,\n          limit: pagination.total,\n          skip: 0,\n        });\n        allItems = response.items;\n      }\n\n      const csvContent = exportItemsToCSV(allItems);\n      const filename = `items_export_${new Date().toISOString().split(\"T\")[0]}.csv`;\n\n      if (Platform.OS === \"web\") {\n        downloadCSV(csvContent, filename);\n        Alert.alert(\"Success\", \"CSV file downloaded\");\n      } else {\n        const fileUri = getLocalFileUri(filename);\n        await FileSystem.writeAsStringAsync(fileUri, csvContent, {\n          encoding: \"utf8\",\n        });\n\n        if (await Sharing.isAvailableAsync()) {\n          await Sharing.shareAsync(fileUri);\n        } else {\n          Alert.alert(\"Success\", `File saved to: ${fileUri}`);\n        }\n      }\n    } catch (error: any) {\n      Alert.alert(\"Error\", error.message || \"Failed to export CSV\");\n    }\n  };\n\n  const renderItem = ({ item }: { item: any }) => {\n    return (\n      <AnimatedPressable\n        onPress={() => {\n          // Could navigate to item detail\n          if (Platform.OS !== \"web\") Haptics.selectionAsync();\n        }}\n        style={{ marginBottom: auroraTheme.spacing.sm }}\n      >\n        <GlassCard variant=\"light\" padding={auroraTheme.spacing.md} borderRadius={auroraTheme.borderRadius.lg}>\n          <View style={styles.itemHeader}>\n            <View style={styles.itemHeaderLeft}>\n              <Text style={styles.itemName}>{item.item_name}</Text>\n              <Text style={styles.itemCode}>{item.item_code}</Text>\n            </View>\n            {item.verified && (\n              <View style={styles.verifiedBadge}>\n                <Ionicons name=\"checkmark-circle\" size={14} color={auroraTheme.colors.success[500]} />\n              </View>\n            )}\n          </View>\n\n          <View style={styles.itemDetails}>\n            <View style={styles.detailRow}>\n              <Text style={styles.detailLabel}>Stock</Text>\n              <Text style={styles.detailValue}>\n                {item.stock_qty?.toFixed(2) || \"0.00\"} {item.uom_name || \"\"}\n              </Text>\n            </View>\n            <View style={styles.detailRow}>\n              <Text style={styles.detailLabel} numberOfLines={1} adjustsFontSizeToFit>MRP</Text>\n              <Text style={styles.detailValue} numberOfLines={1} adjustsFontSizeToFit>\n                â‚¹{item.mrp?.toFixed(2) || \"0.00\"}\n              </Text>\n            </View>\n          </View>\n\n          {(item.floor || item.rack) && (\n            <View style={styles.locationRow}>\n              <Ionicons\n                name=\"location-outline\"\n                size={14}\n                color={auroraTheme.colors.text.tertiary}\n              />\n              <Text style={styles.locationText}>\n                {[item.floor, item.rack].filter(Boolean).join(\" / \")}\n              </Text>\n            </View>\n          )}\n\n          {item.category && (\n            <View style={{ marginTop: 4 }}>\n              <Text style={styles.categoryText}>\n                {item.category}\n                {item.subcategory && ` â€¢ ${item.subcategory}`}\n              </Text>\n            </View>\n          )}\n\n          {item.verified && item.verified_by && (\n            <View style={styles.verificationInfo}>\n              <Ionicons\n                name=\"person-outline\"\n                size={12}\n                color={auroraTheme.colors.text.tertiary}\n              />\n              <Text style={styles.verificationInfoText}>\n                Verified by {item.verified_by}\n                {item.verified_at &&\n                  ` â€¢ ${new Date(item.verified_at).toLocaleDateString()}`}\n              </Text>\n            </View>\n          )}\n        </GlassCard>\n      </AnimatedPressable>\n    );\n  };\n\n  return (\n    <AuroraBackground variant=\"secondary\" intensity=\"medium\" animated>\n      <StatusBar style=\"light\" />\n      <View style={styles.container}>\n        {/* Header */}\n        <ScreenHeader\n          title=\"Items\"\n          subtitle={`${pagination.total} items listed`}\n          showBackButton={true}\n          showLogoutButton={false}\n          rightAction={{\n            icon: \"download-outline\",\n            onPress: handleExportCSV,\n          }}\n        />\n\n        {/* Statistics Cards */}\n        <Animated.View entering={FadeInDown.delay(200).springify()} style={styles.statsContainer}>\n          <StatsCard\n            title=\"Total Items\"\n            value={statistics.total_items.toString()}\n            icon=\"cube-outline\"\n            variant=\"primary\"\n            style={{ flex: 1 }}\n          />\n          <StatsCard\n            title=\"Verified\"\n            value={statistics.verified_items.toString()}\n            icon=\"checkmark-done-circle-outline\"\n            variant=\"success\"\n            style={{ flex: 1 }}\n          />\n          <StatsCard\n            title=\"Total Qty\"\n            value={statistics.total_qty.toFixed(0)}\n            icon=\"layers-outline\"\n            variant=\"warning\"\n            style={{ flex: 1 }}\n          />\n        </Animated.View>\n\n        {/* Filters */}\n        <Animated.View entering={FadeInDown.delay(300).springify()}>\n          <GlassCard variant=\"light\" padding={auroraTheme.spacing.sm} style={{ marginBottom: auroraTheme.spacing.md }}>\n            <ItemFilters\n              onFilterChange={setFilters}\n              showVerifiedFilter={true}\n              showSearch={true}\n            />\n          </GlassCard>\n        </Animated.View>\n\n        {items.length === 0 && !loading ? (\n          <View style={styles.centered}>\n            <Ionicons\n              name=\"cube-outline\"\n              size={64}\n              color={auroraTheme.colors.text.tertiary}\n            />\n            <Text style={styles.emptyText}>No items found</Text>\n            <Text style={styles.emptySubtext}>Try adjusting your filters</Text>\n          </View>\n        ) : (\n          <View style={{ flex: 1 }}>\n            <FlashList\n              data={items}\n              renderItem={renderItem}\n              // @ts-ignore\n              estimatedItemSize={150}\n              keyExtractor={(item, index) => `${item.item_code}-${index}`}\n              contentContainerStyle={styles.listContent}\n              refreshControl={\n                <RefreshControl\n                  refreshing={refreshing}\n                  onRefresh={handleRefresh}\n                  tintColor={auroraTheme.colors.primary[500]}\n                  colors={[auroraTheme.colors.primary[500]]}\n                />\n              }\n              onEndReached={handleLoadMore}\n              onEndReachedThreshold={0.5}\n              ListFooterComponent={\n                loading && items.length > 0 ? (\n                  <View style={{ paddingVertical: 20 }}>\n                    <LoadingSpinner size={20} color={auroraTheme.colors.primary[500]} />\n                  </View>\n                ) : (\n                  <View style={{ height: 20 }} />\n                )\n              }\n            />\n          </View>\n        )}\n      </View>\n    </AuroraBackground>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: auroraTheme.spacing.md,\n  },\n  centered: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    paddingBottom: 100,\n  },\n  statsContainer: {\n    flexDirection: \"row\",\n    gap: auroraTheme.spacing.sm,\n    marginBottom: auroraTheme.spacing.md,\n  },\n  listContent: {\n    paddingBottom: auroraTheme.spacing.xl,\n  },\n  itemHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"flex-start\",\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  itemHeaderLeft: {\n    flex: 1,\n  },\n  itemName: {\n    fontFamily: auroraTheme.typography.fontFamily.body,\n    fontSize: auroraTheme.typography.fontSize.md,\n    fontWeight: \"600\",\n    color: auroraTheme.colors.text.primary,\n    marginBottom: 4,\n  },\n  itemCode: {\n    fontFamily: auroraTheme.typography.fontFamily.body,\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.tertiary,\n  },\n  verifiedBadge: {\n    backgroundColor: 'rgba(34, 197, 94, 0.15)', // Success color with opacity\n    borderRadius: auroraTheme.borderRadius.full,\n    padding: 4,\n  },\n  itemDetails: {\n    flexDirection: \"row\",\n    gap: auroraTheme.spacing.lg,\n    marginBottom: auroraTheme.spacing.sm,\n    backgroundColor: 'rgba(255,255,255,0.03)',\n    padding: auroraTheme.spacing.xs,\n    borderRadius: auroraTheme.borderRadius.sm,\n  },\n  detailRow: {\n    //\n  },\n  detailLabel: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.tertiary,\n    marginBottom: 2,\n    textTransform: 'uppercase',\n    letterSpacing: 0.5,\n  },\n  detailValue: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontWeight: \"600\",\n    color: auroraTheme.colors.text.primary,\n  },\n  locationRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.xs,\n    marginBottom: 4, // Added margin bottom for spacing\n  },\n  locationText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.secondary,\n  },\n  categoryText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.tertiary,\n    fontStyle: 'italic',\n  },\n  verificationInfo: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.xs,\n    marginTop: auroraTheme.spacing.sm,\n    borderTopWidth: 1,\n    borderTopColor: auroraTheme.colors.border.light,\n    paddingTop: auroraTheme.spacing.xs,\n  },\n  verificationInfoText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.tertiary,\n  },\n  emptyText: {\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: \"500\",\n    color: auroraTheme.colors.text.secondary,\n    marginTop: auroraTheme.spacing.md,\n  },\n  emptySubtext: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    color: auroraTheme.colors.text.tertiary,\n    marginTop: auroraTheme.spacing.xs,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/notes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/offline-queue.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":34,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Offline Queue Screen\n * Manage offline actions and conflicts\n * Refactored to use Aurora Design System\n */\nimport React from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Alert,\n  RefreshControl,\n  Platform,\n} from \"react-native\";\nimport { useRouter } from \"expo-router\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { StatusBar } from \"expo-status-bar\";\nimport Animated, { FadeInDown } from \"react-native-reanimated\";\nimport * as Haptics from \"expo-haptics\";\nimport { FlashList } from \"@shopify/flash-list\";\n\nimport { flags } from \"../../src/constants/flags\";\nimport {\n  flushOfflineQueue,\n  getConflicts,\n  resolveConflict,\n  listQueue,\n} from \"../../src/services/offline/offlineQueue\";\nimport api from \"../../src/services/httpClient\";\nimport { AuroraBackground, GlassCard, AnimatedPressable, StatsCard, ScreenHeader } from \"../../src/components/ui\";\nimport { auroraTheme } from \"../../src/theme/auroraTheme\";\n\nexport default function OfflineQueueScreen() {\n  const router = useRouter();\n  const [loading, setLoading] = React.useState(false);\n  const [queue, setQueue] = React.useState<any[]>([]);\n  const [conflicts, setConflicts] = React.useState<any[]>([]);\n\n  const load = React.useCallback(async () => {\n    if (!flags.enableOfflineQueue) return;\n    setLoading(true);\n    try {\n      const [q, c] = await Promise.all([listQueue(), getConflicts()]);\n      setQueue(q);\n      setConflicts(c);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  React.useEffect(() => {\n    load();\n  }, [load]);\n\n  const handleFlush = async () => {\n    if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    try {\n      await flushOfflineQueue(api);\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      Alert.alert(\"Success\", \"Offline queue synced successfully\");\n      load();\n    } catch (error: any) {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      Alert.alert(\n        \"Sync Failed\",\n        error?.message || \"Failed to sync offline queue. Please check your connection and try again.\"\n      );\n    }\n  };\n\n  const handleDismiss = async (id: string) => {\n    if (Platform.OS !== \"web\") Haptics.selectionAsync();\n    await resolveConflict(id);\n    load();\n  };\n\n  const renderQueueItem = ({ item }: { item: any }) => (\n    <AnimatedPressable style={{ marginBottom: auroraTheme.spacing.md }}>\n      <GlassCard variant=\"light\" padding={auroraTheme.spacing.md} borderRadius={auroraTheme.borderRadius.lg}>\n        <View style={styles.cardHeader}>\n          <View style={[\n            styles.methodBadge,\n            { backgroundColor: item.method === 'post' ? 'rgba(16, 185, 129, 0.2)' : 'rgba(59, 130, 246, 0.2)' }\n          ]}>\n            <Text style={[\n              styles.methodText,\n              { color: item.method === 'post' ? auroraTheme.colors.success[400] : auroraTheme.colors.primary[400] }\n            ]}>\n              {String(item.method).toUpperCase()}\n            </Text>\n          </View>\n          <Text style={styles.timestamp}>\n            {new Date(item.createdAt).toLocaleString()}\n          </Text>\n        </View>\n\n        <Text style={styles.cardUrl}>{item.url}</Text>\n\n        {item.data && (\n          <GlassCard variant=\"dark\" padding={auroraTheme.spacing.sm} borderRadius={auroraTheme.borderRadius.sm} style={{ marginTop: auroraTheme.spacing.sm }}>\n            <Text style={styles.cardCode} numberOfLines={2}>\n              {JSON.stringify(item.data)}\n            </Text>\n          </GlassCard>\n        )}\n      </GlassCard>\n    </AnimatedPressable>\n  );\n\n  const renderConflictItem = ({ item }: { item: any }) => (\n    <AnimatedPressable style={{ marginBottom: auroraTheme.spacing.md }}>\n      <GlassCard variant=\"medium\" padding={auroraTheme.spacing.md} borderRadius={auroraTheme.borderRadius.lg} style={{ borderColor: auroraTheme.colors.error[500] }}>\n        <View style={styles.cardHeader}>\n          <View style={styles.errorBadge}>\n            <Ionicons name=\"warning\" size={12} color={auroraTheme.colors.warning[500]} />\n            <Text style={styles.errorBadgeText}>Conflict</Text>\n          </View>\n          <Text style={styles.timestamp}>\n            {new Date(item.timestamp || item.createdAt).toLocaleString()}\n          </Text>\n        </View>\n\n        <Text style={styles.cardTitle}>\n          {String(item.method).toUpperCase()} {item.url}\n        </Text>\n\n        <GlassCard variant=\"dark\" padding={auroraTheme.spacing.sm} borderRadius={auroraTheme.borderRadius.sm} style={{ marginTop: auroraTheme.spacing.sm }}>\n          <Text style={styles.cardCode} numberOfLines={4}>\n            {typeof item.detail === \"string\"\n              ? item.detail\n              : JSON.stringify(item.detail)}\n          </Text>\n        </GlassCard>\n\n        <View style={styles.cardActions}>\n          <AnimatedPressable\n            onPress={() => handleDismiss(item.id)}\n            style={styles.dismissButton}\n          >\n            <Text style={styles.dismissText}>Dismiss</Text>\n          </AnimatedPressable>\n        </View>\n      </GlassCard>\n    </AnimatedPressable>\n  );\n\n  if (!flags.enableOfflineQueue) {\n    return (\n      <AuroraBackground>\n        <StatusBar style=\"light\" />\n        <View style={styles.center}>\n          <GlassCard padding={auroraTheme.spacing.xl}>\n            <Ionicons name=\"cloud-offline-outline\" size={48} color={auroraTheme.colors.text.tertiary} style={{ alignSelf: 'center', marginBottom: auroraTheme.spacing.md }} />\n            <Text style={styles.muted}>Offline Queue is disabled in flags.</Text>\n          </GlassCard>\n        </View>\n      </AuroraBackground>\n    );\n  }\n\n  return (\n    <AuroraBackground>\n      <StatusBar style=\"light\" />\n      <View style={styles.container}>\n        {/* Header */}\n        <ScreenHeader\n          title=\"Offline Queue\"\n          subtitle=\"Pending actions & conflicts\"\n          showBackButton\n          customRightContent={\n            <AnimatedPressable onPress={handleFlush} style={styles.flushButton}>\n              <Ionicons name=\"sync\" size={20} color=\"white\" />\n              <Text style={styles.flushText}>Flush Queue</Text>\n            </AnimatedPressable>\n          }\n        />\n\n        <Animated.View entering={FadeInDown.delay(200).springify()} style={styles.statsRow}>\n          <StatsCard\n            title=\"Pending Actions\"\n            value={queue.length.toString()}\n            icon=\"layers-outline\"\n            variant=\"primary\"\n            style={{ flex: 1 }}\n          />\n          <StatsCard\n            title=\"Conflicts\"\n            value={conflicts.length.toString()}\n            icon=\"alert-circle-outline\"\n            variant={conflicts.length > 0 ? \"error\" : \"success\"}\n            style={{ flex: 1 }}\n          />\n        </Animated.View>\n\n        <View style={styles.contentContainer}>\n          <View style={styles.sectionHeader}>\n            <Text style={styles.sectionTitle}>Queue</Text>\n          </View>\n\n          <View style={{ flex: 1 }}>\n            <FlashList\n              data={queue}\n              renderItem={renderQueueItem}\n              // @ts-ignore\n              estimatedItemSize={100}\n              keyExtractor={(item) => item.id || `q-${Math.random()}`}\n              refreshControl={\n                <RefreshControl refreshing={loading} onRefresh={load} tintColor={auroraTheme.colors.primary[500]} />\n              }\n              ListEmptyComponent={\n                <View style={styles.emptyState}>\n                  <Text style={styles.emptyText}>No pending actions</Text>\n                </View>\n              }\n            />\n          </View>\n\n          <View style={[styles.sectionHeader, { marginTop: auroraTheme.spacing.lg }]}>\n            <Text style={styles.sectionTitle}>Conflicts</Text>\n          </View>\n\n          <View style={{ flex: 1 }}>\n            <FlashList\n              data={conflicts}\n              renderItem={renderConflictItem}\n              // @ts-ignore\n              estimatedItemSize={150}\n              keyExtractor={(item) => item.id || `c-${Math.random()}`}\n              ListEmptyComponent={\n                <View style={styles.emptyState}>\n                  <Text style={styles.emptyText}>No conflicts resolved</Text>\n                </View>\n              }\n            />\n          </View>\n        </View>\n      </View>\n    </AuroraBackground>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: auroraTheme.spacing.md,\n  },\n  center: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: auroraTheme.spacing.md\n  },\n  flushButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    backgroundColor: auroraTheme.colors.primary[500],\n    paddingHorizontal: auroraTheme.spacing.md,\n    paddingVertical: 8,\n    borderRadius: auroraTheme.borderRadius.full,\n  },\n  flushText: {\n    color: 'white',\n    fontWeight: '600',\n    fontSize: auroraTheme.typography.fontSize.sm,\n  },\n  statsRow: {\n    flexDirection: 'row',\n    gap: auroraTheme.spacing.md,\n    marginBottom: auroraTheme.spacing.lg,\n  },\n  contentContainer: {\n    flex: 1,\n    paddingBottom: auroraTheme.spacing.xl,\n  },\n  sectionHeader: {\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  sectionTitle: {\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: '700',\n    color: auroraTheme.colors.text.primary,\n  },\n  muted: { color: auroraTheme.colors.text.tertiary, textAlign: 'center' },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  methodBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: auroraTheme.borderRadius.sm,\n  },\n  methodText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    fontWeight: 'bold',\n  },\n  timestamp: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.tertiary,\n  },\n  cardUrl: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontWeight: '600',\n    color: auroraTheme.colors.text.primary,\n  },\n  cardCode: {\n    fontFamily: Platform.OS === 'ios' ? 'Menlo' : 'monospace',\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.secondary,\n  },\n  errorBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    backgroundColor: 'rgba(234, 179, 8, 0.1)',\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: auroraTheme.borderRadius.full,\n  },\n  errorBadgeText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.warning[500],\n    fontWeight: '600',\n  },\n  cardTitle: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontWeight: '700',\n    color: auroraTheme.colors.text.primary,\n    marginBottom: auroraTheme.spacing.xs,\n  },\n  cardActions: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    marginTop: auroraTheme.spacing.md,\n  },\n  dismissButton: {\n    backgroundColor: auroraTheme.colors.background.glass,\n    borderWidth: 1,\n    borderColor: auroraTheme.colors.border.light,\n    paddingHorizontal: auroraTheme.spacing.md,\n    paddingVertical: 6,\n    borderRadius: auroraTheme.borderRadius.full,\n  },\n  dismissText: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    color: auroraTheme.colors.text.primary,\n    fontWeight: '600',\n  },\n  emptyState: {\n    padding: auroraTheme.spacing.lg,\n    alignItems: 'center',\n  },\n  emptyText: {\n    color: auroraTheme.colors.text.tertiary,\n    fontSize: auroraTheme.typography.fontSize.sm,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/session/[id].tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":37,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  Platform,\n} from \"react-native\";\nimport { useRouter, useLocalSearchParams } from \"expo-router\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { FlashList } from \"@shopify/flash-list\";\nimport { StatusBar } from \"expo-status-bar\";\nimport Animated, { FadeInDown, FadeInUp } from \"react-native-reanimated\";\nimport * as Haptics from \"expo-haptics\";\n\nimport { AuroraBackground } from \"../../../src/components/ui/AuroraBackground\";\nimport { GlassCard } from \"../../../src/components/ui/GlassCard\";\nimport { AnimatedPressable } from \"../../../src/components/ui/AnimatedPressable\";\nimport { LoadingSpinner } from \"../../../src/components/ui/LoadingSpinner\";\nimport { ScreenHeader } from \"../../../src/components/ui/ScreenHeader\";\nimport { auroraTheme } from \"../../../src/theme/auroraTheme\";\nimport {\n  getSession,\n  getCountLines,\n  approveCountLine,\n  rejectCountLine,\n  updateSessionStatus,\n  verifyStock,\n  unverifyStock,\n} from \"../../../src/services/api/api\";\nimport { useToast } from \"../../../src/components/feedback/ToastProvider\";\n\nexport default function SessionDetail() {\n  // Support both \"id\" (from route) and \"sessionId\" (legacy or explicit) parameter\n  const { id, sessionId } = useLocalSearchParams();\n  const targetSessionId = (id || sessionId) as string;\n\n  const router = useRouter();\n  const { show } = useToast();\n  const [session, setSession] = React.useState<any>(null);\n  const [toVerifyLines, setToVerifyLines] = React.useState<any[]>([]);\n  const [verifiedLines, setVerifiedLines] = React.useState<any[]>([]);\n  const [loading, setLoading] = React.useState(true);\n  const [activeTab, setActiveTab] = React.useState<\"toVerify\" | \"verified\">(\n    \"toVerify\",\n  );\n  const [verifying, setVerifying] = React.useState<string | null>(null);\n\n  const loadData = React.useCallback(async () => {\n    if (!targetSessionId) return;\n    try {\n      setLoading(true);\n      const [sessionData, toVerifyData, verifiedData] = await Promise.all([\n        getSession(targetSessionId),\n        getCountLines(targetSessionId, 1, 100, false), // Not verified\n        getCountLines(targetSessionId, 1, 100, true), // Verified\n      ]);\n      setSession(sessionData);\n      setToVerifyLines(toVerifyData?.items || []);\n      setVerifiedLines(verifiedData?.items || []);\n    } catch {\n      show(\"Failed to load session data\", \"error\");\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n    } finally {\n      setLoading(false);\n    }\n  }, [targetSessionId, show]);\n\n  React.useEffect(() => {\n    loadData();\n  }, [loadData]);\n\n  const handleApproveLine = async (lineId: string) => {\n    try {\n      if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n      await approveCountLine(lineId);\n      await loadData();\n      show(\"Count line approved\", \"success\");\n    } catch {\n      show(\"Failed to approve\", \"error\");\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n    }\n  };\n\n  const handleRejectLine = async (lineId: string) => {\n    try {\n      if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n      await rejectCountLine(lineId);\n      await loadData();\n      show(\"Count line rejected\", \"success\");\n    } catch {\n      show(\"Failed to reject\", \"error\");\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n    }\n  };\n\n  const handleVerifyStock = async (lineId: string) => {\n    try {\n      if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\n      setVerifying(lineId);\n      await verifyStock(lineId);\n      await loadData();\n      show(\"Stock verified\", \"success\");\n    } catch {\n      show(\"Failed to verify stock\", \"error\");\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n    } finally {\n      setVerifying(null);\n    }\n  };\n\n  const handleUnverifyStock = async (lineId: string) => {\n    try {\n      if (Platform.OS !== \"web\") Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n      setVerifying(lineId);\n      await unverifyStock(lineId);\n      await loadData();\n      show(\"Verification removed\", \"success\");\n    } catch {\n      show(\"Failed to remove verification\", \"error\");\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n    } finally {\n      setVerifying(null);\n    }\n  };\n\n  const handleUpdateStatus = async (newStatus: string) => {\n    try {\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n      await updateSessionStatus(targetSessionId, newStatus);\n      await loadData();\n      show(`Session status updated to ${newStatus} `, \"success\");\n    } catch {\n      show(\"Failed to update status\", \"error\");\n      if (Platform.OS !== \"web\") Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n    }\n  };\n\n  const switchTab = (tab: \"toVerify\" | \"verified\") => {\n    if (activeTab === tab) return;\n    if (Platform.OS !== \"web\") Haptics.selectionAsync();\n    setActiveTab(tab);\n  };\n\n  if (loading || !session) {\n    return (\n      <AuroraBackground>\n        <StatusBar style=\"light\" />\n        <ScreenHeader\n          title=\"Session Details\"\n          showBackButton\n        />\n        <View style={styles.loadingContainer}>\n          <LoadingSpinner size={48} color={auroraTheme.colors.primary[500]} />\n          <Text style={styles.loadingText}>Loading...</Text>\n        </View>\n      </AuroraBackground>\n    );\n  }\n\n  const currentLines = activeTab === \"toVerify\" ? toVerifyLines : verifiedLines;\n\n  // Header Component for FlashList\n  const ListHeader = () => (\n    <View>\n      <Animated.View entering={FadeInDown.delay(100).springify()}>\n        <GlassCard variant=\"medium\" withGradientBorder style={styles.sessionInfo}>\n          <View style={styles.infoRow}>\n            <Text style={styles.infoLabel}>Warehouse:</Text>\n            <Text style={styles.infoValue}>{session.warehouse}</Text>\n          </View>\n          <View style={styles.infoRow}>\n            <Text style={styles.infoLabel}>Staff:</Text>\n            <Text style={styles.infoValue}>{session.staff_name}</Text>\n          </View>\n          <View style={styles.infoRow}>\n            <Text style={styles.infoLabel}>Status:</Text>\n            <Text style={[styles.infoValue, styles.statusValue]}>\n              {session.status}\n            </Text>\n          </View>\n          <View style={styles.infoRow}>\n            <Text style={styles.infoLabel}>Items:</Text>\n            <Text style={styles.infoValue}>{session.total_items}</Text>\n          </View>\n          <View style={styles.infoRow}>\n            <Text style={styles.infoLabel}>Total Variance:</Text>\n            <Text\n              style={[\n                styles.infoValue,\n                session.total_variance !== 0 && styles.varianceValue,\n              ]}\n            >\n              {session.total_variance.toFixed(2)}\n            </Text>\n          </View>\n        </GlassCard>\n      </Animated.View>\n\n      {session.status === \"OPEN\" && (\n        <Animated.View entering={FadeInDown.delay(200).springify()} style={styles.actionButtons}>\n          <AnimatedPressable\n            style={styles.reconcileButton}\n            onPress={() => handleUpdateStatus(\"RECONCILE\")}\n          >\n            <Text style={styles.buttonText}>Move to Reconcile</Text>\n          </AnimatedPressable>\n        </Animated.View>\n      )}\n\n      {session.status === \"RECONCILE\" && (\n        <Animated.View entering={FadeInDown.delay(200).springify()} style={styles.actionButtons}>\n          <AnimatedPressable\n            style={styles.closeButton}\n            onPress={() => handleUpdateStatus(\"CLOSED\")}\n          >\n            <Text style={styles.buttonText}>Close Session</Text>\n          </AnimatedPressable>\n        </Animated.View>\n      )}\n\n      {/* Tab Selection */}\n      <Animated.View entering={FadeInDown.delay(300).springify()} style={styles.tabContainer}>\n        <AnimatedPressable\n          style={[styles.tab, activeTab === \"toVerify\" && styles.tabActive]}\n          onPress={() => switchTab(\"toVerify\")}\n        >\n          <Ionicons\n            name=\"list-outline\"\n            size={20}\n            color={activeTab === \"toVerify\" ? auroraTheme.colors.text.primary : auroraTheme.colors.text.secondary}\n          />\n          <Text\n            style={[\n              styles.tabText,\n              activeTab === \"toVerify\" && styles.tabTextActive,\n            ]}\n          >\n            To Verify ({toVerifyLines.length})\n          </Text>\n        </AnimatedPressable>\n        <AnimatedPressable\n          style={[styles.tab, activeTab === \"verified\" && styles.tabActive]}\n          onPress={() => switchTab(\"verified\")}\n        >\n          <Ionicons\n            name=\"checkmark-circle-outline\"\n            size={20}\n            color={activeTab === \"verified\" ? auroraTheme.colors.text.primary : auroraTheme.colors.text.secondary}\n          />\n          <Text\n            style={[\n              styles.tabText,\n              activeTab === \"verified\" && styles.tabTextActive,\n            ]}\n          >\n            Verified ({verifiedLines.length})\n          </Text>\n        </AnimatedPressable>\n      </Animated.View>\n    </View>\n  );\n\n  // Limit animation delay for performance on large lists\n  const MAX_ANIMATED_ITEMS = 10;\n\n  const renderItem = ({ item, index }: { item: any, index: number }) => {\n    const varianceColor = item.variance === 0 ? auroraTheme.colors.success[500] : auroraTheme.colors.error[500];\n    const statusColor =\n      item.status === \"approved\"\n        ? auroraTheme.colors.success[500]\n        : item.status === \"rejected\"\n          ? auroraTheme.colors.error[500]\n          : auroraTheme.colors.warning[500];\n\n    // Only animate first N items to prevent performance issues on large lists\n    const shouldAnimate = index < MAX_ANIMATED_ITEMS;\n    const animationDelay = shouldAnimate ? Math.min(index * 50 + 400, 1000) : 0;\n\n    const content = (\n      <GlassCard style={styles.lineCard}>\n        <View style={styles.lineHeader}>\n          <Text style={styles.lineName} numberOfLines={1}>{item.item_name}</Text>\n          <View style={styles.badgeContainer}>\n            {item.verified && (\n              <View\n                style={[\n                  styles.verifiedBadge,\n                  { backgroundColor: auroraTheme.colors.success[500] + '30' },\n                ]}\n              >\n                <Ionicons\n                  name=\"checkmark-circle\"\n                  size={12}\n                  color={auroraTheme.colors.success[500]}\n                />\n                <Text style={[styles.badgeText, { color: auroraTheme.colors.success[500] }]}>Verified</Text>\n              </View>\n            )}\n            <View\n              style={[\n                styles.lineBadge,\n                { backgroundColor: statusColor + '30' },\n              ]}\n            >\n              <Text style={[styles.badgeText, { color: statusColor }]}>{item.status}</Text>\n            </View>\n          </View>\n        </View>\n\n        <Text style={styles.lineCode}>Code: {item.item_code}</Text>\n\n        <View style={styles.qtyRow}>\n          <View style={styles.qtyItem}>\n            <Text style={styles.qtyLabel}>ERP</Text>\n            <Text style={styles.qtyValue}>{item.erp_qty}</Text>\n          </View>\n          <View style={styles.qtyItem}>\n            <Text style={styles.qtyLabel}>Counted</Text>\n            <Text style={styles.qtyValue}>{item.counted_qty}</Text>\n          </View>\n          <View style={styles.qtyItem}>\n            <Text style={styles.qtyLabel}>Variance</Text>\n            <Text style={[styles.qtyValue, { color: varianceColor }]}>\n              {item.variance}\n            </Text>\n          </View>\n        </View>\n\n        {item.variance_reason && (\n          <View style={styles.reasonBox}>\n            <Text style={styles.reasonLabel}>\n              Reason: {item.variance_reason}\n            </Text>\n            {item.variance_note && (\n              <Text style={styles.reasonNote}>\n                {item.variance_note}\n              </Text>\n            )}\n          </View>\n        )}\n\n        {item.remark && (\n          <Text style={styles.remark}>Remark: {item.remark}</Text>\n        )}\n\n        {item.verified && item.verified_by && (\n          <View style={styles.verifiedInfo}>\n            <Ionicons\n              name=\"checkmark-circle\"\n              size={16}\n              color={auroraTheme.colors.success[500]}\n            />\n            <Text style={styles.verifiedInfoText}>\n              Verified by {item.verified_by} on{\" \"}\n              {new Date(item.verified_at).toLocaleString()}\n            </Text>\n          </View>\n        )}\n\n        <View style={styles.lineActions}>\n          {item.status === \"pending\" && (\n            <>\n              <AnimatedPressable\n                style={styles.approveButton}\n                onPress={() => handleApproveLine(item.id)}\n              >\n                <Ionicons name=\"checkmark\" size={20} color={auroraTheme.colors.text.primary} />\n                <Text style={styles.actionButtonText}>Approve</Text>\n              </AnimatedPressable>\n              <AnimatedPressable\n                style={styles.rejectButton}\n                onPress={() => handleRejectLine(item.id)}\n              >\n                <Ionicons name=\"close\" size={20} color={auroraTheme.colors.text.primary} />\n                <Text style={styles.actionButtonText}>Reject</Text>\n              </AnimatedPressable>\n            </>\n          )}\n\n          {activeTab === \"toVerify\" && !item.verified && (\n            <AnimatedPressable\n              style={[\n                styles.verifyButton,\n                verifying === item.id && styles.buttonDisabled,\n              ]}\n              onPress={() => handleVerifyStock(item.id)}\n              disabled={verifying === item.id}\n            >\n              {verifying === item.id ? (\n                <LoadingSpinner size={20} color={auroraTheme.colors.text.primary} />\n              ) : (\n                <>\n                  <Ionicons\n                    name=\"checkmark-circle-outline\"\n                    size={20}\n                    color={auroraTheme.colors.text.primary}\n                  />\n                  <Text style={styles.actionButtonText}>\n                    Verify Stock\n                  </Text>\n                </>\n              )}\n            </AnimatedPressable>\n          )}\n\n          {activeTab === \"verified\" && item.verified && (\n            <AnimatedPressable\n              style={[\n                styles.unverifyButton,\n                verifying === item.id && styles.buttonDisabled,\n              ]}\n              onPress={() => handleUnverifyStock(item.id)}\n              disabled={verifying === item.id}\n            >\n              {verifying === item.id ? (\n                <LoadingSpinner size={20} color={auroraTheme.colors.text.primary} />\n              ) : (\n                <>\n                  <Ionicons\n                    name=\"close-circle-outline\"\n                    size={20}\n                    color={auroraTheme.colors.text.primary}\n                  />\n                  <Text style={styles.actionButtonText}>Unverify</Text>\n                </>\n              )}\n            </AnimatedPressable>\n          )}\n        </View>\n      </GlassCard>\n    );\n\n    if (shouldAnimate) {\n      return (\n        <Animated.View entering={FadeInUp.delay(animationDelay).springify()}>\n          {content}\n        </Animated.View>\n      );\n    }\n    return content;\n  };\n\n  const renderEmpty = () => (\n    <GlassCard variant=\"medium\" style={styles.emptyContainer}>\n      <Ionicons\n        name={\n          activeTab === \"toVerify\" ? \"list-outline\" : \"checkmark-circle\"\n        }\n        size={64}\n        color={auroraTheme.colors.text.disabled}\n      />\n      <Text style={styles.emptyText}>\n        {activeTab === \"toVerify\"\n          ? \"No items to verify\"\n          : \"No verified items\"}\n      </Text>\n    </GlassCard>\n  );\n\n  return (\n    <AuroraBackground>\n      <StatusBar style=\"light\" />\n      <ScreenHeader\n        title=\"Session Details\"\n        subtitle={session?.warehouse || undefined}\n        showBackButton\n      />\n\n      <View style={styles.listContainer}>\n        <FlashList\n          data={currentLines}\n          renderItem={renderItem}\n          // @ts-ignore\n          estimatedItemSize={250}\n          ListHeaderComponent={ListHeader}\n          ListEmptyComponent={renderEmpty}\n          contentContainerStyle={styles.listContent}\n        />\n      </View>\n    </AuroraBackground>\n  );\n}\n\nconst styles = StyleSheet.create({\n  loadingContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  loadingText: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    marginTop: auroraTheme.spacing.md,\n    color: auroraTheme.colors.text.secondary,\n  },\n  listContainer: {\n    flex: 1,\n    paddingHorizontal: auroraTheme.spacing.md,\n  },\n  listContent: {\n    paddingBottom: 40,\n  },\n  sessionInfo: {\n    marginBottom: auroraTheme.spacing.lg,\n    padding: auroraTheme.spacing.md,\n  },\n  infoRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  infoLabel: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n  },\n  infoValue: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n    color: auroraTheme.colors.text.primary,\n  },\n  statusValue: {\n    color: auroraTheme.colors.warning[500],\n  },\n  varianceValue: {\n    color: auroraTheme.colors.error[500],\n  },\n  actionButtons: {\n    marginBottom: auroraTheme.spacing.lg,\n  },\n  reconcileButton: {\n    backgroundColor: auroraTheme.colors.warning[500],\n    borderRadius: 12,\n    padding: auroraTheme.spacing.md,\n    alignItems: \"center\",\n  },\n  closeButton: {\n    backgroundColor: auroraTheme.colors.success[500],\n    borderRadius: 12,\n    padding: auroraTheme.spacing.md,\n    alignItems: \"center\",\n  },\n  buttonText: {\n    color: auroraTheme.colors.text.primary,\n    fontSize: auroraTheme.typography.fontSize.md,\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n  },\n  tabContainer: {\n    flexDirection: \"row\",\n    backgroundColor: auroraTheme.colors.background.glass,\n    borderRadius: 16,\n    padding: 4,\n    marginBottom: auroraTheme.spacing.lg,\n    borderWidth: 1,\n    borderColor: auroraTheme.colors.border.light,\n  },\n  tab: {\n    flex: 1,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: auroraTheme.spacing.md,\n    borderRadius: 8,\n    gap: 8,\n  },\n  tabActive: {\n    backgroundColor: auroraTheme.colors.primary[500],\n  },\n  tabText: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n    fontWeight: auroraTheme.typography.fontWeight.semibold,\n  },\n  tabTextActive: {\n    color: auroraTheme.colors.text.primary,\n    fontWeight: '700',\n  },\n  emptyContainer: {\n    padding: 64,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginTop: auroraTheme.spacing.xl,\n  },\n  emptyText: {\n    color: auroraTheme.colors.text.secondary,\n    fontSize: auroraTheme.typography.fontSize.md,\n    marginTop: auroraTheme.spacing.md,\n  },\n  lineCard: {\n    marginBottom: auroraTheme.spacing.md,\n    padding: auroraTheme.spacing.md,\n  },\n  lineHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  lineName: {\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n    flex: 1,\n    color: auroraTheme.colors.text.primary,\n  },\n  badgeContainer: {\n    flexDirection: \"row\",\n    gap: 8,\n    alignItems: \"center\",\n  },\n  verifiedBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 6,\n    gap: 4,\n  },\n  lineBadge: {\n    paddingHorizontal: 10,\n    paddingVertical: 4,\n    borderRadius: 6,\n  },\n  badgeText: {\n    color: auroraTheme.colors.text.primary,\n    fontSize: 10,\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n  },\n  lineCode: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n    marginBottom: auroraTheme.spacing.md,\n  },\n  qtyRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    marginBottom: auroraTheme.spacing.md,\n    backgroundColor: auroraTheme.colors.background.tertiary,\n    padding: auroraTheme.spacing.sm,\n    borderRadius: 8,\n  },\n  qtyItem: {\n    flex: 1,\n    alignItems: \"center\",\n  },\n  qtyLabel: {\n    fontSize: 12,\n    color: auroraTheme.colors.text.tertiary,\n    marginBottom: 4,\n  },\n  qtyValue: {\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n    color: auroraTheme.colors.text.primary,\n  },\n  reasonBox: {\n    backgroundColor: \"rgba(255, 152, 0, 0.1)\",\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 8,\n    borderLeftWidth: 3,\n    borderLeftColor: auroraTheme.colors.warning[500],\n  },\n  reasonLabel: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.warning[500],\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n    marginBottom: 4,\n  },\n  reasonNote: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n  },\n  remark: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    color: auroraTheme.colors.text.secondary,\n    fontStyle: \"italic\",\n    marginBottom: auroraTheme.spacing.sm,\n  },\n  verifiedInfo: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    marginBottom: auroraTheme.spacing.sm,\n    padding: 8,\n    backgroundColor: \"rgba(0, 230, 118, 0.1)\",\n    borderRadius: 8,\n    gap: 8,\n  },\n  verifiedInfoText: {\n    fontSize: 12,\n    color: auroraTheme.colors.success[500],\n  },\n  lineActions: {\n    flexDirection: \"row\",\n    gap: 12,\n    marginTop: auroraTheme.spacing.md,\n    flexWrap: \"wrap\",\n  },\n  approveButton: {\n    flex: 1,\n    flexDirection: \"row\",\n    backgroundColor: auroraTheme.colors.success[500],\n    borderRadius: 8,\n    padding: 12,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: 8,\n    minWidth: 100,\n  },\n  rejectButton: {\n    flex: 1,\n    flexDirection: \"row\",\n    backgroundColor: auroraTheme.colors.error[500],\n    borderRadius: 8,\n    padding: 12,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: 8,\n    minWidth: 100,\n  },\n  verifyButton: {\n    flex: 1,\n    flexDirection: \"row\",\n    backgroundColor: auroraTheme.colors.primary[500],\n    borderRadius: 8,\n    padding: 12,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: 8,\n    minWidth: 120,\n  },\n  unverifyButton: {\n    flex: 1,\n    flexDirection: \"row\",\n    backgroundColor: auroraTheme.colors.warning[500],\n    borderRadius: 8,\n    padding: 12,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: 8,\n    minWidth: 120,\n  },\n  buttonDisabled: {\n    opacity: 0.6,\n  },\n  actionButtonText: {\n    color: auroraTheme.colors.text.primary,\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontWeight: auroraTheme.typography.fontWeight.bold,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/sessions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/settings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/sync-conflicts.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'hasPermission', 'loadData', and 'router'. Either include them or remove the dependency array.","line":79,"column":6,"nodeType":"ArrayExpression","endLine":79,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [filterStatus, hasPermission, loadData, router]","fix":{"range":[2502,2516],"text":"[filterStatus, hasPermission, loadData, router]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/variance-details.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/variances.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/supervisor/watchtower.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":76,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":76,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  RefreshControl,\n  Platform,\n} from \"react-native\";\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\nimport { useRouter } from \"expo-router\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { StatusBar } from \"expo-status-bar\";\nimport Animated, { FadeInDown } from \"react-native-reanimated\";\nimport * as Haptics from \"expo-haptics\";\n\nimport { getWatchtowerStats } from \"../../src/services/api/api\";\nimport {\n  AuroraBackground,\n  GlassCard,\n  StatsCard,\n  LiveIndicator,\n  ActivityFeedItem,\n  AnimatedPressable,\n  ScreenHeader,\n} from \"../../src/components/ui\";\nimport { auroraTheme } from \"../../src/theme/auroraTheme\";\n\ninterface WatchtowerStats {\n  active_sessions: number;\n  total_scans_today: number;\n  active_users: number;\n  hourly_throughput: number[];\n  recent_activity: {\n    item_code: string;\n    qty: number;\n    user: string;\n    time: string;\n  }[];\n}\n\nconst ChartBar = ({\n  height,\n  label,\n  active,\n}: {\n  height: number;\n  label: string;\n  active?: boolean;\n}) => (\n  <View style={styles.chartBarContainer}>\n    <View style={styles.chartBarWrapper}>\n      <View\n        style={[\n          styles.chartBar,\n          {\n            height: Math.max(height, 4),\n            backgroundColor: active\n              ? auroraTheme.colors.success[500]\n              : auroraTheme.colors.background.glass,\n            borderColor: active\n              ? auroraTheme.colors.success[400]\n              : auroraTheme.colors.border.light,\n          },\n        ]}\n      />\n    </View>\n    <Text style={[\n      styles.chartLabel,\n      active && { color: auroraTheme.colors.success[400], fontWeight: 'bold' }\n    ]}>{label}</Text>\n  </View>\n);\n\nexport default function WatchtowerScreen() {\n  const router = useRouter();\n  const [stats, setStats] = useState<WatchtowerStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [lastUpdated, setLastUpdated] = useState<Date>(new Date());\n\n  const fetchStats = useCallback(async () => {\n    try {\n      if (!stats) setLoading(true);\n      const data = await getWatchtowerStats();\n      setStats(data);\n      setLastUpdated(new Date());\n    } catch (error) {\n      console.error(\"Failed to fetch watchtower stats\", error);\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  }, [stats]);\n\n  useEffect(() => {\n    fetchStats();\n    // Auto-refresh every 30 seconds\n    const interval = setInterval(fetchStats, 30000);\n    return () => clearInterval(interval);\n  }, [fetchStats]);\n\n  const onRefresh = () => {\n    if (Platform.OS !== \"web\") {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n    setRefreshing(true);\n    fetchStats();\n  };\n\n  const getProcessingRate = () => {\n    if (!stats) return 0;\n    // Simple throughput calculation (items / hour avg for active hours)\n    const total = stats.total_scans_today;\n    const currentHour = new Date().getHours();\n    // Avoid division by zero, assume at least 1 hour operating if count > 0\n    return currentHour > 0 ? Math.round(total / currentHour) : total;\n  };\n\n  return (\n    <AuroraBackground variant=\"secondary\" intensity=\"medium\" animated={true}>\n      <StatusBar style=\"light\" />\n      <ScrollView\n        style={styles.container}\n        contentContainerStyle={styles.contentContainer}\n        refreshControl={\n          <RefreshControl\n            refreshing={refreshing}\n            onRefresh={onRefresh}\n            tintColor={auroraTheme.colors.primary[500]}\n            colors={[auroraTheme.colors.primary[500]]}\n          />\n        }\n        showsVerticalScrollIndicator={false}\n      >\n        {/* Header */}\n        <ScreenHeader\n          title=\"Watchtower\"\n          subtitle={`Updated: ${lastUpdated.toLocaleTimeString()}`}\n          showBackButton={true}\n          showLogoutButton={false}\n          customRightContent={<LiveIndicator label=\"LIVE\" size=\"small\" />}\n        />\n\n        {loading && !stats && !refreshing ? (\n          <View style={styles.loadingContainer}>\n            <LoadingSpinner size={48} color={auroraTheme.colors.primary[500]} />\n            <Text style={styles.loadingText}>Connecting to Watchtower...</Text>\n          </View>\n        ) : stats ? (\n          <>\n            {/* Primary Metrics Grid */}\n            <View style={styles.statsGrid}>\n              <View style={styles.statsRow}>\n                <StatsCard\n                  title=\"Active Staff\"\n                  value={stats.active_users}\n                  icon=\"people\"\n                  variant=\"success\"\n                  style={styles.statCard}\n                  delay={100}\n                />\n                <StatsCard\n                  title=\"Open Sessions\"\n                  value={stats.active_sessions}\n                  icon=\"folder-open\"\n                  variant=\"primary\"\n                  style={styles.statCard}\n                  delay={150}\n                />\n              </View>\n\n              <View style={styles.statsRow}>\n                <StatsCard\n                  title=\"Total Scans\"\n                  value={stats.total_scans_today}\n                  icon=\"scan-circle\"\n                  variant=\"warning\"\n                  style={styles.statCard}\n                  delay={200}\n                />\n                <StatsCard\n                  title=\"Avg Items/Hr\"\n                  value={getProcessingRate()}\n                  icon=\"speedometer\"\n                  variant=\"info\"\n                  style={styles.statCard}\n                  delay={250}\n                />\n              </View>\n            </View>\n\n            {/* Throughput Chart */}\n            <Animated.View entering={FadeInDown.delay(300).springify()} style={styles.section}>\n              <GlassCard\n                variant=\"medium\"\n                intensity={20}\n                borderRadius={auroraTheme.borderRadius.lg}\n                padding={auroraTheme.spacing.lg}\n                elevation=\"md\"\n              >\n                <Text style={styles.sectionTitle}>Hourly Throughput</Text>\n                <View style={styles.chartContainer}>\n                  {stats.hourly_throughput.map((count, index) => {\n                    // Only show operational hours (e.g., 8 AM to 8 PM) or active hours\n                    if (index < 6 || index > 22) return null;\n                    const max = Math.max(...stats.hourly_throughput, 10); // Scale base\n                    const height = (count / max) * 100;\n                    const isCurrentHour = index === new Date().getHours();\n                    return (\n                      <ChartBar\n                        key={index}\n                        height={height}\n                        label={`${index}:00`}\n                        active={isCurrentHour}\n                      />\n                    );\n                  })}\n                </View>\n              </GlassCard>\n            </Animated.View>\n\n            {/* Recent Activity Feed */}\n            <Animated.View entering={FadeInDown.delay(350).springify()} style={styles.section}>\n              <Text style={[styles.sectionTitle, { marginBottom: auroraTheme.spacing.md, marginLeft: auroraTheme.spacing.xs }]}>\n                Recent Activity\n              </Text>\n\n              <GlassCard\n                variant=\"medium\"\n                intensity={15}\n                borderRadius={auroraTheme.borderRadius.lg}\n                padding={auroraTheme.spacing.md}\n                elevation=\"sm\"\n              >\n                {stats.recent_activity.length > 0 ? (\n                  stats.recent_activity.map((activity, idx) => (\n                    <ActivityFeedItem\n                      key={`${idx}-${activity.time}`}\n                      type=\"scan\"\n                      title={`${activity.user} scanned ${activity.item_code}`}\n                      description={`Quantity: ${activity.qty}`}\n                      timestamp={activity.time}\n                      status=\"info\"\n                      delay={idx * 50}\n                    />\n                  ))\n                ) : (\n                  <View style={styles.emptyState}>\n                    <Ionicons\n                      name=\"time-outline\"\n                      size={48}\n                      color={auroraTheme.colors.text.tertiary}\n                    />\n                    <Text style={styles.emptyText}>No recent activity</Text>\n                  </View>\n                )}\n              </GlassCard>\n            </Animated.View>\n          </>\n        ) : (\n          <View style={styles.errorContainer}>\n            <Ionicons name=\"alert-circle-outline\" size={48} color={auroraTheme.colors.error[500]} />\n            <Text style={styles.errorText}>Failed to load statistics</Text>\n            <AnimatedPressable onPress={fetchStats} style={styles.retryButton}>\n              <Text style={styles.retryText}>Retry</Text>\n            </AnimatedPressable>\n          </View>\n        )}\n\n        <View style={{ height: 40 }} />\n      </ScrollView>\n    </AuroraBackground>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    padding: auroraTheme.spacing.lg,\n  },\n  loadingContainer: {\n    padding: auroraTheme.spacing[\"2xl\"],\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.md,\n  },\n  loadingText: {\n    fontSize: auroraTheme.typography.fontSize.md,\n    color: auroraTheme.colors.text.secondary,\n  },\n  statsGrid: {\n    gap: auroraTheme.spacing.md,\n    marginBottom: auroraTheme.spacing.xl,\n  },\n  statsRow: {\n    flexDirection: \"row\",\n    gap: auroraTheme.spacing.md,\n  },\n  statCard: {\n    flex: 1,\n  },\n  section: {\n    marginBottom: auroraTheme.spacing.xl,\n  },\n  sectionTitle: {\n    fontFamily: auroraTheme.typography.fontFamily.heading,\n    fontSize: auroraTheme.typography.fontSize.lg,\n    fontWeight: \"600\",\n    color: auroraTheme.colors.text.primary,\n    marginBottom: auroraTheme.spacing.md,\n  },\n  chartContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"flex-end\",\n    height: 150,\n    gap: 4,\n    paddingTop: auroraTheme.spacing.md,\n  },\n  chartBarContainer: {\n    alignItems: \"center\",\n    flex: 1,\n    height: '100%',\n    justifyContent: 'flex-end',\n  },\n  chartBarWrapper: {\n    width: '100%',\n    flex: 1,\n    justifyContent: 'flex-end',\n    paddingHorizontal: 2,\n  },\n  chartBar: {\n    width: \"100%\",\n    borderRadius: 4,\n    borderTopLeftRadius: 4,\n    borderTopRightRadius: 4,\n    minHeight: 4,\n    borderWidth: 1,\n    borderBottomWidth: 0,\n  },\n  chartLabel: {\n    fontSize: 10,\n    color: auroraTheme.colors.text.tertiary,\n    marginTop: 6,\n    fontFamily: auroraTheme.typography.fontFamily.mono,\n  },\n  emptyState: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: auroraTheme.spacing.xl,\n    gap: auroraTheme.spacing.md,\n  },\n  emptyText: {\n    color: auroraTheme.colors.text.secondary,\n    fontStyle: \"italic\",\n  },\n  errorContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: auroraTheme.spacing[\"2xl\"],\n    gap: auroraTheme.spacing.md,\n  },\n  errorText: {\n    color: auroraTheme.colors.error[500],\n    fontSize: auroraTheme.typography.fontSize.md,\n  },\n  retryButton: {\n    paddingHorizontal: auroraTheme.spacing.lg,\n    paddingVertical: auroraTheme.spacing.sm,\n    backgroundColor: auroraTheme.colors.primary[500],\n    borderRadius: auroraTheme.borderRadius.full,\n  },\n  retryText: {\n    color: '#fff',\n    fontWeight: '600',\n  }\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/app/welcome.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TouchableOpacity' is defined but never used.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BlurView' is defined but never used.","line":14,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Platform,\n  useWindowDimensions,\n} from \"react-native\";\nimport { useRouter } from \"expo-router\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { StatusBar } from \"expo-status-bar\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport { BlurView } from \"expo-blur\";\nimport * as Haptics from \"expo-haptics\";\nimport Animated, { FadeInDown, FadeInUp } from \"react-native-reanimated\";\nimport { useAuthStore } from \"@/store/authStore\";\nimport { AuroraBackground, GlassCard, AnimatedPressable } from \"../src/components/ui\";\nimport { auroraTheme } from \"../src/theme/auroraTheme\";\n\nconst FeatureCard = ({\n  icon,\n  title,\n  delay,\n}: {\n  icon: keyof typeof Ionicons.glyphMap;\n  title: string;\n  delay: number;\n}) => (\n  <Animated.View\n    entering={FadeInDown.delay(delay).springify()}\n    style={styles.featureWrapper}\n  >\n    <GlassCard style={styles.featureCard}>\n      <View style={styles.iconCircle}>\n        <Ionicons name={icon} size={24} color={auroraTheme.colors.primary[500]} />\n      </View>\n      <Text style={styles.featureText}>{title}</Text>\n    </GlassCard>\n  </Animated.View>\n);\n\nexport default function WelcomeScreen() {\n  const router = useRouter();\n  const { user, isLoading } = useAuthStore();\n  const { width } = useWindowDimensions();\n  const isDesktop = width >= 1024; // Simple desktop check\n\n  // Redirect if user is already logged in\n  React.useEffect(() => {\n    if (!isLoading && user) {\n      __DEV__ &&\n        console.log(\"ðŸ”„ [WELCOME] User already logged in, redirecting:\", {\n          role: user.role,\n        });\n      if (\n        Platform.OS === \"web\" &&\n        (user.role === \"supervisor\" || user.role === \"admin\")\n      ) {\n        router.replace(\"/admin/metrics\" as any);\n      } else if (user.role === \"supervisor\" || user.role === \"admin\") {\n        router.replace(\"/supervisor/dashboard\" as any);\n      } else {\n        router.replace(\"/staff/home\" as any);\n      }\n    }\n  }, [user, isLoading, router]);\n\n  const handlePress = (route: string) => {\n    Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    router.push(route as any);\n  };\n\n  return (\n    <AuroraBackground>\n      <StatusBar style=\"light\" />\n\n      {/* Decorative Background Elements */}\n      <View style={styles.decorativeCircle1} />\n      <View style={styles.decorativeCircle2} />\n\n      <View style={[styles.content, { maxWidth: isDesktop ? 600 : \"100%\" }]}>\n        {/* Header Section */}\n        <Animated.View\n          entering={FadeInUp.duration(1000).springify()}\n          style={styles.header}\n        >\n          <View style={styles.logoContainer}>\n            <LinearGradient\n              colors={[auroraTheme.colors.primary[500], auroraTheme.colors.primary[600]]}\n              style={styles.logoBackground}\n              start={{ x: 0, y: 0 }}\n              end={{ x: 1, y: 1 }}\n            >\n              <Ionicons name=\"cube-outline\" size={64} color={auroraTheme.colors.text.primary} />\n            </LinearGradient>\n            <View style={styles.logoGlow} />\n          </View>\n\n          <Text style={styles.title}>Lavanya E-Mart</Text>\n          <Text style={styles.subtitle}>Stock Verification System</Text>\n          <View style={styles.versionBadge}>\n            <Text style={styles.versionText}>v2.0 Premium</Text>\n          </View>\n        </Animated.View>\n\n        {/* Features Grid */}\n        <View style={styles.featuresContainer}>\n          <FeatureCard\n            icon=\"barcode-outline\"\n            title=\"Smart Scanning\"\n            delay={400}\n          />\n          <FeatureCard icon=\"sync-outline\" title=\"Live Sync\" delay={600} />\n          <FeatureCard\n            icon=\"stats-chart-outline\"\n            title=\"Analytics\"\n            delay={800}\n          />\n        </View>\n\n        {/* Action Buttons */}\n        <Animated.View\n          entering={FadeInDown.delay(1000).springify()}\n          style={styles.actions}\n        >\n          <AnimatedPressable\n            onPress={() => handlePress(\"/login\")}\n            style={styles.buttonShadow}\n          >\n            <LinearGradient\n              colors={[auroraTheme.colors.primary[500], auroraTheme.colors.primary[600]]}\n              start={{ x: 0, y: 0 }}\n              end={{ x: 1, y: 0 }}\n              style={styles.loginButton}\n            >\n              <Text style={styles.loginButtonText}>Get Started</Text>\n              <Ionicons name=\"arrow-forward\" size={20} color={auroraTheme.colors.text.primary} />\n            </LinearGradient>\n          </AnimatedPressable>\n\n          <AnimatedPressable\n            onPress={() => handlePress(\"/register\")}\n            style={styles.registerButtonWrapper}\n          >\n            <GlassCard style={styles.registerButton}>\n              <Text style={styles.registerButtonText}>Create Account</Text>\n            </GlassCard>\n          </AnimatedPressable>\n        </Animated.View>\n\n        {/* Footer */}\n        <Animated.View entering={FadeInDown.delay(1200)} style={styles.footer}>\n          <Text style={styles.footerText}>Â© 2024 Lavanya E-Mart</Text>\n          <Text style={styles.footerSubtext}>Powered by Stock Verify</Text>\n        </Animated.View>\n      </View>\n    </AuroraBackground>\n  );\n}\n\nconst styles = StyleSheet.create({\n  content: {\n    flex: 1,\n    justifyContent: \"space-between\",\n    paddingVertical: Platform.OS === \"ios\" ? 60 : 40,\n    paddingHorizontal: auroraTheme.spacing.lg,\n    zIndex: 1,\n    width: \"100%\",\n  },\n  decorativeCircle1: {\n    position: \"absolute\",\n    top: -100,\n    left: -100,\n    width: 300,\n    height: 300,\n    borderRadius: 150,\n    backgroundColor: auroraTheme.colors.primary[500],\n    opacity: 0.1,\n    transform: [{ scale: 1.5 }],\n  },\n  decorativeCircle2: {\n    position: \"absolute\",\n    bottom: -50,\n    right: -50,\n    width: 200,\n    height: 200,\n    borderRadius: 100,\n    backgroundColor: auroraTheme.colors.accent[500],\n    opacity: 0.1,\n    transform: [{ scale: 1.5 }],\n  },\n  header: {\n    alignItems: \"center\",\n    marginTop: auroraTheme.spacing.xl,\n  },\n  logoContainer: {\n    marginBottom: auroraTheme.spacing.lg,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  logoBackground: {\n    width: 120,\n    height: 120,\n    borderRadius: 40,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    transform: [{ rotate: \"-5deg\" }],\n    shadowColor: auroraTheme.colors.primary[500],\n    shadowOffset: { width: 0, height: 10 },\n    shadowOpacity: 0.3,\n    shadowRadius: 20,\n    elevation: 10,\n    zIndex: 2,\n  },\n  logoGlow: {\n    position: \"absolute\",\n    width: 120,\n    height: 120,\n    borderRadius: 40,\n    backgroundColor: auroraTheme.colors.primary[500],\n    opacity: 0.3,\n    transform: [{ scale: 1.2 }, { rotate: \"-5deg\" }],\n    zIndex: 1,\n  },\n  title: {\n    fontSize: 40,\n    fontWeight: \"800\",\n    color: auroraTheme.colors.text.primary,\n    marginBottom: 8,\n    textAlign: \"center\",\n    letterSpacing: -1,\n    textShadowColor: \"rgba(0,0,0,0.5)\",\n    textShadowOffset: { width: 0, height: 2 },\n    textShadowRadius: 4,\n  },\n  subtitle: {\n    fontSize: 18,\n    color: auroraTheme.colors.text.secondary,\n    marginBottom: 16,\n    textAlign: \"center\",\n    fontWeight: \"500\",\n  },\n  versionBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    backgroundColor: \"rgba(255,255,255,0.1)\",\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: auroraTheme.colors.border.light,\n  },\n  versionText: {\n    color: auroraTheme.colors.text.tertiary,\n    fontSize: 12,\n    fontWeight: \"600\",\n  },\n  featuresContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    gap: 12,\n    marginTop: auroraTheme.spacing.xl,\n  },\n  featureWrapper: {\n    flex: 1,\n  },\n  featureCard: {\n    padding: 16,\n    alignItems: \"center\",\n    height: 110,\n    justifyContent: \"center\",\n  },\n  iconCircle: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: `${auroraTheme.colors.primary[500]}20`,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginBottom: 12,\n  },\n  featureText: {\n    color: auroraTheme.colors.text.primary,\n    fontSize: 12,\n    fontWeight: \"600\",\n    textAlign: \"center\",\n  },\n  actions: {\n    gap: 16,\n    marginTop: auroraTheme.spacing.xl,\n  },\n  buttonShadow: {\n    shadowColor: auroraTheme.colors.primary[500],\n    shadowOffset: { width: 0, height: 8 },\n    shadowOpacity: 0.4,\n    shadowRadius: 16,\n    elevation: 8,\n  },\n  loginButton: {\n    height: 60,\n    borderRadius: auroraTheme.borderRadius.lg,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    gap: 12,\n  },\n  loginButtonText: {\n    color: auroraTheme.colors.text.primary,\n    fontSize: 18,\n    fontWeight: \"bold\",\n  },\n  registerButtonWrapper: {\n    borderRadius: auroraTheme.borderRadius.lg,\n    overflow: \"hidden\",\n  },\n  registerButton: {\n    height: 60,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  registerButtonText: {\n    color: auroraTheme.colors.text.primary,\n    fontSize: 16,\n    fontWeight: \"600\",\n  },\n  footer: {\n    alignItems: \"center\",\n    marginTop: auroraTheme.spacing.lg,\n  },\n  footerText: {\n    color: auroraTheme.colors.text.disabled,\n    fontSize: 12,\n  },\n  footerSubtext: {\n    color: auroraTheme.colors.text.disabled,\n    fontSize: 10,\n    marginTop: 4,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/AppLogo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/AppVersion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/DataTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/DatabaseSyncStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ErrorBoundary.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'modernLayout' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Error Boundary Component\n * Catches and handles React component errors\n * Enhanced with modern design system support\n */\n\nimport React, { Component, ReactNode } from \"react\";\nimport { View, Text, StyleSheet, ScrollView } from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { errorReporter } from \"../services/errorRecovery\";\nimport {\n  modernColors,\n  modernTypography,\n  modernSpacing,\n  modernLayout,\n} from \"../styles/modernDesignSystem\";\nimport { PremiumButton } from \"./premium/PremiumButton\";\n\ninterface Props {\n  children: ReactNode;\n  fallback?: (error: Error, errorInfo: any) => ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: any;\n}\n\nexport class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return {\n      hasError: true,\n      error,\n      errorInfo: null,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: any) {\n    // Safely report error\n    try {\n      if (errorReporter && typeof errorReporter.report === \"function\") {\n        errorReporter.report(error, \"ErrorBoundary\", {\n          componentStack: errorInfo?.componentStack,\n        });\n      }\n    } catch (reportError) {\n      console.error(\"Error reporting failed:\", reportError);\n    }\n\n    this.setState({\n      error,\n      errorInfo,\n    });\n  }\n\n  handleReset = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        try {\n          return this.props.fallback(this.state.error!, this.state.errorInfo);\n        } catch (fallbackError) {\n          console.error(\"Fallback render failed:\", fallbackError);\n          // Continue to default error UI\n        }\n      }\n\n      return (\n        <View style={styles.container}>\n          <ScrollView contentContainerStyle={styles.content} showsVerticalScrollIndicator={false}>\n            <View style={styles.iconContainer}>\n              <Ionicons name=\"warning-outline\" size={80} color={modernColors.error.main} />\n            </View>\n\n            <Text style={styles.title}>Something went wrong</Text>\n\n            <Text style={styles.message}>\n              {this.state.error?.message || \"An unexpected error occurred\"}\n            </Text>\n\n            {__DEV__ && this.state.error && (\n              <View style={styles.details}>\n                <Text style={styles.detailsTitle}>Error Details:</Text>\n                <Text style={styles.detailsText}>{this.state.error.toString()}</Text>\n                {this.state.errorInfo?.componentStack && (\n                  <Text style={styles.detailsText}>{this.state.errorInfo.componentStack}</Text>\n                )}\n              </View>\n            )}\n\n            <View style={styles.buttonContainer}>\n              <PremiumButton\n                title=\"Try Again\"\n                onPress={this.handleReset}\n                variant=\"primary\"\n                size=\"medium\"\n                icon=\"refresh-outline\"\n                gradientColors={[...modernColors.gradients.primary]}\n              />\n            </View>\n          </ScrollView>\n        </View>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: modernColors.background.default,\n  },\n  content: {\n    flexGrow: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: modernSpacing.xl,\n  },\n  iconContainer: {\n    marginBottom: modernSpacing.lg,\n    padding: modernSpacing.lg,\n    backgroundColor: \"rgba(255, 82, 82, 0.1)\", // Light red background\n    borderRadius: 50,\n  },\n  title: {\n    ...modernTypography.h2,\n    color: modernColors.text.primary,\n    marginBottom: modernSpacing.md,\n    textAlign: \"center\",\n  },\n  message: {\n    ...modernTypography.body.large,\n    color: modernColors.text.secondary,\n    textAlign: \"center\",\n    marginBottom: modernSpacing.xl,\n    paddingHorizontal: modernSpacing.md,\n  },\n  details: {\n    width: \"100%\",\n    padding: modernSpacing.md,\n    backgroundColor: modernColors.background.paper,\n    borderRadius: 12,\n    marginBottom: modernSpacing.xl,\n    borderWidth: 1,\n    borderColor: modernColors.border.light,\n  },\n  detailsTitle: {\n    ...modernTypography.h4,\n    color: modernColors.text.primary,\n    marginBottom: modernSpacing.sm,\n  },\n  detailsText: {\n    ...modernTypography.body.small,\n    color: modernColors.text.secondary,\n    fontFamily: \"monospace\",\n    marginBottom: modernSpacing.xs,\n  },\n  buttonContainer: {\n    width: \"100%\",\n    maxWidth: 300,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ItemFilters.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadLocations'. Either include it or remove the dependency array.","line":68,"column":6,"nodeType":"ArrayExpression","endLine":68,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadLocations]","fix":{"range":[1996,1998],"text":"[loadLocations]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'renderSelectionModal' is assigned a value but never used.","line":135,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":135,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/LoadingSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/LogoutButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ModernButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ModernCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/OnlineStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/Pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/PullToRefresh.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/RefreshButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/SwipeableRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/SyncStatusBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ToastProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/UpgradeNotification.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/auth/ConnectionStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/auth/PinKeypad.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'modernTypography' is defined but never used.","line":29,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'modernSpacing' is defined but never used.","line":29,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnimatedTouchable' is assigned a value but never used.","line":44,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":24},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'shakeX'. Either include it or remove the dependency array.","line":98,"column":6,"nodeType":"ArrayExpression","endLine":98,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: [error, shakeX]","fix":{"range":[2562,2569],"text":"[error, shakeX]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * PIN Keypad Component\n *\n * Features:\n * - 4-digit PIN input with large tap targets (minimum 60px)\n * - Visual feedback with filled/empty indicators\n * - Haptic feedback on key press\n * - Backspace and clear functionality\n * - Accessibility support\n */\n\nimport React, { useCallback, useMemo } from \"react\";\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  Dimensions,\n  Platform,\n} from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport * as Haptics from \"expo-haptics\";\nimport Animated, {\n  useAnimatedStyle,\n  withSequence,\n  withTiming,\n  useSharedValue,\n} from \"react-native-reanimated\";\nimport { modernColors, modernTypography, modernSpacing } from \"../../styles/modernDesignSystem\";\n\nconst { width: SCREEN_WIDTH } = Dimensions.get(\"window\");\nconst KEYPAD_SIZE = Math.min(SCREEN_WIDTH - 64, 320);\nconst KEY_SIZE = Math.max(60, (KEYPAD_SIZE - 32) / 3); // Minimum 60px tap target\n\ninterface PinKeypadProps {\n  pin: string;\n  maxLength?: number;\n  onPinChange: (pin: string) => void;\n  onComplete?: (pin: string) => void;\n  disabled?: boolean;\n  error?: boolean;\n}\n\nconst AnimatedTouchable = Animated.createAnimatedComponent(TouchableOpacity);\n\nexport function PinKeypad({\n  pin,\n  maxLength = 4,\n  onPinChange,\n  onComplete,\n  disabled = false,\n  error = false,\n}: PinKeypadProps) {\n  const keys = useMemo(() => [\n    [\"1\", \"2\", \"3\"],\n    [\"4\", \"5\", \"6\"],\n    [\"7\", \"8\", \"9\"],\n    [\"clear\", \"0\", \"backspace\"],\n  ], []);\n\n  // Animation for error shake\n  const shakeX = useSharedValue(0);\n\n  const handleKeyPress = useCallback((key: string) => {\n    if (disabled) return;\n\n    if (Platform.OS !== \"web\") {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    if (key === \"backspace\") {\n      onPinChange(pin.slice(0, -1));\n    } else if (key === \"clear\") {\n      onPinChange(\"\");\n    } else if (pin.length < maxLength) {\n      const newPin = pin + key;\n      onPinChange(newPin);\n      if (newPin.length === maxLength && onComplete) {\n        onComplete(newPin);\n      }\n    }\n  }, [pin, maxLength, onPinChange, onComplete, disabled]);\n\n  // Trigger shake animation on error\n  React.useEffect(() => {\n    if (error) {\n      shakeX.value = withSequence(\n        withTiming(-10, { duration: 50 }),\n        withTiming(10, { duration: 50 }),\n        withTiming(-10, { duration: 50 }),\n        withTiming(10, { duration: 50 }),\n        withTiming(0, { duration: 50 })\n      );\n      if (Platform.OS !== \"web\") {\n        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n      }\n    }\n  }, [error]);\n\n  const indicatorStyle = useAnimatedStyle(() => ({\n    transform: [{ translateX: shakeX.value }],\n  }));\n\n  const renderIndicators = () => (\n    <Animated.View style={[styles.indicators, indicatorStyle]}>\n      {Array.from({ length: maxLength }).map((_, index) => (\n        <View\n          key={index}\n          style={[\n            styles.indicator,\n            pin.length > index && styles.indicatorFilled,\n            error && styles.indicatorError,\n          ]}\n        />\n      ))}\n    </Animated.View>\n  );\n\n  const renderKey = (key: string, rowIndex: number, colIndex: number) => {\n    const isSpecialKey = key === \"backspace\" || key === \"clear\";\n    const isEmpty = key === \"\";\n\n    if (isEmpty) {\n      return <View key={`empty-${rowIndex}-${colIndex}`} style={styles.keyEmpty} />;\n    }\n\n    return (\n      <TouchableOpacity\n        key={`key-${key}`}\n        style={[\n          styles.key,\n          isSpecialKey && styles.keySpecial,\n          disabled && styles.keyDisabled,\n        ]}\n        onPress={() => handleKeyPress(key)}\n        disabled={disabled}\n        activeOpacity={0.6}\n        accessibilityRole=\"button\"\n        accessibilityLabel={\n          key === \"backspace\" ? \"Delete\" : key === \"clear\" ? \"Clear\" : `Number ${key}`\n        }\n      >\n        {key === \"backspace\" ? (\n          <Ionicons\n            name=\"backspace-outline\"\n            size={28}\n            color={disabled ? modernColors.text.disabled : modernColors.text.secondary}\n          />\n        ) : key === \"clear\" ? (\n          <Text style={[styles.keyTextSpecial, disabled && styles.keyTextDisabled]}>\n            C\n          </Text>\n        ) : (\n          <Text style={[styles.keyText, disabled && styles.keyTextDisabled]}>\n            {key}\n          </Text>\n        )}\n      </TouchableOpacity>\n    );\n  };\n\n  return (\n    <View style={styles.container}>\n      {renderIndicators()}\n      <View style={styles.keypad}>\n        {keys.map((row, rowIndex) => (\n          <View key={`row-${rowIndex}`} style={styles.row}>\n            {row.map((key, colIndex) => renderKey(key, rowIndex, colIndex))}\n          </View>\n        ))}\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: \"center\",\n    width: \"100%\",\n  },\n  indicators: {\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    gap: 16,\n    marginBottom: 32,\n  },\n  indicator: {\n    width: 16,\n    height: 16,\n    borderRadius: 8,\n    borderWidth: 2,\n    borderColor: modernColors.border.medium,\n    backgroundColor: \"transparent\",\n  },\n  indicatorFilled: {\n    backgroundColor: modernColors.primary[500],\n    borderColor: modernColors.primary[400],\n  },\n  indicatorError: {\n    borderColor: modernColors.semantic.error,\n    backgroundColor: modernColors.semantic.error,\n  },\n  keypad: {\n    width: KEYPAD_SIZE,\n    gap: 12,\n  },\n  row: {\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    gap: 12,\n  },\n  key: {\n    width: KEY_SIZE,\n    height: KEY_SIZE,\n    borderRadius: KEY_SIZE / 2,\n    backgroundColor: \"rgba(255, 255, 255, 0.08)\",\n    borderWidth: 1,\n    borderColor: \"rgba(255, 255, 255, 0.12)\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  keySpecial: {\n    backgroundColor: \"rgba(255, 255, 255, 0.04)\",\n    borderColor: \"rgba(255, 255, 255, 0.08)\",\n  },\n  keyDisabled: {\n    opacity: 0.4,\n  },\n  keyEmpty: {\n    width: KEY_SIZE,\n    height: KEY_SIZE,\n  },\n  keyText: {\n    fontSize: 28,\n    fontWeight: \"600\",\n    color: modernColors.text.primary,\n  },\n  keyTextSpecial: {\n    fontSize: 20,\n    fontWeight: \"600\",\n    color: modernColors.text.secondary,\n  },\n  keyTextDisabled: {\n    color: modernColors.text.disabled,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/auth/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/charts/BarChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/charts/LineChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/charts/PieChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/charts/SimpleBarChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/charts/SimpleLineChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/charts/SimplePieChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/charts/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/feedback/ErrorState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/feedback/LoadingSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/feedback/LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/feedback/LoadingState.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'opacity' and 'scale'. Either include them or remove the dependency array.","line":73,"column":6,"nodeType":"ArrayExpression","endLine":73,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [opacity, scale]","fix":{"range":[1748,1750],"text":"[opacity, scale]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'progress'. Either include it or remove the dependency array.","line":140,"column":6,"nodeType":"ArrayExpression","endLine":140,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [progress]","fix":{"range":[3368,3370],"text":"[progress]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * LoadingState Component\n * Unified loading state management with multiple variants\n *\n * Features:\n * - Animated spinner with smooth transitions\n * - Customizable skeletons for content placeholders\n * - Full-screen overlay option\n * - Accessibility support\n * - Dark mode compatible\n */\n\nimport React, { useEffect } from \"react\";\nimport {\n  View,\n  StyleSheet,\n  DimensionValue,\n  Text,\n} from \"react-native\";\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withRepeat,\n  withSequence,\n  withTiming,\n  Easing,\n} from \"react-native-reanimated\";\nimport { LoadingSpinner as SpinkitSpinner } from \"../ui/LoadingSpinner\";\nimport {\n  modernColors,\n  modernTypography,\n  modernSpacing,\n  modernBorderRadius,\n  modernAnimations,\n} from \"../../styles/modernDesignSystem\";\n\n// ==========================================\n// LOADING SPINNER\n// ==========================================\n\ninterface LoadingSpinnerProps {\n  /** Size of the spinner */\n  size?: \"small\" | \"medium\" | \"large\";\n  /** Custom spinner color */\n  color?: string;\n  /** Message to display below spinner */\n  message?: string;\n  /** Show full-screen overlay */\n  overlay?: boolean;\n  /** Accessibility label */\n  accessibilityLabel?: string;\n}\n\nexport const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({\n  size = \"large\",\n  color,\n  message,\n  overlay = false,\n  accessibilityLabel = \"Loading\",\n}) => {\n  const opacity = useSharedValue(0);\n  const scale = useSharedValue(0.8);\n\n  useEffect(() => {\n    opacity.value = withTiming(1, {\n      duration: modernAnimations.duration.normal,\n      easing: Easing.out(Easing.ease),\n    });\n    scale.value = withTiming(1, {\n      duration: modernAnimations.duration.normal,\n      easing: Easing.out(Easing.ease),\n    });\n  }, []);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    opacity: opacity.value,\n    transform: [{ scale: scale.value }],\n  }));\n\n  const spinnerSize = size === \"small\" ? 32 : size === \"medium\" ? 48 : 64;\n  const spinnerColor = color || modernColors.primary[500];\n\n  const containerStyle = overlay\n    ? [styles.spinnerContainer, styles.spinnerOverlay]\n    : styles.spinnerContainer;\n\n  return (\n    <Animated.View\n      style={[containerStyle, animatedStyle]}\n      accessible={true}\n      accessibilityRole=\"progressbar\"\n      accessibilityLabel={accessibilityLabel}\n      accessibilityLiveRegion=\"polite\"\n    >\n      <SpinkitSpinner size={spinnerSize} color={spinnerColor} />\n      {message && (\n        <Text\n          style={[styles.spinnerMessage, { color: spinnerColor }]}\n          accessibilityLiveRegion=\"polite\"\n        >\n          {message}\n        </Text>\n      )}\n    </Animated.View>\n  );\n};\n\n// ==========================================\n// SKELETON LOADER\n// ==========================================\n\ninterface SkeletonProps {\n  /** Skeleton width */\n  width?: DimensionValue;\n  /** Skeleton height */\n  height?: number;\n  /** Border radius */\n  borderRadius?: number;\n  /** Additional styles */\n  style?: any;\n}\n\nexport const Skeleton: React.FC<SkeletonProps> = ({\n  width = \"100%\",\n  height = 16,\n  borderRadius = modernBorderRadius.sm,\n  style,\n}) => {\n  const progress = useSharedValue(0);\n\n  useEffect(() => {\n    progress.value = withRepeat(\n      withSequence(\n        withTiming(1, { duration: 1000 }),\n        withTiming(0, { duration: 1000 }),\n      ),\n      -1,\n      false,\n    );\n  }, []);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    opacity: 0.3 + 0.4 * progress.value,\n  }));\n\n  return (\n    <Animated.View\n      style={[\n        styles.skeleton,\n        {\n          width,\n          height,\n          borderRadius,\n          backgroundColor: modernColors.neutral[700],\n        },\n        animatedStyle,\n        style,\n      ]}\n      accessible={false}\n      importantForAccessibility=\"no\"\n    />\n  );\n};\n\n// ==========================================\n// SKELETON LIST\n// ==========================================\n\ninterface SkeletonListProps {\n  /** Number of skeleton items */\n  count?: number;\n  /** Height of each item */\n  itemHeight?: number;\n  /** Spacing between items */\n  spacing?: number;\n}\n\nexport const SkeletonList: React.FC<SkeletonListProps> = ({\n  count = 5,\n  itemHeight = 80,\n  spacing = modernSpacing.md,\n}) => {\n  return (\n    <View style={styles.listContainer}>\n      {Array.from({ length: count }).map((_, index) => (\n        <View\n          key={index}\n          style={[styles.listItem, { marginBottom: spacing, height: itemHeight }]}\n        >\n          <Skeleton width={60} height={60} borderRadius={modernBorderRadius.md} />\n          <View style={styles.listItemContent}>\n            <Skeleton width=\"70%\" height={14} borderRadius={modernBorderRadius.sm} />\n            <Skeleton\n              width=\"50%\"\n              height={12}\n              borderRadius={modernBorderRadius.sm}\n              style={{ marginTop: modernSpacing.sm }}\n            />\n          </View>\n        </View>\n      ))}\n    </View>\n  );\n};\n\n// ==========================================\n// CARD SKELETON\n// ==========================================\n\ninterface CardSkeletonProps {\n  /** Number of skeleton cards */\n  count?: number;\n  /** Spacing between cards */\n  spacing?: number;\n}\n\nexport const CardSkeleton: React.FC<CardSkeletonProps> = ({\n  count = 3,\n  spacing = modernSpacing.md,\n}) => {\n  return (\n    <View style={styles.cardContainer}>\n      {Array.from({ length: count }).map((_, index) => (\n        <View\n          key={index}\n          style={[\n            styles.card,\n            { marginBottom: index < count - 1 ? spacing : 0 },\n          ]}\n        >\n          <Skeleton width=\"100%\" height={120} borderRadius={modernBorderRadius.md} />\n          <View style={styles.cardContent}>\n            <Skeleton width=\"80%\" height={16} borderRadius={modernBorderRadius.sm} />\n            <Skeleton\n              width=\"60%\"\n              height={14}\n              borderRadius={modernBorderRadius.sm}\n              style={{ marginTop: modernSpacing.sm }}\n            />\n          </View>\n        </View>\n      ))}\n    </View>\n  );\n};\n\n// ==========================================\n// STYLES\n// ==========================================\n\nconst styles = StyleSheet.create({\n  // Spinner styles\n  spinnerContainer: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: modernSpacing.lg,\n  },\n  spinnerOverlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: modernColors.background.overlay,\n    zIndex: 1000,\n  },\n  spinnerMessage: {\n    ...modernTypography.body.medium,\n    marginTop: modernSpacing.md,\n    textAlign: \"center\",\n  },\n\n  // Skeleton styles\n  skeleton: {\n    backgroundColor: modernColors.neutral[700],\n  },\n\n  // List styles\n  listContainer: {\n    paddingHorizontal: modernSpacing.md,\n  },\n  listItem: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  listItemContent: {\n    flex: 1,\n    marginLeft: modernSpacing.md,\n  },\n\n  // Card styles\n  cardContainer: {\n    paddingHorizontal: modernSpacing.md,\n  },\n  card: {\n    backgroundColor: modernColors.background.paper,\n    borderRadius: modernBorderRadius.lg,\n    overflow: \"hidden\",\n    shadowColor: \"#000\",\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  cardContent: {\n    padding: modernSpacing.md,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/feedback/NetworkStatusBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/feedback/Toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/feedback/ToastProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/feedback/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/forms/DateRangePicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/forms/EnhancedButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/forms/EnhancedTextInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/forms/Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/forms/SearchAutocomplete.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/forms/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/layout/AdminLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/layout/Container.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/layout/Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/layout/Screen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/layout/Section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/layout/SettingGroup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/layout/SettingItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/layout/StaffLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/layout/SupervisorLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/layout/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/modals/BulkEntryModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/modals/ImageViewerModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Text' is defined but never used.","line":2,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Modal, StyleSheet, View, TouchableOpacity, Text, SafeAreaView, StatusBar } from 'react-native';\nimport Gallery from 'react-native-awesome-gallery';\nimport { Ionicons } from '@expo/vector-icons';\nimport { Image } from 'expo-image';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\n\ninterface ImageViewerModalProps {\n  visible: boolean;\n  images: string[]; // Array of URIs\n  initialIndex: number;\n  onClose: () => void;\n}\n\nexport const ImageViewerModal: React.FC<ImageViewerModalProps> = ({\n  visible,\n  images,\n  initialIndex,\n  onClose,\n}) => {\n  return (\n    <Modal visible={visible} transparent={true} animationType=\"fade\" onRequestClose={onClose}>\n      <GestureHandlerRootView style={{ flex: 1 }}>\n        <View style={styles.container}>\n          <StatusBar hidden={true} />\n          <Gallery\n            data={images}\n            initialIndex={initialIndex}\n            onSwipeToClose={onClose}\n            renderItem={({ item }) => (\n              <Image source={{ uri: item }} style={StyleSheet.absoluteFillObject} contentFit=\"contain\" />\n            )}\n          />\n          <SafeAreaView style={styles.header}>\n            <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n              <Ionicons name=\"close\" size={28} color=\"white\" />\n            </TouchableOpacity>\n          </SafeAreaView>\n        </View>\n      </GestureHandlerRootView>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: 'black',\n  },\n  header: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    padding: 16,\n    alignItems: 'flex-end',\n    zIndex: 10,\n  },\n  closeButton: {\n    padding: 8,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    borderRadius: 20,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/modals/PhotoCaptureModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/modals/PinEntryModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/modals/SearchableSelectModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/modals/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/navigation/AdminSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/navigation/AppHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/navigation/QuickActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/navigation/StaffTabBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/navigation/SupervisorSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/navigation/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/premium/PremiumButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/premium/PremiumCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/premium/PremiumInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/premium/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/ActiveSectionHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/BarcodeScanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/CameraView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/ItemDisplay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/ItemSearch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/LocationInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/LocationVerificationSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/MRPVariantSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/PhotoCapture.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/QuantityInputForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/RackProgressCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/ResultOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/SectionFocusConfig.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/SerialNumberEntry.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/SessionStartModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/VarianceReasonModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/__tests__/LocationVerificationSection.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/scan/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Accordion.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'rotation'. Either include it or remove the dependency array.","line":101,"column":6,"nodeType":"ArrayExpression","endLine":101,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [isExpanded, rotation]","fix":{"range":[2508,2520],"text":"[isExpanded, rotation]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Accordion Component\n * Collapsible content sections\n * Phase 2: Design System - Core Components\n */\n\nimport React, { useState } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, LayoutAnimation, Platform, UIManager } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withTiming,\n} from 'react-native-reanimated';\nimport { colorPalette, spacing, typography, borderRadius, shadows } from '@/theme/designTokens';\n\n// Enable LayoutAnimation on Android\nif (Platform.OS === 'android' && UIManager.setLayoutAnimationEnabledExperimental) {\n  UIManager.setLayoutAnimationEnabledExperimental(true);\n}\n\nexport interface AccordionItem {\n  id: string;\n  title: string;\n  content: React.ReactNode;\n  icon?: keyof typeof Ionicons.glyphMap;\n}\n\ninterface AccordionProps {\n  items: AccordionItem[];\n  multiple?: boolean;\n  defaultExpanded?: string[];\n  onItemToggle?: (id: string, isExpanded: boolean) => void;\n}\n\nexport const Accordion: React.FC<AccordionProps> = ({\n  items,\n  multiple = false,\n  defaultExpanded = [],\n  onItemToggle,\n}) => {\n  const [expandedItems, setExpandedItems] = useState<Set<string>>(new Set(defaultExpanded));\n\n  const toggleItem = (id: string) => {\n    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n\n    setExpandedItems(prev => {\n      const newSet = new Set(prev);\n      const isExpanding = !newSet.has(id);\n\n      if (multiple) {\n        if (isExpanding) {\n          newSet.add(id);\n        } else {\n          newSet.delete(id);\n        }\n      } else {\n        newSet.clear();\n        if (isExpanding) {\n          newSet.add(id);\n        }\n      }\n\n      onItemToggle?.(id, isExpanding);\n      return newSet;\n    });\n  };\n\n  return (\n    <View style={styles.container}>\n      {items.map((item, index) => (\n        <AccordionItemComponent\n          key={item.id}\n          item={item}\n          isExpanded={expandedItems.has(item.id)}\n          onToggle={() => toggleItem(item.id)}\n          isLast={index === items.length - 1}\n        />\n      ))}\n    </View>\n  );\n};\n\ninterface AccordionItemComponentProps {\n  item: AccordionItem;\n  isExpanded: boolean;\n  onToggle: () => void;\n  isLast: boolean;\n}\n\nconst AccordionItemComponent: React.FC<AccordionItemComponentProps> = ({\n  item,\n  isExpanded,\n  onToggle,\n  isLast,\n}) => {\n  const rotation = useSharedValue(0);\n\n  React.useEffect(() => {\n    rotation.value = withTiming(isExpanded ? 180 : 0, { duration: 200 });\n  }, [isExpanded]);\n\n  const iconStyle = useAnimatedStyle(() => ({\n    transform: [{ rotate: `${rotation.value}deg` }],\n  }));\n\n  return (\n    <View style={[styles.item, !isLast && styles.itemBorder, shadows[1]]}>\n      <TouchableOpacity\n        style={styles.header}\n        onPress={onToggle}\n        activeOpacity={0.7}\n      >\n        {item.icon && (\n          <Ionicons\n            name={item.icon}\n            size={20}\n            color={colorPalette.neutral[700]}\n            style={styles.itemIcon}\n          />\n        )}\n\n        <Text style={styles.title}>{item.title}</Text>\n\n        <Animated.View style={iconStyle}>\n          <Ionicons\n            name=\"chevron-down\"\n            size={20}\n            color={colorPalette.neutral[600]}\n          />\n        </Animated.View>\n      </TouchableOpacity>\n\n      {isExpanded && (\n        <View style={styles.content}>\n          {item.content}\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    borderRadius: borderRadius.lg,\n    backgroundColor: colorPalette.neutral[0],\n    overflow: 'hidden',\n  },\n  item: {\n    backgroundColor: colorPalette.neutral[0],\n  },\n  itemBorder: {\n    borderBottomWidth: 1,\n    borderBottomColor: colorPalette.neutral[200],\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: spacing.base,\n    gap: spacing.sm,\n  },\n  itemIcon: {\n    marginRight: spacing.xs,\n  },\n  title: {\n    flex: 1,\n    fontSize: typography.fontSize.base,\n    fontWeight: typography.fontWeight.medium,\n    color: colorPalette.neutral[900],\n  },\n  content: {\n    padding: spacing.base,\n    paddingTop: 0,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/ActivityFeedItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/AdminResponsiveGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/AnimatedCounter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/AnimatedInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/AnimatedPressable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/AppearanceSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/AuroraBackground.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/BottomSheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Chip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/EnhancedBottomSheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/FadeIn.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/FloatingActionButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/FloatingScanButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/GlassCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/LayoutPicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/LiveIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/OnlineStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/ParticleField.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/PatternBackground.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Polygon' is defined but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'G' is defined but never used.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":4},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cols' is assigned a value but never used.","line":98,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":98,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rows' is assigned a value but never used.","line":99,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":99,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * PatternBackground Component\n *\n * Renders various pattern overlays for visual variety:\n * - Dots, Grid, Waves, Aurora, Mesh, Circuit, Hexagon\n *\n * Works with ThemeContext for dynamic pattern selection\n */\n\nimport React, { useMemo } from 'react';\nimport { View, StyleSheet, Dimensions } from 'react-native';\nimport Svg, {\n  Circle,\n  Line,\n  Path,\n  Defs,\n  Pattern as SvgPattern,\n  Rect,\n  Polygon,\n  G,\n  LinearGradient,\n  Stop,\n} from 'react-native-svg';\nimport { useThemeContext, PatternType } from '../../theme/ThemeContext';\n\nconst { width: SCREEN_WIDTH, height: SCREEN_HEIGHT } = Dimensions.get('window');\n\ninterface PatternBackgroundProps {\n  pattern?: PatternType;\n  opacity?: number;\n  color?: string;\n  secondaryColor?: string;\n  size?: 'small' | 'medium' | 'large';\n  animated?: boolean;\n}\n\n// Pattern size configurations\nconst PATTERN_SIZES = {\n  small: { spacing: 20, size: 2 },\n  medium: { spacing: 40, size: 4 },\n  large: { spacing: 60, size: 6 },\n};\n\nexport const PatternBackground: React.FC<PatternBackgroundProps> = ({\n  pattern: patternProp,\n  opacity = 0.15,\n  color,\n  secondaryColor,\n  size = 'medium',\n  animated = false,\n}) => {\n  const themeContext = useThemeContext();\n  const pattern = patternProp ?? themeContext.pattern;\n  const primaryColor = color ?? themeContext.theme.colors.accent;\n  const secondary = secondaryColor ?? themeContext.theme.colors.accentLight;\n\n  const { spacing, size: dotSize } = PATTERN_SIZES[size];\n\n  const patternContent = useMemo(() => {\n    if (pattern === 'none') return null;\n\n    switch (pattern) {\n      case 'dots':\n        return <DotsPattern spacing={spacing} size={dotSize} color={primaryColor} opacity={opacity} />;\n      case 'grid':\n        return <GridPattern spacing={spacing} color={primaryColor} opacity={opacity} />;\n      case 'waves':\n        return <WavesPattern color={primaryColor} secondaryColor={secondary} opacity={opacity} />;\n      case 'aurora':\n        return <AuroraPattern color={primaryColor} secondaryColor={secondary} opacity={opacity} />;\n      case 'mesh':\n        return <MeshPattern spacing={spacing} color={primaryColor} opacity={opacity} />;\n      case 'circuit':\n        return <CircuitPattern spacing={spacing} color={primaryColor} opacity={opacity} />;\n      case 'hexagon':\n        return <HexagonPattern spacing={spacing} color={primaryColor} opacity={opacity} />;\n      default:\n        return null;\n    }\n  }, [pattern, spacing, dotSize, primaryColor, secondary, opacity]);\n\n  if (!patternContent) return null;\n\n  return (\n    <View style={styles.container} pointerEvents=\"none\">\n      {patternContent}\n    </View>\n  );\n};\n\n// Dots Pattern\nconst DotsPattern: React.FC<{\n  spacing: number;\n  size: number;\n  color: string;\n  opacity: number;\n}> = ({ spacing, size, color, opacity }) => {\n  const cols = Math.ceil(SCREEN_WIDTH / spacing) + 1;\n  const rows = Math.ceil(SCREEN_HEIGHT / spacing) + 1;\n\n  return (\n    <Svg width={SCREEN_WIDTH} height={SCREEN_HEIGHT} style={StyleSheet.absoluteFill}>\n      <Defs>\n        <SvgPattern id=\"dots\" width={spacing} height={spacing} patternUnits=\"userSpaceOnUse\">\n          <Circle cx={spacing / 2} cy={spacing / 2} r={size} fill={color} opacity={opacity} />\n        </SvgPattern>\n      </Defs>\n      <Rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"url(#dots)\" />\n    </Svg>\n  );\n};\n\n// Grid Pattern\nconst GridPattern: React.FC<{\n  spacing: number;\n  color: string;\n  opacity: number;\n}> = ({ spacing, color, opacity }) => {\n  return (\n    <Svg width={SCREEN_WIDTH} height={SCREEN_HEIGHT} style={StyleSheet.absoluteFill}>\n      <Defs>\n        <SvgPattern id=\"grid\" width={spacing} height={spacing} patternUnits=\"userSpaceOnUse\">\n          <Line x1=\"0\" y1=\"0\" x2={spacing} y2=\"0\" stroke={color} strokeWidth=\"0.5\" opacity={opacity} />\n          <Line x1=\"0\" y1=\"0\" x2=\"0\" y2={spacing} stroke={color} strokeWidth=\"0.5\" opacity={opacity} />\n        </SvgPattern>\n      </Defs>\n      <Rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\n    </Svg>\n  );\n};\n\n// Waves Pattern\nconst WavesPattern: React.FC<{\n  color: string;\n  secondaryColor: string;\n  opacity: number;\n}> = ({ color, secondaryColor, opacity }) => {\n  const waveHeight = 60;\n  const waveCount = Math.ceil(SCREEN_HEIGHT / waveHeight) + 2;\n\n  return (\n    <Svg width={SCREEN_WIDTH} height={SCREEN_HEIGHT} style={StyleSheet.absoluteFill}>\n      <Defs>\n        <LinearGradient id=\"waveGradient\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"0\">\n          <Stop offset=\"0%\" stopColor={color} stopOpacity={opacity} />\n          <Stop offset=\"50%\" stopColor={secondaryColor} stopOpacity={opacity * 0.7} />\n          <Stop offset=\"100%\" stopColor={color} stopOpacity={opacity} />\n        </LinearGradient>\n      </Defs>\n      {Array.from({ length: waveCount }).map((_, i) => {\n        const y = i * waveHeight;\n        return (\n          <Path\n            key={i}\n            d={`M0,${y} Q${SCREEN_WIDTH / 4},${y - 20} ${SCREEN_WIDTH / 2},${y} T${SCREEN_WIDTH},${y}`}\n            stroke=\"url(#waveGradient)\"\n            strokeWidth=\"2\"\n            fill=\"none\"\n          />\n        );\n      })}\n    </Svg>\n  );\n};\n\n// Aurora Pattern (gradient blobs)\nconst AuroraPattern: React.FC<{\n  color: string;\n  secondaryColor: string;\n  opacity: number;\n}> = ({ color, secondaryColor, opacity }) => {\n  return (\n    <Svg width={SCREEN_WIDTH} height={SCREEN_HEIGHT} style={StyleSheet.absoluteFill}>\n      <Defs>\n        <LinearGradient id=\"aurora1\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"1\">\n          <Stop offset=\"0%\" stopColor={color} stopOpacity={opacity * 0.6} />\n          <Stop offset=\"100%\" stopColor={secondaryColor} stopOpacity={0} />\n        </LinearGradient>\n        <LinearGradient id=\"aurora2\" x1=\"1\" y1=\"0\" x2=\"0\" y2=\"1\">\n          <Stop offset=\"0%\" stopColor={secondaryColor} stopOpacity={opacity * 0.5} />\n          <Stop offset=\"100%\" stopColor={color} stopOpacity={0} />\n        </LinearGradient>\n      </Defs>\n      <Circle cx={SCREEN_WIDTH * 0.2} cy={SCREEN_HEIGHT * 0.3} r={200} fill=\"url(#aurora1)\" />\n      <Circle cx={SCREEN_WIDTH * 0.8} cy={SCREEN_HEIGHT * 0.5} r={250} fill=\"url(#aurora2)\" />\n      <Circle cx={SCREEN_WIDTH * 0.5} cy={SCREEN_HEIGHT * 0.8} r={180} fill=\"url(#aurora1)\" />\n    </Svg>\n  );\n};\n\n// Mesh Pattern (connected dots)\nconst MeshPattern: React.FC<{\n  spacing: number;\n  color: string;\n  opacity: number;\n}> = ({ spacing, color, opacity }) => {\n  return (\n    <Svg width={SCREEN_WIDTH} height={SCREEN_HEIGHT} style={StyleSheet.absoluteFill}>\n      <Defs>\n        <SvgPattern id=\"mesh\" width={spacing} height={spacing} patternUnits=\"userSpaceOnUse\">\n          {/* Diagonal lines */}\n          <Line x1=\"0\" y1=\"0\" x2={spacing} y2={spacing} stroke={color} strokeWidth=\"0.5\" opacity={opacity * 0.5} />\n          <Line x1={spacing} y1=\"0\" x2=\"0\" y2={spacing} stroke={color} strokeWidth=\"0.5\" opacity={opacity * 0.5} />\n          {/* Dots at intersections */}\n          <Circle cx=\"0\" cy=\"0\" r=\"2\" fill={color} opacity={opacity} />\n          <Circle cx={spacing} cy=\"0\" r=\"2\" fill={color} opacity={opacity} />\n          <Circle cx=\"0\" cy={spacing} r=\"2\" fill={color} opacity={opacity} />\n          <Circle cx={spacing} cy={spacing} r=\"2\" fill={color} opacity={opacity} />\n          <Circle cx={spacing / 2} cy={spacing / 2} r=\"3\" fill={color} opacity={opacity * 0.8} />\n        </SvgPattern>\n      </Defs>\n      <Rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"url(#mesh)\" />\n    </Svg>\n  );\n};\n\n// Circuit Pattern\nconst CircuitPattern: React.FC<{\n  spacing: number;\n  color: string;\n  opacity: number;\n}> = ({ spacing, color, opacity }) => {\n  const circuitSpacing = spacing * 2;\n\n  return (\n    <Svg width={SCREEN_WIDTH} height={SCREEN_HEIGHT} style={StyleSheet.absoluteFill}>\n      <Defs>\n        <SvgPattern id=\"circuit\" width={circuitSpacing} height={circuitSpacing} patternUnits=\"userSpaceOnUse\">\n          {/* Horizontal line */}\n          <Line x1=\"0\" y1={circuitSpacing / 2} x2={circuitSpacing * 0.3} y2={circuitSpacing / 2}\n            stroke={color} strokeWidth=\"1\" opacity={opacity} />\n          {/* Vertical connector */}\n          <Line x1={circuitSpacing * 0.3} y1={circuitSpacing / 2} x2={circuitSpacing * 0.3} y2={circuitSpacing * 0.3}\n            stroke={color} strokeWidth=\"1\" opacity={opacity} />\n          {/* Top horizontal */}\n          <Line x1={circuitSpacing * 0.3} y1={circuitSpacing * 0.3} x2={circuitSpacing * 0.7} y2={circuitSpacing * 0.3}\n            stroke={color} strokeWidth=\"1\" opacity={opacity} />\n          {/* Down connector */}\n          <Line x1={circuitSpacing * 0.7} y1={circuitSpacing * 0.3} x2={circuitSpacing * 0.7} y2={circuitSpacing * 0.7}\n            stroke={color} strokeWidth=\"1\" opacity={opacity} />\n          {/* Bottom horizontal */}\n          <Line x1={circuitSpacing * 0.7} y1={circuitSpacing * 0.7} x2={circuitSpacing} y2={circuitSpacing * 0.7}\n            stroke={color} strokeWidth=\"1\" opacity={opacity} />\n          {/* Nodes */}\n          <Circle cx={circuitSpacing * 0.3} cy={circuitSpacing * 0.3} r=\"3\" fill={color} opacity={opacity} />\n          <Circle cx={circuitSpacing * 0.7} cy={circuitSpacing * 0.7} r=\"3\" fill={color} opacity={opacity} />\n        </SvgPattern>\n      </Defs>\n      <Rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"url(#circuit)\" />\n    </Svg>\n  );\n};\n\n// Hexagon Pattern\nconst HexagonPattern: React.FC<{\n  spacing: number;\n  color: string;\n  opacity: number;\n}> = ({ spacing, color, opacity }) => {\n  const hexSize = spacing * 0.8;\n  const hexWidth = hexSize * 2;\n  const hexHeight = hexSize * Math.sqrt(3);\n\n  // Hexagon path\n  const hexPath = (cx: number, cy: number, size: number) => {\n    const points = [];\n    for (let i = 0; i < 6; i++) {\n      const angle = (Math.PI / 3) * i - Math.PI / 6;\n      points.push(`${cx + size * Math.cos(angle)},${cy + size * Math.sin(angle)}`);\n    }\n    return `M${points.join(' L')} Z`;\n  };\n\n  return (\n    <Svg width={SCREEN_WIDTH} height={SCREEN_HEIGHT} style={StyleSheet.absoluteFill}>\n      <Defs>\n        <SvgPattern id=\"hexagon\" width={hexWidth * 1.5} height={hexHeight} patternUnits=\"userSpaceOnUse\">\n          <Path\n            d={hexPath(hexSize, hexHeight / 2, hexSize * 0.9)}\n            stroke={color}\n            strokeWidth=\"1\"\n            fill=\"none\"\n            opacity={opacity}\n          />\n          <Path\n            d={hexPath(hexSize * 2.5, hexHeight / 2, hexSize * 0.9)}\n            stroke={color}\n            strokeWidth=\"1\"\n            fill=\"none\"\n            opacity={opacity}\n          />\n        </SvgPattern>\n      </Defs>\n      <Rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"url(#hexagon)\" />\n    </Svg>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    ...StyleSheet.absoluteFillObject,\n    zIndex: 0,\n  },\n});\n\nexport default PatternBackground;\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/PatternPicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/PremiumHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/ProgressBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'borderRadius' is defined but never used.","line":14,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ProgressBar Component\n * Displays loading progress with animations\n * Phase 2: Design System - Core Components\n */\n\nimport React, { useEffect } from 'react';\nimport { View, Text, StyleSheet, ViewStyle } from 'react-native';\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withSpring,\n} from 'react-native-reanimated';\nimport { colorPalette, spacing, typography, borderRadius } from '@/theme/designTokens';\n\nexport type ProgressBarVariant = 'default' | 'success' | 'warning' | 'error';\nexport type ProgressBarSize = 'sm' | 'md' | 'lg';\n\ninterface ProgressBarProps {\n  progress: number; // 0-100\n  variant?: ProgressBarVariant;\n  size?: ProgressBarSize;\n  showLabel?: boolean;\n  label?: string;\n  animated?: boolean;\n  indeterminate?: boolean;\n  style?: ViewStyle;\n}\n\nconst variantColors: Record<ProgressBarVariant, string> = {\n  default: colorPalette.primary[500],\n  success: colorPalette.success[500],\n  warning: colorPalette.warning[500],\n  error: colorPalette.error[500],\n};\n\nconst sizeStyles: Record<ProgressBarSize, { height: number; fontSize: number }> = {\n  sm: { height: 4, fontSize: typography.fontSize.xs },\n  md: { height: 8, fontSize: typography.fontSize.sm },\n  lg: { height: 12, fontSize: typography.fontSize.base },\n};\n\nexport const ProgressBar: React.FC<ProgressBarProps> = ({\n  progress,\n  variant = 'default',\n  size = 'md',\n  showLabel = false,\n  label,\n  animated = true,\n  indeterminate = false,\n  style,\n}) => {\n  const progressValue = useSharedValue(0);\n  const sizes = sizeStyles[size];\n  const color = variantColors[variant];\n\n  useEffect(() => {\n    const clampedProgress = Math.min(Math.max(progress, 0), 100);\n\n    if (animated) {\n      progressValue.value = withSpring(clampedProgress, {\n        damping: 15,\n        stiffness: 100,\n      });\n    } else {\n      progressValue.value = clampedProgress;\n    }\n  }, [progress, animated, progressValue]);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    width: `${progressValue.value}%`,\n  }));\n\n  const displayLabel = label || `${Math.round(progress)}%`;\n\n  return (\n    <View style={[styles.container, style]}>\n      {showLabel && (\n        <Text\n          style={[\n            styles.label,\n            {\n              fontSize: sizes.fontSize,\n              color: colorPalette.neutral[700],\n              fontWeight: typography.fontWeight.medium,\n            },\n          ]}\n        >\n          {displayLabel}\n        </Text>\n      )}\n\n      <View\n        style={[\n          styles.track,\n          {\n            height: sizes.height,\n            backgroundColor: colorPalette.neutral[200],\n            borderRadius: sizes.height / 2,\n          },\n        ]}\n      >\n        <Animated.View\n          style={[\n            styles.fill,\n            {\n              backgroundColor: color,\n              borderRadius: sizes.height / 2,\n            },\n            animatedStyle,\n          ]}\n        />\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n  },\n  label: {\n    marginBottom: spacing.xs,\n  },\n  track: {\n    width: '100%',\n    overflow: 'hidden',\n  },\n  fill: {\n    height: '100%',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/ProgressRing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/QuickStatCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Radio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/RippleButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":13,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'runOnJS' is defined but never used.","line":33,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * RippleButton Component - Aurora Design v2.0\n *\n * Material-style ripple button with gradient support\n * Features:\n * - Ripple effect on press\n * - Gradient backgrounds\n * - Multiple variants\n * - Loading state\n * - Haptic feedback\n */\n\nimport React, { useRef, useState } from \"react\";\nimport {\n  TouchableOpacity,\n  View,\n  Text,\n  StyleSheet,\n  ViewStyle,\n  TextStyle,\n  Platform,\n  LayoutChangeEvent,\n  GestureResponderEvent,\n} from \"react-native\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport * as Haptics from \"expo-haptics\";\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withTiming,\n  Easing,\n  runOnJS,\n} from \"react-native-reanimated\";\nimport { LoadingSpinner } from \"./LoadingSpinner\";\nimport { auroraTheme } from \"@/theme/auroraTheme\";\n\ntype ButtonVariant = \"primary\" | \"secondary\" | \"success\" | \"warning\" | \"error\" | \"ghost\" | \"outline\";\ntype ButtonSize = \"sm\" | \"md\" | \"lg\" | \"xl\";\n\ninterface RippleButtonProps {\n  children?: React.ReactNode;\n  label?: string;\n  onPress?: () => void;\n  variant?: ButtonVariant;\n  size?: ButtonSize;\n  icon?: keyof typeof Ionicons.glyphMap;\n  iconPosition?: \"left\" | \"right\";\n  loading?: boolean;\n  disabled?: boolean;\n  fullWidth?: boolean;\n  style?: ViewStyle;\n  textStyle?: TextStyle;\n  hapticFeedback?: \"light\" | \"medium\" | \"heavy\" | \"none\";\n}\n\nconst variantStyles = {\n  primary: {\n    gradient: auroraTheme.colors.aurora.primary,\n    textColor: auroraTheme.colors.text.primary,\n    rippleColor: \"rgba(255, 255, 255, 0.3)\",\n  },\n  secondary: {\n    gradient: auroraTheme.colors.aurora.secondary,\n    textColor: auroraTheme.colors.text.primary,\n    rippleColor: \"rgba(255, 255, 255, 0.3)\",\n  },\n  success: {\n    gradient: auroraTheme.colors.aurora.success,\n    textColor: auroraTheme.colors.text.primary,\n    rippleColor: \"rgba(255, 255, 255, 0.3)\",\n  },\n  warning: {\n    gradient: auroraTheme.colors.aurora.warm,\n    textColor: auroraTheme.colors.text.primary,\n    rippleColor: \"rgba(255, 255, 255, 0.3)\",\n  },\n  error: {\n    gradient: [auroraTheme.colors.error[500], auroraTheme.colors.error[700]] as const,\n    textColor: auroraTheme.colors.text.primary,\n    rippleColor: \"rgba(255, 255, 255, 0.3)\",\n  },\n  ghost: {\n    gradient: [\"transparent\", \"transparent\"] as const,\n    textColor: auroraTheme.colors.text.primary,\n    rippleColor: \"rgba(255, 255, 255, 0.1)\",\n  },\n  outline: {\n    gradient: [\"transparent\", \"transparent\"] as const,\n    textColor: auroraTheme.colors.primary[400],\n    rippleColor: \"rgba(21, 96, 189, 0.2)\",\n  },\n};\n\nconst sizeStyles = {\n  sm: {\n    paddingVertical: auroraTheme.spacing.sm,\n    paddingHorizontal: auroraTheme.spacing.md,\n    fontSize: auroraTheme.typography.fontSize.sm,\n    iconSize: 16,\n    borderRadius: auroraTheme.borderRadius.md,\n  },\n  md: {\n    paddingVertical: auroraTheme.spacing.md,\n    paddingHorizontal: auroraTheme.spacing.lg,\n    fontSize: auroraTheme.typography.fontSize.md,\n    iconSize: 20,\n    borderRadius: auroraTheme.borderRadius.lg,\n  },\n  lg: {\n    paddingVertical: auroraTheme.spacing.lg,\n    paddingHorizontal: auroraTheme.spacing.xl,\n    fontSize: auroraTheme.typography.fontSize.lg,\n    iconSize: 24,\n    borderRadius: auroraTheme.borderRadius.xl,\n  },\n  xl: {\n    paddingVertical: auroraTheme.spacing.xl,\n    paddingHorizontal: auroraTheme.spacing[\"2xl\"],\n    fontSize: auroraTheme.typography.fontSize.xl,\n    iconSize: 28,\n    borderRadius: auroraTheme.borderRadius[\"2xl\"],\n  },\n};\n\nexport const RippleButton: React.FC<RippleButtonProps> = ({\n  children,\n  label,\n  onPress,\n  variant = \"primary\",\n  size = \"md\",\n  icon,\n  iconPosition = \"left\",\n  loading = false,\n  disabled = false,\n  fullWidth = false,\n  style,\n  textStyle,\n  hapticFeedback = \"medium\",\n}) => {\n  const [buttonLayout, setButtonLayout] = useState({ width: 0, height: 0 });\n  const rippleScale = useSharedValue(0);\n  const rippleOpacity = useSharedValue(0);\n  const rippleX = useSharedValue(0);\n  const rippleY = useSharedValue(0);\n\n  const variantStyle = variantStyles[variant];\n  const sizeStyle = sizeStyles[size];\n\n  const handleLayout = (event: LayoutChangeEvent) => {\n    const { width, height } = event.nativeEvent.layout;\n    setButtonLayout({ width, height });\n  };\n\n  const triggerRipple = (event: GestureResponderEvent) => {\n    const { locationX, locationY } = event.nativeEvent;\n    rippleX.value = locationX;\n    rippleY.value = locationY;\n\n    // Calculate max ripple size\n    const maxDistance = Math.sqrt(\n      Math.pow(Math.max(locationX, buttonLayout.width - locationX), 2) +\n      Math.pow(Math.max(locationY, buttonLayout.height - locationY), 2)\n    );\n    const maxScale = (maxDistance * 2) / 10; // 10 is base ripple size\n\n    rippleScale.value = 0;\n    rippleOpacity.value = 1;\n\n    rippleScale.value = withTiming(maxScale, {\n      duration: 400,\n      easing: Easing.out(Easing.cubic),\n    });\n\n    rippleOpacity.value = withTiming(0, {\n      duration: 600,\n      easing: Easing.out(Easing.cubic),\n    });\n  };\n\n  const handlePress = (event: GestureResponderEvent) => {\n    if (disabled || loading) return;\n\n    triggerRipple(event);\n\n    if (Platform.OS !== \"web\" && hapticFeedback !== \"none\") {\n      const hapticType = {\n        light: Haptics.ImpactFeedbackStyle.Light,\n        medium: Haptics.ImpactFeedbackStyle.Medium,\n        heavy: Haptics.ImpactFeedbackStyle.Heavy,\n      }[hapticFeedback];\n      Haptics.impactAsync(hapticType);\n    }\n\n    onPress?.();\n  };\n\n  const rippleStyle = useAnimatedStyle(() => ({\n    transform: [\n      { translateX: rippleX.value - 5 },\n      { translateY: rippleY.value - 5 },\n      { scale: rippleScale.value },\n    ],\n    opacity: rippleOpacity.value,\n  }));\n\n  const content = (\n    <>\n      {loading ? (\n        <LoadingSpinner\n          size={20}\n          color={variantStyle.textColor}\n        />\n      ) : (\n        <View style={styles.contentContainer}>\n          {icon && iconPosition === \"left\" && (\n            <Ionicons\n              name={icon}\n              size={sizeStyle.iconSize}\n              color={variantStyle.textColor}\n              style={styles.iconLeft}\n            />\n          )}\n          {(label || children) && (\n            <Text\n              style={[\n                styles.label,\n                {\n                  fontSize: sizeStyle.fontSize,\n                  color: variantStyle.textColor,\n                  fontFamily: auroraTheme.typography.fontFamily.label,\n                },\n                textStyle,\n              ]}\n            >\n              {label || children}\n            </Text>\n          )}\n          {icon && iconPosition === \"right\" && (\n            <Ionicons\n              name={icon}\n              size={sizeStyle.iconSize}\n              color={variantStyle.textColor}\n              style={styles.iconRight}\n            />\n          )}\n        </View>\n      )}\n\n      {/* Ripple effect */}\n      <Animated.View\n        style={[\n          styles.ripple,\n          { backgroundColor: variantStyle.rippleColor },\n          rippleStyle,\n        ]}\n        pointerEvents=\"none\"\n      />\n    </>\n  );\n\n  const buttonStyles: ViewStyle[] = [\n    styles.button,\n    {\n      paddingVertical: sizeStyle.paddingVertical,\n      paddingHorizontal: sizeStyle.paddingHorizontal,\n      borderRadius: sizeStyle.borderRadius,\n      opacity: disabled ? 0.5 : 1,\n    },\n    fullWidth ? styles.fullWidth : {},\n    variant === \"outline\" ? {\n      borderWidth: 2,\n      borderColor: auroraTheme.colors.primary[400],\n    } : {},\n    style ?? {},\n  ];\n\n  if (variant === \"ghost\" || variant === \"outline\") {\n    return (\n      <TouchableOpacity\n        style={buttonStyles}\n        onPress={handlePress}\n        onLayout={handleLayout}\n        disabled={disabled || loading}\n        activeOpacity={0.8}\n      >\n        {content}\n      </TouchableOpacity>\n    );\n  }\n\n  return (\n    <TouchableOpacity\n      onPress={handlePress}\n      onLayout={handleLayout}\n      disabled={disabled || loading}\n      activeOpacity={0.9}\n      style={[fullWidth && styles.fullWidth]}\n    >\n      <LinearGradient\n        colors={variantStyle.gradient as readonly [string, string, ...string[]]}\n        start={{ x: 0, y: 0 }}\n        end={{ x: 1, y: 1 }}\n        style={[buttonStyles, styles.gradient]}\n      >\n        {content}\n      </LinearGradient>\n    </TouchableOpacity>\n  );\n};\n\nconst styles = StyleSheet.create({\n  button: {\n    overflow: \"hidden\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  gradient: {\n    overflow: \"hidden\",\n  },\n  fullWidth: {\n    width: \"100%\",\n  },\n  contentContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  label: {\n    fontWeight: \"600\",\n    textAlign: \"center\",\n  },\n  iconLeft: {\n    marginRight: auroraTheme.spacing.sm,\n  },\n  iconRight: {\n    marginLeft: auroraTheme.spacing.sm,\n  },\n  ripple: {\n    position: \"absolute\",\n    width: 10,\n    height: 10,\n    borderRadius: 5,\n  },\n});\n\nexport default RippleButton;\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/SafeView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/ScanFeedback.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'runOnJS' is defined but never used.","line":25,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":10},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'triggerHaptic'. Either include it or remove the dependency array.","line":151,"column":6,"nodeType":"ArrayExpression","endLine":151,"endColumn":107,"suggestions":[{"desc":"Update the dependencies array to be: [visible, duration, onDismiss, opacity, scale, iconScale, iconRotation, ringScale, ringOpacity, type, triggerHaptic]","fix":{"range":[4245,4346],"text":"[visible, duration, onDismiss, opacity, scale, iconScale, iconRotation, ringScale, ringOpacity, type, triggerHaptic]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ScanFeedback Component - Aurora Design v2.0\n *\n * Visual and haptic feedback for barcode scanning\n * Features:\n * - Success/Error animations\n * - Lottie-like animated feedback\n * - Haptic patterns\n * - Sound feedback support\n */\n\nimport React, { useEffect } from \"react\";\nimport { View, Text, StyleSheet, Dimensions, Platform } from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport * as Haptics from \"expo-haptics\";\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withSpring,\n  withSequence,\n  withTiming,\n  withDelay,\n  Easing,\n  runOnJS,\n} from \"react-native-reanimated\";\nimport { auroraTheme } from \"@/theme/auroraTheme\";\n\nconst { width: SCREEN_WIDTH } = Dimensions.get(\"window\");\n\nexport type ScanFeedbackType = \"success\" | \"error\" | \"warning\" | \"info\" | \"duplicate\";\n\ninterface ScanFeedbackProps {\n  type: ScanFeedbackType;\n  title: string;\n  message?: string;\n  visible: boolean;\n  onDismiss?: () => void;\n  duration?: number;\n  showIcon?: boolean;\n}\n\nconst feedbackConfig = {\n  success: {\n    icon: \"checkmark-circle\" as const,\n    gradient: auroraTheme.colors.aurora.success,\n    haptic: () => Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success),\n  },\n  error: {\n    icon: \"close-circle\" as const,\n    gradient: [auroraTheme.colors.error[500], auroraTheme.colors.error[700]] as const,\n    haptic: () => Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error),\n  },\n  warning: {\n    icon: \"warning\" as const,\n    gradient: auroraTheme.colors.aurora.warm,\n    haptic: () => Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning),\n  },\n  info: {\n    icon: \"information-circle\" as const,\n    gradient: auroraTheme.colors.aurora.secondary,\n    haptic: () => Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium),\n  },\n  duplicate: {\n    icon: \"copy\" as const,\n    gradient: [auroraTheme.colors.warning[500], auroraTheme.colors.warning[700]] as const,\n    haptic: () => Haptics.notificationAsync(Haptics.NotificationFeedbackType.Warning),\n  },\n};\n\nexport const ScanFeedback: React.FC<ScanFeedbackProps> = ({\n  type,\n  title,\n  message,\n  visible,\n  onDismiss,\n  duration = 2000,\n  showIcon = true,\n}) => {\n  const scale = useSharedValue(0);\n  const opacity = useSharedValue(0);\n  const iconScale = useSharedValue(0);\n  const iconRotation = useSharedValue(0);\n  const ringScale = useSharedValue(1);\n  const ringOpacity = useSharedValue(0.5);\n\n  const config = feedbackConfig[type];\n\n  const triggerHaptic = () => {\n    if (Platform.OS !== \"web\") {\n      config.haptic();\n    }\n  };\n\n  useEffect(() => {\n    if (visible) {\n      // Trigger haptic\n      triggerHaptic();\n\n      // Animate in\n      opacity.value = withTiming(1, { duration: 200 });\n      scale.value = withSpring(1, { damping: 12, stiffness: 180 });\n\n      // Icon animation\n      iconScale.value = withDelay(100, withSpring(1, { damping: 10, stiffness: 200 }));\n\n      if (type === \"success\") {\n        iconRotation.value = withDelay(150, withSequence(\n          withTiming(-10, { duration: 100 }),\n          withSpring(0, { damping: 8, stiffness: 200 })\n        ));\n      }\n\n      // Pulse ring animation\n      ringScale.value = withRepeat(\n        withSequence(\n          withTiming(1.5, { duration: 600, easing: Easing.out(Easing.ease) }),\n          withTiming(1, { duration: 400 })\n        ),\n        3,\n        false\n      );\n      ringOpacity.value = withRepeat(\n        withSequence(\n          withTiming(0, { duration: 600 }),\n          withTiming(0.5, { duration: 0 })\n        ),\n        3,\n        false\n      );\n\n      // Auto dismiss\n      if (onDismiss) {\n        const timer = setTimeout(() => {\n          opacity.value = withTiming(0, { duration: 200 });\n          scale.value = withTiming(0.8, { duration: 200 });\n          iconScale.value = withTiming(0, { duration: 150 });\n          setTimeout(onDismiss, 200);\n        }, duration);\n\n        return () => clearTimeout(timer);\n      }\n      return; // Explicit return for the case when onDismiss is not provided\n    } else {\n      // Reset animations\n      scale.value = 0;\n      opacity.value = 0;\n      iconScale.value = 0;\n      return; // All paths must return\n    }\n  }, [visible, duration, onDismiss, opacity, scale, iconScale, iconRotation, ringScale, ringOpacity, type]);\n\n  const containerStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n    opacity: opacity.value,\n  }));\n\n  const iconStyle = useAnimatedStyle(() => ({\n    transform: [\n      { scale: iconScale.value },\n      { rotate: `${iconRotation.value}deg` },\n    ],\n  }));\n\n  const ringStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: ringScale.value }],\n    opacity: ringOpacity.value,\n  }));\n\n  if (!visible) return null;\n\n  return (\n    <View style={styles.overlay} pointerEvents=\"none\">\n      <Animated.View style={[styles.container, containerStyle]}>\n        <LinearGradient\n          colors={config.gradient as readonly [string, string, ...string[]]}\n          start={{ x: 0, y: 0 }}\n          end={{ x: 1, y: 1 }}\n          style={styles.gradient}\n        >\n          {/* Pulse ring */}\n          <Animated.View style={[styles.ring, ringStyle]} />\n\n          {/* Icon */}\n          {showIcon && (\n            <Animated.View style={iconStyle}>\n              <View style={styles.iconContainer}>\n                <Ionicons\n                  name={config.icon}\n                  size={64}\n                  color={auroraTheme.colors.text.primary}\n                />\n              </View>\n            </Animated.View>\n          )}\n\n          {/* Text content */}\n          <Text style={styles.title}>{title}</Text>\n          {message && <Text style={styles.message}>{message}</Text>}\n        </LinearGradient>\n      </Animated.View>\n    </View>\n  );\n};\n\n// Helper function for repeat animation (simplified)\nconst withRepeat = (animation: any, times: number, reverse: boolean) => {\n  // This is a simplified version - in production, use reanimated's withRepeat\n  return animation;\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n    zIndex: 1000,\n  },\n  container: {\n    width: SCREEN_WIDTH * 0.7,\n    maxWidth: 280,\n    borderRadius: auroraTheme.borderRadius[\"2xl\"],\n    overflow: \"hidden\",\n    ...auroraTheme.shadows.xl,\n  },\n  gradient: {\n    padding: auroraTheme.spacing[\"2xl\"],\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  ring: {\n    position: \"absolute\",\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n    borderWidth: 3,\n    borderColor: \"rgba(255, 255, 255, 0.3)\",\n  },\n  iconContainer: {\n    marginBottom: auroraTheme.spacing.lg,\n  },\n  title: {\n    fontSize: auroraTheme.typography.fontSize.xl,\n    fontFamily: auroraTheme.typography.fontFamily.heading,\n    fontWeight: \"700\",\n    color: auroraTheme.colors.text.primary,\n    textAlign: \"center\",\n  },\n  message: {\n    fontSize: auroraTheme.typography.fontSize.sm,\n    fontFamily: auroraTheme.typography.fontFamily.body,\n    color: auroraTheme.colors.text.secondary,\n    textAlign: \"center\",\n    marginTop: auroraTheme.spacing.sm,\n  },\n});\n\nexport default ScanFeedback;\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/ScreenContainer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RNStatusBar' is defined but never used.","line":26,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isDark' is assigned a value but never used.","line":118,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":118,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ScreenContainer Component - Unified Screen Wrapper v1.0\n *\n * Provides consistent layout across ALL screens in the application.\n * Features:\n * - Aurora/Pattern background (theme-aware)\n * - ScreenHeader with logout, back button, title\n * - Safe area insets\n * - Pull-to-refresh support\n * - Loading state with skeleton/spinner\n * - Keyboard avoiding view\n * - StatusBar configuration\n * - Scroll/Static content modes\n */\n\nimport React, { ReactNode } from \"react\";\nimport {\n  View,\n  Text,\n  ScrollView,\n  StyleSheet,\n  RefreshControl,\n  KeyboardAvoidingView,\n  Platform,\n  ViewStyle,\n  StatusBar as RNStatusBar,\n} from \"react-native\";\nimport { StatusBar } from \"expo-status-bar\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { AuroraBackground, AuroraVariant } from \"./AuroraBackground\";\nimport { PatternBackground } from \"./PatternBackground\";\nimport { ScreenHeader, ScreenHeaderProps } from \"./ScreenHeader\";\nimport { LoadingSpinner } from \"./LoadingSpinner\";\nimport { SkeletonScreen } from \"./SkeletonList\";\nimport { useThemeContext } from \"../../theme/ThemeContext\";\nimport { auroraTheme } from \"../../theme/auroraTheme\";\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport type BackgroundType = \"aurora\" | \"pattern\" | \"solid\" | \"gradient\";\nexport type LoadingType = \"spinner\" | \"skeleton\" | \"none\";\nexport type ContentMode = \"scroll\" | \"static\" | \"keyboard-scroll\";\n\nexport interface ScreenContainerProps {\n  children: ReactNode;\n\n  // Header configuration\n  header?: ScreenHeaderProps | false;\n\n  // Custom header (for screens needing complete control)\n  customHeader?: ReactNode;\n\n  // Background configuration\n  backgroundType?: BackgroundType;\n  auroraVariant?: AuroraVariant;\n  auroraIntensity?: \"low\" | \"medium\" | \"high\";\n  withParticles?: boolean;\n\n  // Content configuration\n  contentMode?: ContentMode;\n  contentStyle?: ViewStyle;\n  containerStyle?: ViewStyle;\n\n  // Padding control\n  noPadding?: boolean;\n\n  // Loading state\n  loading?: boolean;\n  loadingType?: LoadingType;\n  loadingText?: string;\n  skeletonRows?: number;\n\n  // Pull-to-refresh\n  refreshing?: boolean;\n  onRefresh?: () => void;\n\n  // Safe areas\n  edges?: (\"top\" | \"bottom\" | \"left\" | \"right\")[];\n  withBottomPadding?: boolean;\n\n  // Status bar\n  statusBarStyle?: \"light\" | \"dark\" | \"auto\";\n\n  // Overlay content (modals, FABs, etc)\n  overlay?: ReactNode;\n}\n\n// ============================================================================\n// Component\n// ============================================================================\n\nexport const ScreenContainer: React.FC<ScreenContainerProps> = ({\n  children,\n  header,\n  customHeader,\n  backgroundType = \"aurora\",\n  auroraVariant = \"primary\",\n  auroraIntensity = \"medium\",\n  withParticles = false,\n  contentMode = \"scroll\",\n  contentStyle,\n  containerStyle,\n  noPadding = false,\n  loading = false,\n  loadingType = \"spinner\",\n  loadingText,\n  skeletonRows = 5,\n  refreshing = false,\n  onRefresh,\n  edges = [\"top\", \"bottom\"],\n  withBottomPadding = true,\n  statusBarStyle = \"light\",\n  overlay,\n}) => {\n  const insets = useSafeAreaInsets();\n  const { theme, pattern, isDark } = useThemeContext();\n\n  // Calculate safe area padding\n  const safeAreaStyle: ViewStyle = {\n    paddingTop: edges.includes(\"top\") && header === false ? insets.top : 0,\n    paddingBottom: edges.includes(\"bottom\") && withBottomPadding ? insets.bottom + 20 : 0,\n    paddingLeft: edges.includes(\"left\") ? insets.left : 0,\n    paddingRight: edges.includes(\"right\") ? insets.right : 0,\n  };\n\n  // Render background based on type\n  const renderBackground = () => {\n    switch (backgroundType) {\n      case \"aurora\":\n        return (\n          <AuroraBackground\n            variant={auroraVariant}\n            withParticles={withParticles}\n            intensity={auroraIntensity}\n            animated\n            style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0 }}\n          />\n        );\n      case \"pattern\":\n        return (\n          <>\n            <View style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, backgroundColor: theme.colors.background }} />\n            <PatternBackground\n              pattern={pattern}\n              color={theme.colors.accent}\n              secondaryColor={theme.colors.accentLight}\n              opacity={0.04}\n            />\n          </>\n        );\n      case \"solid\":\n        return (\n          <View\n            style={{\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              backgroundColor: theme.colors.background,\n            }}\n          />\n        );\n      case \"gradient\":\n      default:\n        return (\n          <AuroraBackground\n            variant=\"dark\"\n            animated={false}\n            style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0 }}\n          />\n        );\n    }\n  };\n\n  // Render loading state\n  const renderLoading = () => {\n    if (!loading) return null;\n\n    if (loadingType === \"skeleton\") {\n      return <SkeletonScreen listCount={skeletonRows} />;\n    }\n\n    return (\n      <View style={styles.loadingContainer}>\n        <LoadingSpinner size={48} color={theme.colors.accent || auroraTheme.colors.primary[500]} />\n        {loadingText && (\n          <Text style={[styles.loadingText, { color: theme.colors.textSecondary }]}>\n            {loadingText}\n          </Text>\n        )}\n      </View>\n    );\n  };\n\n  // Render content based on mode\n  const renderContent = () => {\n    if (loading && loadingType !== \"none\") {\n      return renderLoading();\n    }\n\n    const contentContainerStyle: ViewStyle = {\n      ...safeAreaStyle,\n      paddingHorizontal: noPadding ? 0 : auroraTheme.spacing.lg,\n      flexGrow: 1,\n      ...(contentStyle as object),\n    };\n\n    if (contentMode === \"static\") {\n      return (\n        <View style={[styles.staticContent, contentContainerStyle]}>\n          {children}\n        </View>\n      );\n    }\n\n    const scrollContent = (\n      <ScrollView\n        style={styles.scrollView}\n        contentContainerStyle={contentContainerStyle}\n        showsVerticalScrollIndicator={false}\n        keyboardShouldPersistTaps=\"handled\"\n        refreshControl={\n          onRefresh ? (\n            <RefreshControl\n              refreshing={refreshing}\n              onRefresh={onRefresh}\n              tintColor={auroraTheme.colors.primary[400]}\n              colors={[auroraTheme.colors.primary[500]]}\n            />\n          ) : undefined\n        }\n      >\n        {children}\n      </ScrollView>\n    );\n\n    if (contentMode === \"keyboard-scroll\") {\n      return (\n        <KeyboardAvoidingView\n          style={styles.keyboardView}\n          behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n          keyboardVerticalOffset={Platform.OS === \"ios\" ? 0 : 20}\n        >\n          {scrollContent}\n        </KeyboardAvoidingView>\n      );\n    }\n\n    return scrollContent;\n  };\n\n  return (\n    <View style={[styles.container, containerStyle]}>\n      <StatusBar style={statusBarStyle} />\n      {renderBackground()}\n\n      {/* Custom Header or Default ScreenHeader */}\n      {customHeader ? (\n        customHeader\n      ) : header !== false && (\n        <ScreenHeader\n          showBackButton={false}\n          showLogoutButton={true}\n          showUsername={true}\n          {...(header as ScreenHeaderProps)}\n        />\n      )}\n\n      {/* Content */}\n      {renderContent()}\n\n      {/* Overlay content (modals, FABs, speed dials, etc) */}\n      {overlay}\n    </View>\n  );\n};\n\n// ============================================================================\n// Styles\n// ============================================================================\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  staticContent: {\n    flex: 1,\n  },\n  keyboardView: {\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    gap: 16,\n  },\n  loadingText: {\n    fontSize: 14,\n    marginTop: 8,\n  },\n});\n\nexport default ScreenContainer;\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/ScreenHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/SessionCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Shimmer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/SkeletonList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/SpeedDialMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/StatsCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'color' is assigned a value but never used.","line":81,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * StatsCard Component - Aurora Design v2.1\n *\n * Glassmorphic stats card with gradient accents\n * Features:\n * - Glass morphism effect\n * - Gradient border option\n * - Icon with gradient background\n * - Smooth entrance animations\n * - Animated counter values\n * - Haptic feedback\n */\n\nimport React from \"react\";\nimport { View, Text, StyleSheet, ViewStyle } from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport Animated, { FadeInDown } from \"react-native-reanimated\";\nimport { GlassCard } from \"./GlassCard\";\nimport { AnimatedPressable } from \"./AnimatedPressable\";\nimport { AnimatedCounter } from \"./AnimatedCounter\";\nimport { auroraTheme } from \"@/theme/auroraTheme\";\n\nexport type StatVariant = \"primary\" | \"success\" | \"warning\" | \"error\" | \"info\";\n\ninterface StatsCardProps {\n  title: string;\n  value: string | number;\n  icon: keyof typeof Ionicons.glyphMap;\n  variant?: StatVariant;\n  subtitle?: string;\n  trend?: {\n    value: number;\n    isPositive: boolean;\n  };\n  onPress?: () => void;\n  style?: ViewStyle;\n  delay?: number;\n  animated?: boolean; // Enable animated counter\n  prefix?: string; // Prefix for value (e.g., \"$\")\n  suffix?: string; // Suffix for value (e.g., \"%\")\n}\n\nconst variantColors = {\n  primary: {\n    gradient: auroraTheme.colors.aurora.primary,\n    color: auroraTheme.colors.primary[500],\n  },\n  success: {\n    gradient: auroraTheme.colors.aurora.success,\n    color: auroraTheme.colors.success[500],\n  },\n  warning: {\n    gradient: auroraTheme.colors.aurora.warm,\n    color: auroraTheme.colors.warning[500],\n  },\n  error: {\n    gradient: [auroraTheme.colors.error[500], auroraTheme.colors.error[700]],\n    color: auroraTheme.colors.error[500],\n  },\n  info: {\n    gradient: auroraTheme.colors.aurora.secondary,\n    color: auroraTheme.colors.secondary[500],\n  },\n};\n\nexport const StatsCard: React.FC<StatsCardProps> = ({\n  title,\n  value,\n  icon,\n  variant = \"primary\",\n  subtitle,\n  trend,\n  onPress,\n  style,\n  delay = 0,\n  animated = false,\n  prefix = \"\",\n  suffix = \"\",\n}) => {\n  const { gradient, color } = variantColors[variant];\n  const numericValue = typeof value === \"number\" ? value : parseFloat(value) || 0;\n\n  const content = (\n    <View style={styles.content}>\n      {/* Icon with gradient background */}\n      <LinearGradient\n        colors={gradient as readonly [string, string, ...string[]]}\n        start={{ x: 0, y: 0 }}\n        end={{ x: 1, y: 1 }}\n        style={styles.iconContainer}\n      >\n        <Ionicons name={icon} size={28} color={auroraTheme.colors.text.primary} />\n      </LinearGradient>\n\n      {/* Stats */}\n      <View style={styles.stats}>\n        {animated && typeof value === \"number\" ? (\n          <AnimatedCounter\n            value={numericValue}\n            prefix={prefix}\n            suffix={suffix}\n            style={[\n              styles.value,\n              {\n                fontFamily: auroraTheme.typography.fontFamily.heading,\n                fontSize: auroraTheme.typography.fontSize[\"3xl\"],\n                color: auroraTheme.colors.text.primary,\n              },\n            ]}\n          />\n        ) : (\n          <Text\n            style={[\n              styles.value,\n              {\n                fontFamily: auroraTheme.typography.fontFamily.heading,\n                fontSize: auroraTheme.typography.fontSize[\"3xl\"],\n                color: auroraTheme.colors.text.primary,\n              },\n            ]}\n          >\n            {prefix}{value}{suffix}\n          </Text>\n        )}\n\n        <Text\n          style={[\n            styles.title,\n            {\n              fontFamily: auroraTheme.typography.fontFamily.body,\n              fontSize: auroraTheme.typography.fontSize.sm,\n              color: auroraTheme.colors.text.secondary,\n            },\n          ]}\n        >\n          {title}\n        </Text>\n\n        {subtitle && (\n          <Text\n            style={[\n              styles.subtitle,\n              {\n                fontFamily: auroraTheme.typography.fontFamily.body,\n                fontSize: auroraTheme.typography.fontSize.xs,\n                color: auroraTheme.colors.text.tertiary,\n              },\n            ]}\n          >\n            {subtitle}\n          </Text>\n        )}\n\n        {trend && (\n          <View style={styles.trendContainer}>\n            <Ionicons\n              name={trend.isPositive ? \"trending-up\" : \"trending-down\"}\n              size={14}\n              color={trend.isPositive ? auroraTheme.colors.success[500] : auroraTheme.colors.error[500]}\n            />\n            <Text\n              style={[\n                styles.trendText,\n                {\n                  color: trend.isPositive ? auroraTheme.colors.success[500] : auroraTheme.colors.error[500],\n                  fontFamily: auroraTheme.typography.fontFamily.label,\n                  fontSize: auroraTheme.typography.fontSize.xs,\n                },\n              ]}\n            >\n              {Math.abs(trend.value)}%\n            </Text>\n          </View>\n        )}\n      </View>\n    </View>\n  );\n\n  const cardContent = (\n    <Animated.View entering={FadeInDown.delay(delay).springify()}>\n      <GlassCard\n        variant=\"medium\"\n        intensity={25}\n        borderRadius={auroraTheme.borderRadius.xl}\n        padding={auroraTheme.spacing.lg}\n        withGradientBorder={true}\n        elevation=\"lg\"\n        style={style}\n      >\n        {content}\n      </GlassCard>\n    </Animated.View>\n  );\n\n  if (onPress) {\n    return (\n      <AnimatedPressable onPress={onPress} hapticFeedback=\"light\">\n        {cardContent}\n      </AnimatedPressable>\n    );\n  }\n\n  return cardContent;\n};\n\nconst styles = StyleSheet.create({\n  content: {\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.md,\n  },\n  iconContainer: {\n    width: 56,\n    height: 56,\n    borderRadius: auroraTheme.borderRadius.xl,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    ...auroraTheme.shadows.md,\n  },\n  stats: {\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.xs,\n  },\n  value: {\n    fontWeight: \"700\",\n    letterSpacing: -0.5,\n  },\n  title: {\n    textAlign: \"center\",\n    fontWeight: \"500\",\n  },\n  subtitle: {\n    textAlign: \"center\",\n    marginTop: auroraTheme.spacing.xs,\n  },\n  trendContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.xs,\n    marginTop: auroraTheme.spacing.xs,\n  },\n  trendText: {\n    fontWeight: \"600\",\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/StatusBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/SuccessFeedback.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/SwipeCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Dimensions' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * SwipeCard Component - Aurora Design v2.0\n *\n * Swipeable card with actions\n * Features:\n * - Swipe gestures for quick actions\n * - Haptic feedback\n * - Smooth spring animations\n * - Customizable action buttons\n */\n\nimport React from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ViewStyle,\n  Dimensions,\n  Platform,\n} from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport * as Haptics from \"expo-haptics\";\nimport {\n  GestureDetector,\n  Gesture,\n} from \"react-native-gesture-handler\";\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withSpring,\n  runOnJS,\n  interpolate,\n  Extrapolation,\n} from \"react-native-reanimated\";\nimport { auroraTheme } from \"@/theme/auroraTheme\";\nimport { GlassCard } from \"./GlassCard\";\n\nconst SWIPE_THRESHOLD = 80;\n\ninterface SwipeAction {\n  icon: keyof typeof Ionicons.glyphMap;\n  color: string;\n  backgroundColor: string;\n  onPress: () => void;\n  label?: string;\n}\n\ninterface SwipeCardProps {\n  children: React.ReactNode;\n  leftActions?: SwipeAction[];\n  rightActions?: SwipeAction[];\n  style?: ViewStyle;\n}\n\nexport const SwipeCard: React.FC<SwipeCardProps> = ({\n  children,\n  leftActions = [],\n  rightActions = [],\n  style,\n}) => {\n  const translateX = useSharedValue(0);\n  const contextX = useSharedValue(0);\n\n  const triggerHaptic = () => {\n    if (Platform.OS !== \"web\") {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n  };\n\n  const panGesture = Gesture.Pan()\n    .onStart(() => {\n      contextX.value = translateX.value;\n    })\n    .onUpdate((event) => {\n      const newValue = contextX.value + event.translationX;\n\n      // Limit swipe distance\n      const maxSwipe = rightActions.length > 0 ? SWIPE_THRESHOLD * rightActions.length : 0;\n      const minSwipe = leftActions.length > 0 ? -SWIPE_THRESHOLD * leftActions.length : 0;\n\n      translateX.value = Math.max(minSwipe, Math.min(maxSwipe, newValue));\n    })\n    .onEnd((event) => {\n      // Determine if we should snap to action position\n      if (translateX.value > SWIPE_THRESHOLD / 2 && leftActions.length > 0) {\n        translateX.value = withSpring(SWIPE_THRESHOLD);\n        runOnJS(triggerHaptic)();\n      } else if (translateX.value < -SWIPE_THRESHOLD / 2 && rightActions.length > 0) {\n        translateX.value = withSpring(-SWIPE_THRESHOLD);\n        runOnJS(triggerHaptic)();\n      } else {\n        translateX.value = withSpring(0);\n      }\n    });\n\n  const cardStyle = useAnimatedStyle(() => ({\n    transform: [{ translateX: translateX.value }],\n  }));\n\n  const leftActionsStyle = useAnimatedStyle(() => ({\n    opacity: interpolate(\n      translateX.value,\n      [0, SWIPE_THRESHOLD / 2, SWIPE_THRESHOLD],\n      [0, 0.5, 1],\n      Extrapolation.CLAMP\n    ),\n    transform: [\n      {\n        scale: interpolate(\n          translateX.value,\n          [0, SWIPE_THRESHOLD],\n          [0.8, 1],\n          Extrapolation.CLAMP\n        ),\n      },\n    ],\n  }));\n\n  const rightActionsStyle = useAnimatedStyle(() => ({\n    opacity: interpolate(\n      translateX.value,\n      [-SWIPE_THRESHOLD, -SWIPE_THRESHOLD / 2, 0],\n      [1, 0.5, 0],\n      Extrapolation.CLAMP\n    ),\n    transform: [\n      {\n        scale: interpolate(\n          translateX.value,\n          [-SWIPE_THRESHOLD, 0],\n          [1, 0.8],\n          Extrapolation.CLAMP\n        ),\n      },\n    ],\n  }));\n\n  const handleActionPress = (action: SwipeAction) => {\n    translateX.value = withSpring(0);\n    action.onPress();\n    if (Platform.OS !== \"web\") {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n  };\n\n  return (\n    <View style={[styles.container, style]}>\n      {/* Left Actions */}\n      {leftActions.length > 0 && (\n        <Animated.View style={[styles.actionsContainer, styles.leftActions, leftActionsStyle]}>\n          {leftActions.map((action, index) => (\n            <Animated.View\n              key={index}\n              style={[\n                styles.actionButton,\n                { backgroundColor: action.backgroundColor },\n              ]}\n            >\n              <Ionicons\n                name={action.icon}\n                size={24}\n                color={action.color}\n                onPress={() => handleActionPress(action)}\n              />\n              {action.label && (\n                <Text style={[styles.actionLabel, { color: action.color }]}>\n                  {action.label}\n                </Text>\n              )}\n            </Animated.View>\n          ))}\n        </Animated.View>\n      )}\n\n      {/* Right Actions */}\n      {rightActions.length > 0 && (\n        <Animated.View style={[styles.actionsContainer, styles.rightActions, rightActionsStyle]}>\n          {rightActions.map((action, index) => (\n            <Animated.View\n              key={index}\n              style={[\n                styles.actionButton,\n                { backgroundColor: action.backgroundColor },\n              ]}\n            >\n              <Ionicons\n                name={action.icon}\n                size={24}\n                color={action.color}\n                onPress={() => handleActionPress(action)}\n              />\n              {action.label && (\n                <Text style={[styles.actionLabel, { color: action.color }]}>\n                  {action.label}\n                </Text>\n              )}\n            </Animated.View>\n          ))}\n        </Animated.View>\n      )}\n\n      {/* Main Card */}\n      <GestureDetector gesture={panGesture}>\n        <Animated.View style={cardStyle}>\n          <GlassCard variant=\"medium\" elevation=\"md\">\n            {children}\n          </GlassCard>\n        </Animated.View>\n      </GestureDetector>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    position: \"relative\",\n  },\n  actionsContainer: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: auroraTheme.spacing.sm,\n  },\n  leftActions: {\n    left: 0,\n    paddingLeft: auroraTheme.spacing.md,\n  },\n  rightActions: {\n    right: 0,\n    paddingRight: auroraTheme.spacing.md,\n  },\n  actionButton: {\n    width: 60,\n    height: 60,\n    borderRadius: auroraTheme.borderRadius.xl,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    ...auroraTheme.shadows.md,\n  },\n  actionLabel: {\n    fontSize: auroraTheme.typography.fontSize.xs,\n    fontFamily: auroraTheme.typography.fontFamily.label,\n    marginTop: auroraTheme.spacing.xs,\n  },\n});\n\nexport default SwipeCard;\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Tabs.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeIndex' is assigned a value but never used.","line":42,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Tabs Component\n * Navigation tabs with smooth animations\n * Phase 2: Design System - Core Components\n */\n\nimport React, { useState } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, ScrollView } from 'react-native';\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withSpring,\n} from 'react-native-reanimated';\nimport { colorPalette, spacing, typography, borderRadius } from '@/theme/designTokens';\n\nexport interface Tab {\n  key: string;\n  label: string;\n  icon?: React.ReactNode;\n  badge?: number;\n}\n\ninterface TabsProps {\n  tabs: Tab[];\n  activeTab: string;\n  onTabChange: (key: string) => void;\n  variant?: 'default' | 'pills' | 'underline';\n  scrollable?: boolean;\n}\n\nexport const Tabs: React.FC<TabsProps> = ({\n  tabs,\n  activeTab,\n  onTabChange,\n  variant = 'default',\n  scrollable = false,\n}) => {\n  const [tabLayouts, setTabLayouts] = useState<{ [key: string]: { x: number; width: number } }>({});\n  const indicatorPosition = useSharedValue(0);\n  const indicatorWidth = useSharedValue(0);\n\n  const activeIndex = tabs.findIndex(tab => tab.key === activeTab);\n\n  React.useEffect(() => {\n    if (tabLayouts[activeTab]) {\n      indicatorPosition.value = withSpring(tabLayouts[activeTab].x, {\n        damping: 15,\n        stiffness: 150,\n      });\n      indicatorWidth.value = withSpring(tabLayouts[activeTab].width, {\n        damping: 15,\n        stiffness: 150,\n      });\n    }\n  }, [activeTab, tabLayouts, indicatorPosition, indicatorWidth]);\n\n  const indicatorStyle = useAnimatedStyle(() => ({\n    transform: [{ translateX: indicatorPosition.value }],\n    width: indicatorWidth.value,\n  }));\n\n  const handleTabLayout = (key: string, x: number, width: number) => {\n    setTabLayouts(prev => ({\n      ...prev,\n      [key]: { x, width },\n    }));\n  };\n\n  const renderTab = (tab: Tab, index: number) => {\n    const isActive = tab.key === activeTab;\n\n    return (\n      <TouchableOpacity\n        key={tab.key}\n        onPress={() => onTabChange(tab.key)}\n        onLayout={(e) => {\n          const { x, width } = e.nativeEvent.layout;\n          handleTabLayout(tab.key, x, width);\n        }}\n        style={[\n          styles.tab,\n          variant === 'pills' && styles.tabPill,\n          variant === 'pills' && isActive && styles.tabPillActive,\n          !scrollable && styles.tabFlex,\n        ]}\n        activeOpacity={0.7}\n      >\n        {tab.icon && <View style={styles.tabIcon}>{tab.icon}</View>}\n\n        <Text\n          style={[\n            styles.tabLabel,\n            isActive && styles.tabLabelActive,\n            variant === 'pills' && isActive && styles.tabLabelPillActive,\n          ]}\n        >\n          {tab.label}\n        </Text>\n\n        {tab.badge !== undefined && tab.badge > 0 && (\n          <View style={styles.badge}>\n            <Text style={styles.badgeText}>\n              {tab.badge > 99 ? '99+' : tab.badge}\n            </Text>\n          </View>\n        )}\n      </TouchableOpacity>\n    );\n  };\n\n  const Container = scrollable ? ScrollView : View;\n  const containerProps = scrollable\n    ? {\n      horizontal: true,\n      showsHorizontalScrollIndicator: false,\n      contentContainerStyle: styles.scrollContent,\n    }\n    : { style: styles.container };\n\n  return (\n    <View style={styles.wrapper}>\n      <Container {...containerProps}>\n        {tabs.map((tab, index) => renderTab(tab, index))}\n      </Container>\n\n      {/* Indicator */}\n      {variant === 'underline' && (\n        <Animated.View style={[styles.indicator, indicatorStyle]} />\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  wrapper: {\n    position: 'relative',\n  },\n  container: {\n    flexDirection: 'row',\n    backgroundColor: colorPalette.neutral[0],\n  },\n  scrollContent: {\n    paddingHorizontal: spacing.sm,\n    gap: spacing.xs,\n  },\n  tab: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: spacing.base,\n    paddingVertical: spacing.sm,\n    gap: spacing.xs,\n  },\n  tabFlex: {\n    flex: 1,\n    justifyContent: 'center',\n  },\n  tabPill: {\n    borderRadius: borderRadius.full,\n    backgroundColor: colorPalette.neutral[100],\n  },\n  tabPillActive: {\n    backgroundColor: colorPalette.primary[500],\n  },\n  tabIcon: {\n    marginRight: spacing.xs,\n  },\n  tabLabel: {\n    fontSize: typography.fontSize.base,\n    fontWeight: typography.fontWeight.medium,\n    color: colorPalette.neutral[600],\n  },\n  tabLabelActive: {\n    color: colorPalette.primary[500],\n    fontWeight: typography.fontWeight.semibold,\n  },\n  tabLabelPillActive: {\n    color: colorPalette.neutral[0],\n  },\n  badge: {\n    backgroundColor: colorPalette.error[500],\n    borderRadius: borderRadius.full,\n    paddingHorizontal: spacing.xs,\n    paddingVertical: 2,\n    minWidth: 20,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginLeft: spacing.xs,\n  },\n  badgeText: {\n    fontSize: typography.fontSize.xs,\n    fontWeight: typography.fontWeight.semibold,\n    color: colorPalette.neutral[0],\n  },\n  indicator: {\n    position: 'absolute',\n    bottom: 0,\n    height: 3,\n    backgroundColor: colorPalette.primary[500],\n    borderRadius: borderRadius.sm,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/ThemePicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/ThemedScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/Toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/components/ui/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/config/location.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/constants/config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/constants/flags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/constants/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/constants/scanConstants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/__tests__/useNetworkStatus.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'renderHook' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'act' is defined but never used.","line":7,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Network Status Hook Tests\n * Tests for useNetworkStatus hook\n */\n\nimport { describe, it, expect, jest, beforeEach } from '@jest/globals';\nimport { renderHook, act } from '@testing-library/react-native';\n\n// Mock NetInfo\nconst mockNetInfo = {\n  addEventListener: jest.fn(),\n  fetch: jest.fn(),\n};\n\njest.mock('@react-native-community/netinfo', () => mockNetInfo);\n\ndescribe('useNetworkStatus Hook', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should initialize with default network state', () => {\n    // Test placeholder - implement when hook is available\n    expect(true).toBe(true);\n  });\n\n  it('should update when network state changes', () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n\n  it('should detect online to offline transition', () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n\n  it('should detect offline to online transition', () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n\n  it('should cleanup listeners on unmount', () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/scan/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/scan/useBatchManagement.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/scan/useItemDetailLogic.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'form'. Either include it or remove the dependency array.","line":75,"column":6,"nodeType":"ArrayExpression","endLine":75,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [barcode, form, router]","fix":{"range":[2540,2557],"text":"[barcode, form, router]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'form.quantityInputRef'. Either include it or remove the dependency array.","line":86,"column":6,"nodeType":"ArrayExpression","endLine":86,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [form.quantityInputRef, item, loading]","fix":{"range":[2831,2846],"text":"[form.quantityInputRef, item, loading]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":105,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":105,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'form'. Either include it or remove the dependency array.","line":113,"column":6,"nodeType":"ArrayExpression","endLine":113,"endColumn":30,"suggestions":[{"desc":"Update the dependencies array to be: [item, form]","fix":{"range":[3664,3688],"text":"[item, form]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback, useRef } from \"react\";\nimport { Alert } from \"react-native\";\nimport { useLocalSearchParams, useRouter } from \"expo-router\";\nimport { useScanSessionStore } from \"@/store/scanSessionStore\";\nimport { getItemByBarcode, refreshItemStock } from \"@/services/api\";\nimport { CountLineBatch } from \"@/types/scan\";\nimport { useItemForm } from \"./useItemForm\";\nimport { useItemSubmission } from \"./useItemSubmission\";\n\nexport const useItemDetailLogic = () => {\n  const router = useRouter();\n  const params = useLocalSearchParams<{ barcode: string; sessionId: string }>();\n  const { barcode, sessionId } = params;\n  const { sessionType } = useScanSessionStore();\n\n  const [loading, setLoading] = useState(false);\n  const [refreshingStock, setRefreshingStock] = useState(false);\n  const [item, setItem] = useState<any>(null);\n\n  const refreshErrorCountRef = useRef<number>(0);\n  const MAX_REFRESH_ERRORS = 3;\n\n  const form = useItemForm();\n  const submission = useItemSubmission({\n    form,\n    item,\n    sessionId: sessionId as string,\n    sessionType: sessionType as string\n  });\n\n  // Load Item Details\n  useEffect(() => {\n    const loadItem = async () => {\n      if (!barcode) {\n        console.error(\"No barcode provided to ItemDetailScreen\");\n        return;\n      }\n      setLoading(true);\n      try {\n        const itemData = await getItemByBarcode(barcode as string);\n        if (itemData) {\n          setItem(itemData);\n          form.setMrp(itemData.mrp ? String(itemData.mrp) : \"\");\n          form.setCategory(itemData.category || \"\");\n          form.setSubCategory(itemData.subcategory || \"\");\n\n          // Auto-detect batches\n          if (itemData.batches && itemData.batches.length > 0) {\n            form.setIsBatchMode(true);\n            const mappedBatches: CountLineBatch[] = itemData.batches.map((b: any) => ({\n              quantity: b.stock_qty || 0,\n              mrp: b.mrp,\n              manufacturing_date: b.manufacturing_date,\n              item_condition: \"No Issue\",\n              condition_details: \"\",\n              barcode: b.barcode,\n              batch_no: b.batch_no,\n            }));\n            form.setBatches(mappedBatches);\n          }\n        } else {\n          Alert.alert(\"Error\", \"Item not found\");\n          router.back();\n        }\n      } catch (error: any) {\n        Alert.alert(\"Error\", error.message || \"Failed to load item\");\n        router.back();\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (barcode) {\n      loadItem();\n    }\n  }, [barcode, router]);\n\n  // Auto-focus quantity input when item loads\n  useEffect(() => {\n    if (item && !loading) {\n      const timer = setTimeout(() => {\n        form.quantityInputRef.current?.focus();\n      }, 500);\n      return () => clearTimeout(timer);\n    }\n    return undefined;\n  }, [item, loading]);\n\n  const handleRefreshStock = useCallback(async (silent: boolean = false) => {\n    if (!item || !item.item_code) return;\n\n    if (silent && refreshErrorCountRef.current >= MAX_REFRESH_ERRORS) return;\n\n    setRefreshingStock(true);\n    try {\n      const result = await refreshItemStock(item.item_code);\n      if (result.success && result.item) {\n        setItem(result.item);\n        if (!form.mrpEditable) {\n          form.setMrp(result.item.mrp ? String(result.item.mrp) : \"\");\n        }\n        refreshErrorCountRef.current = 0;\n      } else {\n        throw new Error(\"Failed to refresh stock\");\n      }\n    } catch (error) {\n      refreshErrorCountRef.current += 1;\n      if (!silent) {\n        Alert.alert(\"Error\", \"Failed to refresh stock\");\n      }\n    } finally {\n      setRefreshingStock(false);\n    }\n  }, [item, form.mrpEditable]);\n\n  const { loading: submitting, handleSubmit } = submission;\n\n  return {\n    item,\n    loading,\n    submitting,\n    refreshingStock,\n    handleRefreshStock,\n    sessionType,\n    sessionId,\n    barcode,\n    ...form,\n    handleSubmit\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/scan/useItemForm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/scan/useItemState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/scan/useItemSubmission.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/scan/usePhotoState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/scan/useScanState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/scan/useWorkflowState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/useAppVersion.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/useAutoLogout.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/useDebouncedCallback.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/useFormValidation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/useItemByBarcodeQuery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/usePermissions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/useSafeState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/useSearchItemsQuery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/useSessionsQuery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/useSystemTheme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/useTheme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/hooks/useVersionCheck.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/__tests__/api.test.ts","messages":[{"ruleId":"import/first","severity":1,"message":"Import in body of module; reorder to top.","line":39,"column":1,"nodeType":"ImportDeclaration","endLine":39,"endColumn":39,"fix":{"range":[958,958],"text":""}},{"ruleId":"import/first","severity":1,"message":"Import in body of module; reorder to top.","line":40,"column":1,"nodeType":"ImportDeclaration","endLine":40,"endColumn":60,"fix":{"range":[0,1018],"text":"/**\n * API Service Tests\n * Tests for core API functionality\n */\n\nimport { describe, it, expect, jest, beforeEach } from '@jest/globals';\n\nimport { isOnline } from '../api/api';\nimport { useNetworkStore } from '../../store/networkStore';\n\n// Mock dependencies\njest.mock('../../store/networkStore', () => ({\n  useNetworkStore: {\n    getState: jest.fn(() => ({\n      isOnline: true,\n      isInternetReachable: true,\n      connectionType: 'wifi',\n    })),\n  },\n}));\n\njest.mock('../httpClient', () => ({\n  default: {\n    get: jest.fn(),\n    post: jest.fn(),\n    put: jest.fn(),\n    delete: jest.fn(),\n  },\n}));\n\njest.mock('../offline/offlineStorage', () => ({\n  addToOfflineQueue: jest.fn(),\n  cacheItem: jest.fn(),\n  searchItemsInCache: jest.fn(() => Promise.resolve([])),\n  cacheSession: jest.fn(),\n  getSessionsCache: jest.fn(() => Promise.resolve([])),\n  getSessionFromCache: jest.fn(() => Promise.resolve(null)),\n  cacheCountLine: jest.fn(),\n  getCountLinesBySessionFromCache: jest.fn(() => Promise.resolve([])),\n}));"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"/**\n * API Service Tests\n * Tests for core API functionality\n */\n\nimport { describe, it, expect, jest, beforeEach } from '@jest/globals';\n\n// Mock dependencies\njest.mock('../../store/networkStore', () => ({\n  useNetworkStore: {\n    getState: jest.fn(() => ({\n      isOnline: true,\n      isInternetReachable: true,\n      connectionType: 'wifi',\n    })),\n  },\n}));\n\njest.mock('../httpClient', () => ({\n  default: {\n    get: jest.fn(),\n    post: jest.fn(),\n    put: jest.fn(),\n    delete: jest.fn(),\n  },\n}));\n\njest.mock('../offline/offlineStorage', () => ({\n  addToOfflineQueue: jest.fn(),\n  cacheItem: jest.fn(),\n  searchItemsInCache: jest.fn(() => Promise.resolve([])),\n  cacheSession: jest.fn(),\n  getSessionsCache: jest.fn(() => Promise.resolve([])),\n  getSessionFromCache: jest.fn(() => Promise.resolve(null)),\n  cacheCountLine: jest.fn(),\n  getCountLinesBySessionFromCache: jest.fn(() => Promise.resolve([])),\n}));\n\nimport { isOnline } from '../api/api';\nimport { useNetworkStore } from '../../store/networkStore';\n\ndescribe('API Service - Network Detection', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should return true when online and internet reachable', () => {\n    (useNetworkStore.getState as jest.Mock).mockReturnValue({\n      isOnline: true,\n      isInternetReachable: true,\n      connectionType: 'wifi',\n    });\n\n    expect(isOnline()).toBe(true);\n  });\n\n  it('should return false when offline', () => {\n    (useNetworkStore.getState as jest.Mock).mockReturnValue({\n      isOnline: false,\n      isInternetReachable: false,\n      connectionType: 'none',\n    });\n\n    expect(isOnline()).toBe(false);\n  });\n\n  it('should return false when internet not reachable', () => {\n    (useNetworkStore.getState as jest.Mock).mockReturnValue({\n      isOnline: true,\n      isInternetReachable: false,\n      connectionType: 'cellular',\n    });\n\n    expect(isOnline()).toBe(false);\n  });\n\n  it('should assume online when network state is unknown', () => {\n    (useNetworkStore.getState as jest.Mock).mockReturnValue({\n      isOnline: undefined,\n      isInternetReachable: undefined,\n      connectionType: undefined,\n    });\n\n    expect(isOnline()).toBe(true);\n  });\n\n  it('should assume online when network state is null', () => {\n    (useNetworkStore.getState as jest.Mock).mockReturnValue({\n      isOnline: null,\n      isInternetReachable: null,\n      connectionType: null,\n    });\n\n    expect(isOnline()).toBe(true);\n  });\n});\n\ndescribe('API Service - Session Management', () => {\n  it('should create session with warehouse parameter', async () => {\n    // Test placeholder - implement when createSession is properly typed\n    expect(true).toBe(true);\n  });\n\n  it('should create session with type parameter', async () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n\n  it('should handle session creation errors', async () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n});\n\ndescribe('API Service - Item Operations', () => {\n  it('should search items by barcode', async () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n\n  it('should search items by item code', async () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n\n  it('should cache search results', async () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n\n  it('should fall back to cache when offline', async () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n});\n\ndescribe('API Service - Offline Queue', () => {\n  it('should add failed requests to offline queue', async () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n\n  it('should retry requests when back online', async () => {\n    // Test placeholder\n    expect(true).toBe(true);\n  });\n});","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/__tests__/storage.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mockMultiRemove' is assigned a value but never used.","line":37,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Storage Service Tests\n * Tests for AsyncStorage wrapper and caching\n */\n\nimport { describe, it, expect, jest, beforeEach, afterEach } from \"@jest/globals\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { asyncStorageService as AsyncStorageService } from \"../storage/asyncStorageService\";\n\n// Mock AsyncStorage properly regarding hoisting\njest.mock(\"@react-native-async-storage/async-storage\", () => ({\n  setItem: jest.fn(),\n  getItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n  getAllKeys: jest.fn(),\n  multiGet: jest.fn(),\n  multiSet: jest.fn(),\n  multiRemove: jest.fn(),\n}));\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst mockSetItem = AsyncStorage.setItem as jest.MockedFunction<any>;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst mockGetItem = AsyncStorage.getItem as jest.MockedFunction<any>;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst mockRemoveItem = AsyncStorage.removeItem as jest.MockedFunction<any>;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst mockClear = AsyncStorage.clear as jest.MockedFunction<any>;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst mockGetAllKeys = AsyncStorage.getAllKeys as jest.MockedFunction<any>;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst mockMultiGet = AsyncStorage.multiGet as jest.MockedFunction<any>;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst mockMultiSet = AsyncStorage.multiSet as jest.MockedFunction<any>;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst mockMultiRemove = AsyncStorage.multiRemove as jest.MockedFunction<any>;\n\ndescribe(\"AsyncStorageService - Basic Operations\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe(\"getItem\", () => {\n    it(\"should retrieve and parse JSON data\", async () => {\n      const testData = { name: \"Test Item\", value: 123 };\n      const storedItem = { value: testData, timestamp: Date.now() };\n      mockGetItem.mockResolvedValue(JSON.stringify(storedItem));\n\n      const result = await AsyncStorageService.getItem(\"test-key\");\n\n      expect(mockGetItem).toHaveBeenCalledWith(\"test-key\");\n      expect(result).toEqual(testData);\n    });\n\n    it(\"should return null for non-existent keys\", async () => {\n      mockGetItem.mockResolvedValue(null);\n\n      const result = await AsyncStorageService.getItem(\"non-existent\");\n\n      expect(result).toBeNull();\n    });\n\n    it(\"should return default value when key not found\", async () => {\n      mockGetItem.mockResolvedValue(null);\n      const defaultValue = { default: true };\n\n      const result = await AsyncStorageService.getItem(\"test-key\", {\n        defaultValue,\n      });\n\n      expect(result).toEqual(defaultValue);\n    });\n\n    it(\"should handle JSON parse errors gracefully\", async () => {\n      mockGetItem.mockResolvedValue(\"invalid json {\");\n\n      const result = await AsyncStorageService.getItem(\"test-key\");\n\n      expect(result).toBe(\"invalid json {\");\n    });\n  });\n\n  describe(\"setItem\", () => {\n    it(\"should stringify and store data\", async () => {\n      const testData = { name: \"Test\", value: 456 };\n      mockSetItem.mockResolvedValue(undefined);\n\n      const result = await AsyncStorageService.setItem(\"test-key\", testData);\n\n      expect(mockSetItem).toHaveBeenCalledWith(\n        \"test-key\",\n        expect.stringMatching(/\"value\":{\"name\":\"Test\",\"value\":456}/),\n      );\n      expect(result).toBe(true);\n    });\n\n    it(\"should handle storage errors\", async () => {\n      mockSetItem.mockRejectedValue(new Error(\"Storage full\"));\n\n      const result = await AsyncStorageService.setItem(\"test-key\", { data: \"test\" });\n\n      expect(result).toBe(false);\n    });\n\n    it(\"should store primitive values\", async () => {\n      mockSetItem.mockResolvedValue(undefined);\n\n      await AsyncStorageService.setItem(\"string-key\", \"test string\");\n      await AsyncStorageService.setItem(\"number-key\", 123);\n      await AsyncStorageService.setItem(\"boolean-key\", true);\n\n      expect(mockSetItem).toHaveBeenCalledTimes(3);\n    });\n  });\n\n  describe(\"removeItem\", () => {\n    it(\"should remove item from storage\", async () => {\n      mockRemoveItem.mockResolvedValue(undefined);\n\n      const result = await AsyncStorageService.removeItem(\"test-key\");\n\n      expect(mockRemoveItem).toHaveBeenCalledWith(\"test-key\");\n      expect(result).toBe(true);\n    });\n\n    it(\"should handle removal errors\", async () => {\n      mockRemoveItem.mockRejectedValue(new Error(\"Remove failed\"));\n\n      const result = await AsyncStorageService.removeItem(\"test-key\");\n\n      expect(result).toBe(false);\n    });\n  });\n\n  describe(\"clearAll\", () => {\n    it(\"should clear all storage\", async () => {\n      mockClear.mockResolvedValue(undefined);\n\n      const result = await AsyncStorageService.clearAll({ confirm: false });\n\n      expect(mockClear).toHaveBeenCalled();\n      expect(result).toBe(true);\n    });\n  });\n});\n\ndescribe(\"AsyncStorageService - Batch Operations\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe(\"getMultiple\", () => {\n    it(\"should retrieve multiple items\", async () => {\n      const keys = [\"key1\", \"key2\", \"key3\"];\n      const values = [\n        [\"key1\", JSON.stringify({ value: { value: 1 }, timestamp: Date.now() })],\n        [\"key2\", JSON.stringify({ value: { value: 2 }, timestamp: Date.now() })],\n        [\"key3\", JSON.stringify({ value: { value: 3 }, timestamp: Date.now() })],\n      ];\n      mockMultiGet.mockResolvedValue(values);\n\n      const result = await AsyncStorageService.getMultiple(keys);\n\n      expect(mockMultiGet).toHaveBeenCalledWith(keys);\n      expect(result).toEqual({\n        key1: { value: 1 },\n        key2: { value: 2 },\n        key3: { value: 3 },\n      });\n    });\n\n    it(\"should handle null values in batch\", async () => {\n      const keys = [\"key1\", \"key2\"];\n      const values = [\n        [\"key1\", JSON.stringify({ value: { value: 1 }, timestamp: Date.now() })],\n        [\"key2\", null],\n      ];\n      mockMultiGet.mockResolvedValue(values);\n\n      const result = await AsyncStorageService.getMultiple(keys);\n\n      expect(result).toEqual({\n        key1: { value: 1 },\n        key2: null,\n      });\n    });\n  });\n\n  describe(\"setMultiple\", () => {\n    it(\"should store multiple items\", async () => {\n      const items: [string, any][] = [\n        [\"key1\", { value: 1 }],\n        [\"key2\", { value: 2 }],\n      ];\n      mockMultiSet.mockResolvedValue(undefined);\n\n      const result = await AsyncStorageService.setMultiple(items);\n\n      expect(mockMultiSet).toHaveBeenCalledWith([\n        [\"key1\", expect.stringMatching(/\"value\":{\"value\":1}/)],\n        [\"key2\", expect.stringMatching(/\"value\":{\"value\":2}/)],\n      ]);\n      expect(result).toBe(true);\n    });\n  });\n});\n\ndescribe(\"AsyncStorageService - TTL Support\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    jest.useFakeTimers();\n  });\n\n  afterEach(() => {\n    jest.useRealTimers();\n  });\n\n  it(\"should store data with TTL metadata\", async () => {\n    const testData = { name: \"Test\" };\n    const ttl = 1000 * 60 * 60; // 1 hour\n    mockSetItem.mockResolvedValue(undefined);\n    mockGetItem.mockResolvedValue(null);\n    mockRemoveItem.mockResolvedValue(undefined);\n    mockClear.mockResolvedValue(undefined);\n    mockGetAllKeys.mockResolvedValue([]);\n\n    await AsyncStorageService.setItem(\"test-key\", testData, { expires: ttl });\n\n    const storedValue = mockSetItem.mock.calls[0]?.[1] as string;\n    const parsed = JSON.parse(storedValue);\n\n    expect(parsed).toHaveProperty(\"expires\");\n    expect(parsed).toHaveProperty(\"timestamp\");\n  });\n\n  it(\"should return null for expired data\", async () => {\n    const expiredData = {\n      value: { name: \"Test\" },\n      expires: Date.now() - 2000, // Expired 1 second ago\n      timestamp: Date.now() - 5000,\n    };\n    mockGetItem.mockResolvedValue(JSON.stringify(expiredData));\n\n    const result = await AsyncStorageService.getItem(\"test-key\");\n\n    expect(result).toBeNull();\n  });\n\n  it(\"should return data that has not expired\", async () => {\n    const validData = {\n      value: { name: \"Test\" },\n      expires: Date.now() + 3600000,\n      timestamp: Date.now(),\n    };\n    mockGetItem.mockResolvedValue(JSON.stringify(validData));\n\n    const result = await AsyncStorageService.getItem(\"test-key\");\n\n    expect(result).toEqual({ name: \"Test\" });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/api/adminApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/api/api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/api/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/api/itemVerificationApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/api/notesApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/api/reportApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/asyncStorageService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/authStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/backendUrl.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/devtools/reactotron.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/enhancedFeatures.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/enhancedSearchService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/errorRecovery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/exportService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/haptics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/httpClient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/itemVerificationApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/mmkvStorage.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":16,"column":22,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":16,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { Platform } from \"react-native\";\n\n// MMKV 3.x requires TurboModules (new architecture). Expo Go often runs\n// without the new architecture. Safely fall back to AsyncStorage.\nlet storage: any = null;\n// In-memory fallback cache to keep synchronous semantics when MMKV is unavailable\nconst memory = new Map<string, string>();\n// Pending writes queue to prevent race conditions\nconst pendingWrites = new Map<string, Promise<void>>();\n\n// Only try to import MMKV on native platforms\nif (Platform.OS !== \"web\") {\n  try {\n    // Dynamic import wrapped in try-catch for native platforms\n    const { MMKV } = require(\"react-native-mmkv\");\n    storage = new MMKV();\n  } catch {\n    console.warn(\n      \"[MMKV] New architecture not enabled; falling back to AsyncStorage\",\n    );\n    storage = null;\n  }\n} else {\n  console.log(\"[MMKV] Web platform detected; using AsyncStorage fallback\");\n}\n\n// Helper to wait for pending write before reading\nconst waitForPendingWrite = async (key: string): Promise<void> => {\n  const pending = pendingWrites.get(key);\n  if (pending) {\n    await pending;\n  }\n};\n\nexport const mmkvStorage = {\n  // Keep synchronous API expected by callers; when MMKV is not available,\n  // use an in-memory cache and mirror writes to AsyncStorage in the background.\n  getItem: (key: string): string | null => {\n    if (storage) return storage.getString(key) ?? null;\n    return memory.get(key) ?? null;\n  },\n\n  // Async version that waits for pending writes (prevents race conditions)\n  getItemAsync: async (key: string): Promise<string | null> => {\n    if (storage) return storage.getString(key) ?? null;\n\n    // Wait for any pending write to complete\n    await waitForPendingWrite(key);\n\n    // If in memory, return it\n    if (memory.has(key)) {\n      return memory.get(key) ?? null;\n    }\n\n    // Otherwise, try to load from AsyncStorage\n    try {\n      const value = await AsyncStorage.getItem(key);\n      if (value !== null) {\n        memory.set(key, value);\n      }\n      return value;\n    } catch {\n      return null;\n    }\n  },\n\n  setItem: (key: string, value: string): void => {\n    if (storage) {\n      storage.set(key, value);\n      return;\n    }\n    // Fallback: write to memory and persist asynchronously with race condition prevention\n    memory.set(key, value);\n    const writePromise = AsyncStorage.setItem(key, value)\n      .catch((err) => console.warn(`[mmkvStorage] Failed to persist ${key}:`, err))\n      .finally(() => {\n        // Clean up pending write tracking\n        if (pendingWrites.get(key) === writePromise) {\n          pendingWrites.delete(key);\n        }\n      });\n    pendingWrites.set(key, writePromise);\n  },\n\n  removeItem: (key: string): void => {\n    if (storage) {\n      storage.delete(key);\n      return;\n    }\n    memory.delete(key);\n    const deletePromise = AsyncStorage.removeItem(key)\n      .catch((err) => console.warn(`[mmkvStorage] Failed to remove ${key}:`, err))\n      .finally(() => {\n        if (pendingWrites.get(key) === deletePromise) {\n          pendingWrites.delete(key);\n        }\n      });\n    pendingWrites.set(key, deletePromise);\n  },\n\n  // Sync all pending writes - useful before app close\n  flush: async (): Promise<void> => {\n    const promises = Array.from(pendingWrites.values());\n    if (promises.length > 0) {\n      await Promise.all(promises);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/monitoring/databaseStatusService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/monitoring/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/monitoring/performanceService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/networkService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/notesApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/offline/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/offline/offlineQueue.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/offline/offlineStorage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/offlineQueue.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/queryClient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/recentRacksService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/scanDeduplicationService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useAuthStore' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useAuthStore } from \"@/store/authStore\";\n\n/**\n * Service for managing scan deduplication\n */\nconst SCAN_DEDUP_KEY = \"recent_scans\";\n\ninterface RecentScan {\n  barcode: string;\n  timestamp: string;\n}\n\n/**\n * Service for managing scan deduplication\n */\nexport const scanDeduplicationService = {\n  /**\n   * Record a successful scan for deduplication\n   */\n  recordScan: async (barcode: string) => {\n    try {\n      const recentScans: RecentScan[] = JSON.parse(\n        (await AsyncStorage.getItem(SCAN_DEDUP_KEY)) || \"[]\"\n      );\n\n      // Add new scan to beginning\n      recentScans.unshift({\n        barcode,\n        timestamp: new Date().toISOString(),\n      });\n\n      // Keep only last 50 scans\n      const limitedScans = recentScans.slice(0, 50);\n\n      await AsyncStorage.setItem(\n        SCAN_DEDUP_KEY,\n        JSON.stringify(limitedScans)\n      );\n    } catch (error) {\n      console.error(\"Error recording scan:\", error);\n    }\n  },\n\n  /**\n   * Check if barcode was recently scanned\n   */\n  checkDuplicate: async (barcode: string, timeWindowMinutes: number = 5) => {\n    try {\n      const recentScans: RecentScan[] = JSON.parse(\n        (await AsyncStorage.getItem(SCAN_DEDUP_KEY)) || \"[]\"\n      );\n\n      const cutoffTime = new Date(Date.now() - timeWindowMinutes * 60 * 1000);\n\n      const recentScan = recentScans.find(\n        (scan) =>\n          scan.barcode === barcode && new Date(scan.timestamp) > cutoffTime\n      );\n\n      return { isDuplicate: !!recentScan };\n    } catch (error) {\n      console.error(\"Error checking duplicate:\", error);\n      return { isDuplicate: false };\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/sentry.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/storage/asyncStorageService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/storage/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/storage/mmkvStorage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/syncService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/themeService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/toastService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/utils/errorHandler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/utils/errorRecovery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/utils/haptics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/utils/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/utils/queryClient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/utils/themeService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/utils/toastService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/utils/validationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/services/versionService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/store/authStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/store/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/store/networkStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/store/scanSessionStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/store/settingsStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/styles/globalStyles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/styles/modernDesignSystem.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/theme/Provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/theme/ThemeContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/theme/auroraTheme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/theme/designSystem.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/theme/designTokens.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/theme/enhancedColors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/theme/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/theme/themes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/theme/typography.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/types/api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/types/item.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/types/react-native-mmkv.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/types/reactotron-react-native.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/types/scan.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/types/session.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/types/user.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/__tests__/validation.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/algorithms.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/backendUrl.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/clipboard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/csvExport.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/deviceInfo.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/errorHandler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/haptics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/retry.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/scanUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/noufi1/cursor new/STOCK_VERIFY_2-db-maped/frontend/src/utils/validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
